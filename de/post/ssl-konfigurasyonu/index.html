<!doctype html><html lang=de dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Erh√∂hung der SSL-Sicherheit auf Linux-Servern | Wise</title><meta name=keywords content="linux,ssl,sicherheit,audit"><meta name=description content="Erh√∂hung der SSL-Sicherheit auf Linux-Servern Wenn Sie heute eine Website und/oder App auf Ihrem aktuellen Server betreiben, werde ich √ºber die ben√∂tigte SSL-Verbindung und die damit verbundene openssl-Bibliothek sprechen. SSL (Secure Socket Layer) und TLS (Transport Layer Security) sind eine Form der Verbindung, die es Personen, die sich mit Ihrem Server verbinden m√∂chten, erm√∂glicht, sicher mit Ihrer Website zu kommunizieren. In der Vergangenheit gab es Versionen von SSL v1 bis v3, und w√§hrend Websites im Allgemeinen diese SSL-Versionen verwenden, wurde SSL jetzt von den Websites aufgegeben und durch das sicherere TLS ersetzt."><meta name=author content="Wise"><link rel=canonical href=https://wiseweb-works.github.io/blog/de/post/ssl-konfigurasyonu/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.3da8f760c1219bf0b204073b46d591a809f88d454cd18abfeec1ca847f7b86a1.css integrity="sha256-Paj3YMEhm/CyBAc7RtWRqAn4jUVM0Yq/7sHKhH97hqE=" rel="preload stylesheet" as=style><link rel=icon href=https://wiseweb-works.github.io/blog/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wiseweb-works.github.io/blog/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wiseweb-works.github.io/blog/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://wiseweb-works.github.io/blog/favicons/apple-touch-icon.png><link rel=mask-icon href=https://wiseweb-works.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=tr href=https://wiseweb-works.github.io/blog/post/ssl-konfigurasyonu/><link rel=alternate hreflang=en href=https://wiseweb-works.github.io/blog/en/post/ssl-konfigurasyonu/><link rel=alternate hreflang=de href=https://wiseweb-works.github.io/blog/de/post/ssl-konfigurasyonu/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Erh√∂hung der SSL-Sicherheit auf Linux-Servern"><meta property="og:description" content="Erh√∂hung der SSL-Sicherheit auf Linux-Servern Wenn Sie heute eine Website und/oder App auf Ihrem aktuellen Server betreiben, werde ich √ºber die ben√∂tigte SSL-Verbindung und die damit verbundene openssl-Bibliothek sprechen. SSL (Secure Socket Layer) und TLS (Transport Layer Security) sind eine Form der Verbindung, die es Personen, die sich mit Ihrem Server verbinden m√∂chten, erm√∂glicht, sicher mit Ihrer Website zu kommunizieren. In der Vergangenheit gab es Versionen von SSL v1 bis v3, und w√§hrend Websites im Allgemeinen diese SSL-Versionen verwenden, wurde SSL jetzt von den Websites aufgegeben und durch das sicherere TLS ersetzt."><meta property="og:type" content="article"><meta property="og:url" content="https://wiseweb-works.github.io/blog/de/post/ssl-konfigurasyonu/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-10-12T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-08T02:13:24+02:00"><meta property="og:site_name" content="Wise Web Works"><meta name=twitter:card content="summary"><meta name=twitter:title content="Erh√∂hung der SSL-Sicherheit auf Linux-Servern"><meta name=twitter:description content="Erh√∂hung der SSL-Sicherheit auf Linux-Servern Wenn Sie heute eine Website und/oder App auf Ihrem aktuellen Server betreiben, werde ich √ºber die ben√∂tigte SSL-Verbindung und die damit verbundene openssl-Bibliothek sprechen. SSL (Secure Socket Layer) und TLS (Transport Layer Security) sind eine Form der Verbindung, die es Personen, die sich mit Ihrem Server verbinden m√∂chten, erm√∂glicht, sicher mit Ihrer Website zu kommunizieren. In der Vergangenheit gab es Versionen von SSL v1 bis v3, und w√§hrend Websites im Allgemeinen diese SSL-Versionen verwenden, wurde SSL jetzt von den Websites aufgegeben und durch das sicherere TLS ersetzt."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wiseweb-works.github.io/blog/de/post/"},{"@type":"ListItem","position":2,"name":"Erh√∂hung der SSL-Sicherheit auf Linux-Servern","item":"https://wiseweb-works.github.io/blog/de/post/ssl-konfigurasyonu/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Erh√∂hung der SSL-Sicherheit auf Linux-Servern","name":"Erh√∂hung der SSL-Sicherheit auf Linux-Servern","description":"Erh√∂hung der SSL-Sicherheit auf Linux-Servern Wenn Sie heute eine Website und/oder App auf Ihrem aktuellen Server betreiben, werde ich √ºber die ben√∂tigte SSL-Verbindung und die damit verbundene openssl-Bibliothek sprechen. SSL (Secure Socket Layer) und TLS (Transport Layer Security) sind eine Form der Verbindung, die es Personen, die sich mit Ihrem Server verbinden m√∂chten, erm√∂glicht, sicher mit Ihrer Website zu kommunizieren. In der Vergangenheit gab es Versionen von SSL v1 bis v3, und w√§hrend Websites im Allgemeinen diese SSL-Versionen verwenden, wurde SSL jetzt von den Websites aufgegeben und durch das sicherere TLS ersetzt.","keywords":["linux","ssl","sicherheit","audit"],"articleBody":"Erh√∂hung der SSL-Sicherheit auf Linux-Servern Wenn Sie heute eine Website und/oder App auf Ihrem aktuellen Server betreiben, werde ich √ºber die ben√∂tigte SSL-Verbindung und die damit verbundene openssl-Bibliothek sprechen. SSL (Secure Socket Layer) und TLS (Transport Layer Security) sind eine Form der Verbindung, die es Personen, die sich mit Ihrem Server verbinden m√∂chten, erm√∂glicht, sicher mit Ihrer Website zu kommunizieren. In der Vergangenheit gab es Versionen von SSL v1 bis v3, und w√§hrend Websites im Allgemeinen diese SSL-Versionen verwenden, wurde SSL jetzt von den Websites aufgegeben und durch das sicherere TLS ersetzt. Wir m√ºssen jedoch weiterhin das Wort ‚Äússl‚Äù im erl√§uternden Teil und beim Bearbeiten der Konfigurationsdateien verwenden. Um Ihnen das mit ein wenig Humor zu sagen, haben Sie jemals dar√ºber nachgedacht, warum, wenn Sie die 64-Bit-Version einer Anwendung herunterladen m√∂chten, warum sie ‚Äúamd_64‚Äù hei√üt? Da AMD als erster auf 64 Bit umgestiegen ist, blieb diese Namensgebung als Zeichen des Respekts und/oder der Gewohnheit bei amd_64. Auch wenn wir derzeit TLS verwenden, bleiben die Benennungs- und Konfigurationsparameter ‚ÄûSSL‚Äú.\nWie in unserem vorherigen Artikel werde ich den Prozess noch einmal unter drei verschiedenen √úberschriften als einfach, empfohlen und fortgeschritten erkl√§ren. Titelinhalte werden sukzessive nach pers√∂nlichen Anforderungen ber√ºcksichtigt. Obwohl die Titel miteinander verkn√ºpft sind, ist es kein Problem, sie in einem gew√ºnschten Stadium zu belassen.\nEinfache Konfiguration Zuerst m√ºssen wir die Updates √ºber die Konsole mit dem Paketmanager der Linux-Version installieren, in der wir uns befinden.\nUbuntu: sudo apt update \u0026\u0026 sudo apt upgrade -y Fedora: sudo yum update -y Arch Linux: sudo pacman -Syyu Nachdem die Updates installiert sind, beginnen wir mit der Konfiguration des nginx/Apache-Dienstes (das ist der Dienst, der es Ihnen erm√∂glicht, externe Webverbindungen zu empfangen) auf Ihrem Server (in meinem Fall Ubuntu). Die Datei, in der die Nginx-Diensteinstellungen gespeichert sind, befindet sich im Allgemeinen unter ‚Äû/etc/nginx/nginx.conf‚Äú. Wir m√ºssen es mit einem der von uns verwendeten Texteditoren √∂ffnen, jedoch mit einem Benutzer mit sudo-Rechten (dh Administratorrechten).\nWenn wir mit Ubuntu fortfahren (Single IP for Single Server Configuration)\nsudo nano /etc/nginx/nginx.config # Befehl zum √ñffnen der Einstellungsdatei Zu erg√§nzende Titel (gegebenenfalls ge√§ndert) h√∂ren 443 ssl http2; \u003e\u003e Es dient dazu, die Anfragen zu erf√ºllen, die √ºber IPv4 mit dem http2-Protokoll an Port 443 kommen, und eine SSL-Verbindung aufzubauen. h√∂ren [::]:443 ssl http2; \u003e\u003e Es dient dazu, die an Port 443 eingehenden Anfragen √ºber IPv6 mit http2-Protokoll zu erf√ºllen und eine SSL-Verbindung herzustellen. (Wenn Sie keine IPv6-Unterst√ºtzung haben oder sie nicht nativ unterst√ºtzen m√∂chten, k√∂nnen Sie sie entfernen.) server_name IHR SERVER_NAME; \u003e\u003e Wenn Sie Ihren Servernamen nicht als Standard festlegen m√∂chten, k√∂nnen Sie einen Servernamensindikator angeben. Dies dient nur dazu, die an Ihren Servernamen eingehenden Anforderungen zu erf√ºllen, anstatt alle eingehenden Anforderungen zu erf√ºllen. ssl_certificate /etc/letsencrypt/live/YOURSERVER_NAME/fullchain.pem; \u003e\u003e Wenn Sie Let's Encrypt f√ºr kostenloses SSL verwenden, ist dies der Standardspeicherort f√ºr das Zertifikat. Andernfalls ersetzen Sie es durch Ihre eigene Zertifikatsdatei. ssl_certificate_key /etc/letsencrypt/live/YOURSERVER_NAME/privkey.pem; \u003e\u003e Wenn Sie Let's Encrypt f√ºr kostenloses SSL verwenden, ist dies der Standardspeicherort f√ºr private Schl√ºssel. Ersetzen Sie es andernfalls durch Ihren eigenen Speicherort der privaten Schl√ºsseldatei. ssl_protocols TLSv1.3 TLSv1.2; \u003e\u003e Erforderlicher Befehl, um nur die neuesten und zuverl√§ssigsten TLS-Protokolle zu akzeptieren. ssl_prefer_server_ciphers on; \u003e\u003e W√§hrend des Gespr√§chs zwischen dem Server und dem Client, sch√§tze ich, dass sie √ºber \"ok, mal sehen, was wir haben\" gesprochen haben. Kurz gesagt, wenn es f√ºr Sie funktioniert, wenn es f√ºr Sie nicht funktioniert, rede ich nicht. ssl_ecdh_curve secp521r1:secp384r1; \u003e\u003e¬†Es ist der Befehl, der uns sagt, welche Kurven wir bevorzugen, wenn wir Ekliptikkurven verwenden m√ºssen. ssl_chiffren DH-RSA-AES256-SHA:DH-RSA-AES256-SHA256:DHE-RSA-AES256-GCM-SHA384:DH-RSA-AES256-GCM-SHA384:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_PODSADHESA:25_SHA256 -ECDSA-AES256 -RSA-AES256-SHA:AECDH-AES256-SHA:ECDHE-ECDSA-AES256-SHA384:ECDH-ECDSA-AES256-SHA384:ECDH-RSA-AES256-SHA384:ECDHE-ECDSA-AES256 -GCM-SHA384:ECDH-ECDSA -AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDH-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-CCM:DHE-RSA-AES256-CCM8 :ECDHE-ECDSA-AES256-CCM :ECDHE-ECDSA-AES256-CCM8:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-CHACHA20-POLY1305:DHE-RSA-CHACHA20-POLY1305; \u003e\u003e Der Code, der den Server anweist, nur die SSL-Algorithmen zu verwenden, die ich am zuverl√§ssigsten finde. Alle Chiffren f√ºr diejenigen, die einzeln recherchieren wollen: ‚Äúhttps://testssl.sh/openssl-iana.mapping.html\"\nWenn Sie nach dem Vornehmen der Einstellungen √ºberpr√ºfen m√∂chten: Sie k√∂nnen den Befehl ‚Äûsudo nginx -t‚Äú verwenden. Wenn Sie keine Fehlermeldung sehen, k√∂nnen Sie die Einstellungen √ºbernehmen und den Dienst mit dem Befehl ‚Äúsudo systemctl restart nginx‚Äù oder ‚Äúsudo service nginx restart‚Äù neu starten.\nEmpfohlene Einstellungen Zus√§tzlich zu den vorherigen Einstellungen werden wir einige Leistungsverbesserungen sowie einige zus√§tzliche Konfigurationen vornehmen, die es Ihrer Website erm√∂glichen, auf SSL-Testseiten einen h√∂heren Rang einzunehmen. Danach werden wir einige Verbesserungen vornehmen, um sicherzustellen, dass einige Header und Ressourcen Ihrer Website nicht von Websites Dritter ausgenutzt werden, was f√ºr den Benutzerzugriff Ihrer Website von Vorteil ist.\nZu erg√§nzende Titel (gegebenenfalls ge√§ndert) ssl_session_cache freigegeben:TLS:2m; \u003e\u003e Code, der angibt, wie TLS-Verbindungen auf Worker (nginx-Worker) verteilt werden und wie lange die Verbindungen geteilt werden ssl_buffer_size 4k; \u003e\u003e¬†Der Code, der angibt, in wie viele Container die Pakete aufgeteilt werden, wenn auf SSL-Anfragen geantwortet und Pakete nach dem Handshake gesendet werden. Ein niedrigerer Wert bedeutet, dass mehr Pakete gesendet werden, aber weniger Overhead. ssl_stapling an; \u003e\u003e Aktiviert die OCSP-Heftfunktion ssl_stapling_verify an; Aktiviert die M√∂glichkeit, das OCSP-Heften zu √ºberpr√ºfen, einschlie√ülich auf √ºbergeordneten und Stammservern. Resolver 1.1.1.1 1.0.0.1 2606:4700:4700::1111 2606:4700:4700::1001; \u003e\u003e Aktiviert die OCSP-Stapling-√úberpr√ºfung mit Cloudlfare. Wenn Sie IPv6 nicht verwenden oder es nicht nativ unterst√ºtzen m√∂chten, k√∂nnen Sie die IPv6-Adressen l√∂schen. add_header X-Content-Type-Options \"nosniff\" immer; \u003e\u003e Es ist der Header-Wert, der Browser daran hindert, MIME-Inhalte zu verstehen. add_header X-Xss-Protection \"1; mode=block\" immer; \u003e\u003e Es handelt sich um einen Titel, der die Schwachstelle bis zu einem gewissen Grad verhindert, indem er Benutzern erm√∂glicht, einen wei√üen Bildschirm in einer m√∂glichen XSS-Schwachstelle zu sehen. add_header X-Frame-Optionen \"SAMEORIGIN\" immer; \u003e\u003e¬†Es verhindert in irgendeiner Weise, dass eine Seite Ihres Servers auf einer anderen Seite angezeigt und/oder nacheinander mit einem i-Frame-Code usw. ver√∂ffentlicht wird. Nur Sie k√∂nnen ein Fenster von Ihrer eigenen Site innerhalb Ihrer eigenen Site ver√∂ffentlichen. add_header Referrer-Policy \"no-referrer-when-downgrade\" immer; \u003e\u003e Wenn Sie auf eine Website mit geringeren Sicherheitsma√ünahmen umleiten oder verlinken, wird nicht automatisch ein Referrer-Header hinzugef√ºgt und es ist nicht klar, dass der Datenverkehr von Ihrer Website kommt. add_header Content-Security-Policy \"default-src 'self' https: data: 'unsafe-inline' 'unsafe-eval';\" immer; \u003e\u003e Der Titel, der die Bedingungen regelt, unter denen Anfragen, die Sie und andere Benutzer von au√üen anrufen k√∂nnen, aufgerufen werden k√∂nnen. Standardm√§√üig vertraue ich einigen Quellen, die √ºber https kommen. add_header Berechtigungsrichtlinie \"Kamera=(), Vollbild=(self), Geolocation=(), Mikrofon=(), Zahlung=()\" immer; \u003e\u003e Es verhindert das Sammeln von Informationen auf Ihrer Website mit verschiedenen Arten von Vergiftung (Cache-Vergiftung oder js-Vergiftung), indem es angibt, welche Berechtigungen Sie f√ºr den Browser w√ºnschen oder welche Sie √ºberhaupt nicht ben√∂tigen. Wenn Sie nach dem Vornehmen der Einstellungen √ºberpr√ºfen m√∂chten: Sie k√∂nnen den Befehl ‚Äûsudo nginx -t‚Äú verwenden. Wenn Sie keine Fehlermeldung sehen, k√∂nnen Sie die Einstellungen √ºbernehmen und den Dienst mit dem Befehl ‚Äûsudo systemctl restart nginx‚Äú oder ‚Äûsudo service nginx restart‚Äú neu starten.\nErweiterte Einstellungen Zun√§chst f√ºgen wir Ihrer Website einen Header hinzu, um anzuzeigen, dass sie nur √ºber SSL verbunden werden soll. Auf diese Weise k√∂nnen diejenigen, die Ihre Website zuvor aufgerufen haben, und diejenigen, die diesen Titel bereits in ihrem Browser haben, nicht ohne SSL auf Ihre Website zugreifen, selbst wenn sie dies w√ºnschen. Dann werden wir die SSL-Zertifikate heften, die in HTTP-Sitzungen verwendet werden sollen, und wir werden im Voraus angeben, welche Zertifikate neben der vorherigen Methode verbunden werden m√ºssen. Selbst wenn Sie ein autorisierter Top-Zertifikatsmanager oder Root-Manager sind, k√∂nnen diese auf diese Weise keine Verbindung zu Ihrer Site mit dem in Ihrem Namen signierten Zertifikat herstellen. E-Tugra-Stammzertifikatanbieter mit Wohnsitz in der T√ºrkei zu diesem Zeitpunkt unterzeichnete ein Zertifikat f√ºr *.google.com. Wenn Sie ein wenig recherchieren, werden Sie herausfinden, wann es passiert ist und warum (wie schlimm es sein k√∂nnte). Beginnen wir nun mit dem letzten Konfigurationsteil.\nStellen Sie zun√§chst sicher, dass Ihre Website problemlos √ºber SSL aufgerufen werden kann. F√ºgen Sie dann gem√§√ü Ihrer Anfrage einen der folgenden Header zur nginx-Konfigurationsdatei hinzu. Aber Achtung, nur einer.\nadd_header Strict-Transport-Security \"max-age=2592000;\" immer; \u003e\u003e Header, der besagt, dass auf Ihre Website 30 Tage lang nur √ºber HTTPS zugegriffen werden kann. (ohne Subdomains) add_header Strict-Transport-Security \"max-age=2592000; includeSubDomains;\" immer; \u003e\u003e Header, der besagt, dass Ihre Website 30 Tage lang nur √ºber HTTPS aufgerufen werden kann, einschlie√ülich Subdomains. add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains;\" immer; \u003e\u003e Header, der besagt, dass auf Ihre Website 1 Jahr lang nur √ºber HTTPS zugegriffen werden kann, einschlie√ülich Subdomains. add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" immer; \u003e\u003e Der Header, der angibt, dass auf Ihre Website 1 Jahr lang nur √ºber HTTPS zugegriffen werden kann, einschlie√ülich Subdomains, und dass dieser Header von Browsern zwischengespeichert wird. Dar√ºber hinaus werden neue Browser diesen Titel erkennen, auch wenn sie Ihre Website noch nie zuvor besucht haben. add_header Strict-Transport-Security \"max-age=0; includeSubDomains\"; \u003e\u003e Titel f√ºr das vollst√§ndige Entfernen der HSTS-Funktion und der Mitgliedschaft in der Preload-Liste. Nachdem Sie den oben erw√§hnten Header hinzugef√ºgt haben, ist es jetzt an der Zeit, den Hash des verwendeten SSL-Zertifikats an die HTTP-Sitzung anzuheften. In diesem Stadium m√ºssen wir einen Hash Ihres aktuellen Zertifikats extrahieren, das Zertifikat der obersten Unterzeichnungsstelle hashen und diesen Hash-Prozess fortsetzen, bis wir die gesamte Kette einschlie√ülich der obersten Stammzertifizierungsstelle abgeschlossen haben. Aus diesem Grund f√ºhren wir die folgenden Befehle jeweils mit einem Root-Benutzer oder einem Benutzer mit sudo-Berechtigung aus. (Der Vortrag wurde speziell f√ºr Let‚Äôs Encrypt gemacht.)\n1] cat /etc/letsencrypt/live/IHR SERVERNAME/cert.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 \u003e\u003e Dieser Befehl extrahiert den Hash des Zertifikats Ihrer Website. Kopieren Sie den Ergebniswert irgendwo hin. 2] curl -s https://letsencrypt.org/certs/lets-encrypt-x4-cross-signed.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 \u003e\u003e Dieser Befehl extrahiert eines der mehrfach signierten Zertifikate von letsencrypt. 3] curl -s https://letsencrypt.org/certs/lets-encrypt-x3-cross-signed.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 \u003e\u003e Dieser Befehl extrahiert eines der mehrfach signierten Zertifikate von letsencrypt. 4] curl -s https://letsencrypt.org/certs/isrgrootx1.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 \u003e\u003e Dieser Befehl extrahiert das Stammzertifikat (oberstes Zertifikat) von letsencrypt. Der folgende Wert wird der Nginx-Konfigurationsdatei hinzugef√ºgt 5] add_header Public-Key-Pins 'pin-sha256=\"ERSTE_ERGEBNIS\"; Pin-sha256 = \"ZWEITES_ERGEBNIS\"; pin-sha256=\"TIP_END\"; pin-sha256=\"FINISH_RESULT\"; Maximalalter = 2592000; includeSubDomains' immer; \u003e\u003e Sie k√∂nnen sich nur mit dem angegebenen Zertifikat 30 Tage lang mit Ihrer Website verbinden. Sie k√∂nnen den max-age-Wert optional erh√∂hen. Bevor die G√ºltigkeitsdauer Ihres Zertifikats weniger als 30 Tage betr√§gt, m√ºssen Sie die Kopfzeile deaktivieren oder ein neues Zertifikat anfordern und es als f√ºnften Wert hinzuf√ºgen. Als Bonus m√∂chte ich Ihnen einen weiteren Befehl zeigen, dessen Ausf√ºhrung lange dauert, aber sehr n√ºtzlich ist. 6] openssl dhparam -out /etc/nginx/dhparams.pem 4096 \u003e\u003e Die Ausf√ºhrung dieses Befehls kann zwischen 15 Minuten und 1 Stunde dauern. Nachdem der Vorgang abgeschlossen ist, m√ºssen Sie den folgenden Befehl zur nginx-Konfigurationsdatei hinzuf√ºgen. ssl_dhparam /etc/nginx/dhparam.pem; \u003e\u003e Der Befehl zum √Ñndern der w√§hrend des Diffie-Hellman-Schl√ºsselaustauschalgorithmus zu verwendenden Werte mit den gerade erstellten geheimen Werten, abgesehen von den Standardwerten. Nachdem Sie die Einstellungen vorgenommen haben, √ºbernehmen Sie die Einstellungen mit dem Befehl ‚Äûsudo nginx -t‚Äú und dann, wenn Sie keine Fehlermeldung sehen, ‚Äûsudo service nginx restart‚Äú und starten Sie den Dienst neu. Nun wird die Verbindung mit der von Ihnen festgelegten Konfiguration und Bedingungen bereitgestellt. Wenn Sie den Vorher/Nachher-Bewertungsunterschied sehen m√∂chten, k√∂nnen Sie sich die Bilder unten ansehen oder Ihre eigene Website unter ‚Äûhttps://www.ssllabs.com/ssltest/index.html‚Äú testen.\nVOR SSL Labs test NACH SSL Labs test Wenn Sie fragen, warum die Cipher-St√§rke nicht 100 % betr√§gt, ist es derzeit nicht m√∂glich, 100 % zu erreichen, da ‚ÄûTLS_AES_128_GCM_SHA256 (0x1301)‚Äú automatisch mit TLS 1.3 geliefert wird und hinzugef√ºgt wird, auch wenn wir es nicht m√∂chten. Wenn Sie denken, dass ich TLS 1.3 abschalte, dann wird es nicht kommen, dann sind Ihre Punkte leider woanders weg.\nEnde Dieser Artikel wurde zuvor unter https://teknolojirehberleri.xyz ver√∂ffentlicht. Um ein pers√∂nliches Portfolio zu erstellen, hatte ich das Bed√ºrfnis, es auf meiner pers√∂nlichen Website erneut zu ver√∂ffentlichen.\n","wordCount":"1899","inLanguage":"de","datePublished":"2021-10-12T00:00:00Z","dateModified":"2023-04-08T02:13:24+02:00","author":{"@type":"Person","name":"Wise"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wiseweb-works.github.io/blog/de/post/ssl-konfigurasyonu/"},"publisher":{"@type":"Organization","name":"Wise","logo":{"@type":"ImageObject","url":"https://wiseweb-works.github.io/blog/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wiseweb-works.github.io/blog/de/ accesskey=h title="Wise (Alt + H)">Wise</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://wiseweb-works.github.io/blog/ title=Turkish aria-label=:tr:>üáπüá∑</a></li><li><a href=https://wiseweb-works.github.io/blog/en/ title=English aria-label=:gb:>üá¨üáß</a></li></ul></div></div><ul id=menu><li><a href=https://wiseweb-works.github.io/de/blog/ title=Startzeite><span>Startzeite</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/post/ title=Bloggen><span>Bloggen</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/page/iletisim/ title=Kontakt><span>Kontakt</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/tags/ title=Stichworte><span>Stichworte</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/archives/ title=Archiv><span>Archiv</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/search/ title="Suche üîç"><span>Suche üîç</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Erh√∂hung der SSL-Sicherheit auf Linux-Servern</h1><div class=post-meta><span title='2021-10-12 00:00:00 +0000 UTC'>12 Oktober, 2021</span>&nbsp;¬∑&nbsp;<span title='2023-04-08 02:13:24 +0200 +0200'>(Updated 8 April, 2023)</span>&nbsp;¬∑&nbsp;9 Minuten&nbsp;¬∑&nbsp;1899 W√∂rter&nbsp;¬∑&nbsp;Wise&nbsp;|&nbsp;√úbersetzungen:<ul class=i18n_list><li><a href=https://wiseweb-works.github.io/blog/post/ssl-konfigurasyonu/>üáπüá∑</a></li><li><a href=https://wiseweb-works.github.io/blog/en/post/ssl-konfigurasyonu/>üá¨üáß</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/wiseweb-works/blog/tree/master/content/post/ssl-konfigurasyonu.de.md rel="noopener noreferrer" target=_blank>Bearbeiten</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Inhaltsverzeichnis</span></summary><div class=inner><ul><li><a href=#erh%c3%b6hung-der-ssl-sicherheit-auf-linux-servern aria-label="Erh√∂hung der SSL-Sicherheit auf Linux-Servern">Erh√∂hung der SSL-Sicherheit auf Linux-Servern</a><ul><li><a href=#einfache-konfiguration aria-label="Einfache Konfiguration">Einfache Konfiguration</a></li><li><a href=#empfohlene-einstellungen aria-label="Empfohlene Einstellungen">Empfohlene Einstellungen</a></li><li><a href=#erweiterte-einstellungen aria-label="Erweiterte Einstellungen">Erweiterte Einstellungen</a></li></ul></li><li><a href=#ende aria-label=Ende>Ende</a></li></ul></div></details></div><div class=post-content><h1 id=erh√∂hung-der-ssl-sicherheit-auf-linux-servern>Erh√∂hung der SSL-Sicherheit auf Linux-Servern<a hidden class=anchor aria-hidden=true href=#erh√∂hung-der-ssl-sicherheit-auf-linux-servern>#</a></h1><p>Wenn Sie heute eine Website und/oder App auf Ihrem aktuellen Server betreiben, werde ich √ºber die ben√∂tigte SSL-Verbindung und die damit verbundene openssl-Bibliothek sprechen. SSL (Secure Socket Layer) und TLS (Transport Layer Security) sind eine Form der Verbindung, die es Personen, die sich mit Ihrem Server verbinden m√∂chten, erm√∂glicht, sicher mit Ihrer Website zu kommunizieren. In der Vergangenheit gab es Versionen von SSL v1 bis v3, und w√§hrend Websites im Allgemeinen diese SSL-Versionen verwenden, wurde SSL jetzt von den Websites aufgegeben und durch das sicherere TLS ersetzt. Wir m√ºssen jedoch weiterhin das Wort &ldquo;ssl&rdquo; im erl√§uternden Teil und beim Bearbeiten der Konfigurationsdateien verwenden. Um Ihnen das mit ein wenig Humor zu sagen, haben Sie jemals dar√ºber nachgedacht, warum, wenn Sie die 64-Bit-Version einer Anwendung herunterladen m√∂chten, warum sie &ldquo;amd_64&rdquo; hei√üt? Da AMD als erster auf 64 Bit umgestiegen ist, blieb diese Namensgebung als Zeichen des Respekts und/oder der Gewohnheit bei amd_64. Auch wenn wir derzeit TLS verwenden, bleiben die Benennungs- und Konfigurationsparameter ‚ÄûSSL‚Äú.</p><p>Wie in unserem vorherigen Artikel werde ich den Prozess noch einmal unter drei verschiedenen √úberschriften als einfach, empfohlen und fortgeschritten erkl√§ren. Titelinhalte werden sukzessive nach pers√∂nlichen Anforderungen ber√ºcksichtigt. Obwohl die Titel miteinander verkn√ºpft sind, ist es kein Problem, sie in einem gew√ºnschten Stadium zu belassen.</p><h2 id=einfache-konfiguration>Einfache Konfiguration<a hidden class=anchor aria-hidden=true href=#einfache-konfiguration>#</a></h2><p>Zuerst m√ºssen wir die Updates √ºber die Konsole mit dem Paketmanager der Linux-Version installieren, in der wir uns befinden.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Ubuntu: sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt upgrade -y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Fedora: sudo yum update -y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Arch Linux: sudo pacman -Syyu
</span></span></code></pre></div><p>Nachdem die Updates installiert sind, beginnen wir mit der Konfiguration des nginx/Apache-Dienstes (das ist der Dienst, der es Ihnen erm√∂glicht, externe Webverbindungen zu empfangen) auf Ihrem Server (in meinem Fall Ubuntu). Die Datei, in der die Nginx-Diensteinstellungen gespeichert sind, befindet sich im Allgemeinen unter ‚Äû/etc/nginx/nginx.conf‚Äú. Wir m√ºssen es mit einem der von uns verwendeten Texteditoren √∂ffnen, jedoch mit einem Benutzer mit sudo-Rechten (dh Administratorrechten).</p><p>Wenn wir mit Ubuntu fortfahren (Single IP for Single Server Configuration)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/nginx/nginx.config <span style=color:#75715e># Befehl zum √ñffnen der Einstellungsdatei</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Zu erg√§nzende Titel (gegebenenfalls ge√§ndert)
</span></span><span style=display:flex><span>h√∂ren 443 ssl http2; &gt;&gt; Es dient dazu, die Anfragen zu erf√ºllen, die √ºber IPv4 mit dem http2-Protokoll an Port 443 kommen, und eine SSL-Verbindung aufzubauen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>h√∂ren [::]:443 ssl http2; &gt;&gt; Es dient dazu, die an Port 443 eingehenden Anfragen √ºber IPv6 mit http2-Protokoll zu erf√ºllen und eine SSL-Verbindung herzustellen. (Wenn Sie keine IPv6-Unterst√ºtzung haben oder sie nicht nativ unterst√ºtzen m√∂chten, k√∂nnen Sie sie entfernen.)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>server_name IHR SERVER_NAME; &gt;&gt; Wenn Sie Ihren Servernamen nicht als Standard festlegen m√∂chten, k√∂nnen Sie einen Servernamensindikator angeben. Dies dient nur dazu, die an Ihren Servernamen eingehenden Anforderungen zu erf√ºllen, anstatt alle eingehenden Anforderungen zu erf√ºllen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_certificate /etc/letsencrypt/live/YOURSERVER_NAME/fullchain.pem; &gt;&gt; Wenn Sie Let&#39;s Encrypt f√ºr kostenloses SSL verwenden, ist dies der Standardspeicherort f√ºr das Zertifikat. Andernfalls ersetzen Sie es durch Ihre eigene Zertifikatsdatei.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_certificate_key /etc/letsencrypt/live/YOURSERVER_NAME/privkey.pem; &gt;&gt; Wenn Sie Let&#39;s Encrypt f√ºr kostenloses SSL verwenden, ist dies der Standardspeicherort f√ºr private Schl√ºssel. Ersetzen Sie es andernfalls durch Ihren eigenen Speicherort der privaten Schl√ºsseldatei.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_protocols TLSv1.3 TLSv1.2; &gt;&gt; Erforderlicher Befehl, um nur die neuesten und zuverl√§ssigsten TLS-Protokolle zu akzeptieren.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_prefer_server_ciphers on; &gt;&gt; W√§hrend des Gespr√§chs zwischen dem Server und dem Client, sch√§tze ich, dass sie √ºber &#34;ok, mal sehen, was wir haben&#34; gesprochen haben. Kurz gesagt, wenn es f√ºr Sie funktioniert, wenn es f√ºr Sie nicht funktioniert, rede ich nicht.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_ecdh_curve secp521r1:secp384r1; &gt;&gt;¬†Es ist der Befehl, der uns sagt, welche Kurven wir bevorzugen, wenn wir Ekliptikkurven verwenden m√ºssen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_chiffren DH-RSA-AES256-SHA:DH-RSA-AES256-SHA256:DHE-RSA-AES256-GCM-SHA384:DH-RSA-AES256-GCM-SHA384:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_PODSADHESA:25_SHA256 -ECDSA-AES256 -RSA-AES256-SHA:AECDH-AES256-SHA:ECDHE-ECDSA-AES256-SHA384:ECDH-ECDSA-AES256-SHA384:ECDH-RSA-AES256-SHA384:ECDHE-ECDSA-AES256 -GCM-SHA384:ECDH-ECDSA -AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDH-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-CCM:DHE-RSA-AES256-CCM8 :ECDHE-ECDSA-AES256-CCM :ECDHE-ECDSA-AES256-CCM8:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-CHACHA20-POLY1305:DHE-RSA-CHACHA20-POLY1305; &gt;&gt; Der Code, der den Server anweist, nur die SSL-Algorithmen zu verwenden, die ich am zuverl√§ssigsten finde.
</span></span></code></pre></div><p>Alle Chiffren f√ºr diejenigen, die einzeln recherchieren wollen: &ldquo;<a href=https://testssl.sh/openssl-iana.mapping.html%22>https://testssl.sh/openssl-iana.mapping.html"</a></p><p>Wenn Sie nach dem Vornehmen der Einstellungen √ºberpr√ºfen m√∂chten: Sie k√∂nnen den Befehl ‚Äûsudo nginx -t‚Äú verwenden. Wenn Sie keine Fehlermeldung sehen, k√∂nnen Sie die Einstellungen √ºbernehmen und den Dienst mit dem Befehl &ldquo;sudo systemctl restart nginx&rdquo; oder &ldquo;sudo service nginx restart&rdquo; neu starten.</p><h2 id=empfohlene-einstellungen>Empfohlene Einstellungen<a hidden class=anchor aria-hidden=true href=#empfohlene-einstellungen>#</a></h2><p>Zus√§tzlich zu den vorherigen Einstellungen werden wir einige Leistungsverbesserungen sowie einige zus√§tzliche Konfigurationen vornehmen, die es Ihrer Website erm√∂glichen, auf SSL-Testseiten einen h√∂heren Rang einzunehmen. Danach werden wir einige Verbesserungen vornehmen, um sicherzustellen, dass einige Header und Ressourcen Ihrer Website nicht von Websites Dritter ausgenutzt werden, was f√ºr den Benutzerzugriff Ihrer Website von Vorteil ist.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Zu erg√§nzende Titel (gegebenenfalls ge√§ndert)
</span></span><span style=display:flex><span>ssl_session_cache freigegeben:TLS:2m; &gt;&gt; Code, der angibt, wie TLS-Verbindungen auf Worker (nginx-Worker) verteilt werden und wie lange die Verbindungen geteilt werden
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_buffer_size 4k; &gt;&gt;¬†Der Code, der angibt, in wie viele Container die Pakete aufgeteilt werden, wenn auf SSL-Anfragen geantwortet und Pakete nach dem Handshake gesendet werden. Ein niedrigerer Wert bedeutet, dass mehr Pakete gesendet werden, aber weniger Overhead.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_stapling an; &gt;&gt; Aktiviert die OCSP-Heftfunktion
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssl_stapling_verify an; Aktiviert die M√∂glichkeit, das OCSP-Heften zu √ºberpr√ºfen, einschlie√ülich auf √ºbergeordneten und Stammservern.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resolver 1.1.1.1 1.0.0.1 2606:4700:4700::1111 2606:4700:4700::1001; &gt;&gt; Aktiviert die OCSP-Stapling-√úberpr√ºfung mit Cloudlfare. Wenn Sie IPv6 nicht verwenden oder es nicht nativ unterst√ºtzen m√∂chten, k√∂nnen Sie die IPv6-Adressen l√∂schen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header X-Content-Type-Options &#34;nosniff&#34; immer; &gt;&gt; Es ist der Header-Wert, der Browser daran hindert, MIME-Inhalte zu verstehen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header X-Xss-Protection &#34;1; mode=block&#34; immer; &gt;&gt; Es handelt sich um einen Titel, der die Schwachstelle bis zu einem gewissen Grad verhindert, indem er Benutzern erm√∂glicht, einen wei√üen Bildschirm in einer m√∂glichen XSS-Schwachstelle zu sehen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header X-Frame-Optionen &#34;SAMEORIGIN&#34; immer; &gt;&gt;¬†Es verhindert in irgendeiner Weise, dass eine Seite Ihres Servers auf einer anderen Seite angezeigt und/oder nacheinander mit einem i-Frame-Code usw. ver√∂ffentlicht wird. Nur Sie k√∂nnen ein Fenster von Ihrer eigenen Site innerhalb Ihrer eigenen Site ver√∂ffentlichen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header Referrer-Policy &#34;no-referrer-when-downgrade&#34; immer; &gt;&gt; Wenn Sie auf eine Website mit geringeren Sicherheitsma√ünahmen umleiten oder verlinken, wird nicht automatisch ein Referrer-Header hinzugef√ºgt und es ist nicht klar, dass der Datenverkehr von Ihrer Website kommt.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header Content-Security-Policy &#34;default-src &#39;self&#39; https: data: &#39;unsafe-inline&#39; &#39;unsafe-eval&#39;;&#34; immer; &gt;&gt; Der Titel, der die Bedingungen regelt, unter denen Anfragen, die Sie und andere Benutzer von au√üen anrufen k√∂nnen, aufgerufen werden k√∂nnen. Standardm√§√üig vertraue ich einigen Quellen, die √ºber https kommen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header Berechtigungsrichtlinie &#34;Kamera=(), Vollbild=(self), Geolocation=(), Mikrofon=(), Zahlung=()&#34; immer; &gt;&gt; Es verhindert das Sammeln von Informationen auf Ihrer Website mit verschiedenen Arten von Vergiftung (Cache-Vergiftung oder js-Vergiftung), indem es angibt, welche Berechtigungen Sie f√ºr den Browser w√ºnschen oder welche Sie √ºberhaupt nicht ben√∂tigen.
</span></span></code></pre></div><p>Wenn Sie nach dem Vornehmen der Einstellungen √ºberpr√ºfen m√∂chten: Sie k√∂nnen den Befehl ‚Äûsudo nginx -t‚Äú verwenden. Wenn Sie keine Fehlermeldung sehen, k√∂nnen Sie die Einstellungen √ºbernehmen und den Dienst mit dem Befehl ‚Äûsudo systemctl restart nginx‚Äú oder ‚Äûsudo service nginx restart‚Äú neu starten.</p><h2 id=erweiterte-einstellungen>Erweiterte Einstellungen<a hidden class=anchor aria-hidden=true href=#erweiterte-einstellungen>#</a></h2><p>Zun√§chst f√ºgen wir Ihrer Website einen Header hinzu, um anzuzeigen, dass sie nur √ºber SSL verbunden werden soll. Auf diese Weise k√∂nnen diejenigen, die Ihre Website zuvor aufgerufen haben, und diejenigen, die diesen Titel bereits in ihrem Browser haben, nicht ohne SSL auf Ihre Website zugreifen, selbst wenn sie dies w√ºnschen. Dann werden wir die SSL-Zertifikate heften, die in HTTP-Sitzungen verwendet werden sollen, und wir werden im Voraus angeben, welche Zertifikate neben der vorherigen Methode verbunden werden m√ºssen. Selbst wenn Sie ein autorisierter Top-Zertifikatsmanager oder Root-Manager sind, k√∂nnen diese auf diese Weise keine Verbindung zu Ihrer Site mit dem in Ihrem Namen signierten Zertifikat herstellen. E-Tugra-Stammzertifikatanbieter mit Wohnsitz in der T√ºrkei zu diesem Zeitpunkt unterzeichnete ein Zertifikat f√ºr *.google.com. Wenn Sie ein wenig recherchieren, werden Sie herausfinden, wann es passiert ist und warum (wie schlimm es sein k√∂nnte). Beginnen wir nun mit dem letzten Konfigurationsteil.</p><p>Stellen Sie zun√§chst sicher, dass Ihre Website problemlos √ºber SSL aufgerufen werden kann. F√ºgen Sie dann gem√§√ü Ihrer Anfrage einen der folgenden Header zur nginx-Konfigurationsdatei hinzu. Aber Achtung, nur einer.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>add_header Strict-Transport-Security &#34;max-age=2592000;&#34; immer; &gt;&gt; Header, der besagt, dass auf Ihre Website 30 Tage lang nur √ºber HTTPS zugegriffen werden kann. (ohne Subdomains)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header Strict-Transport-Security &#34;max-age=2592000; includeSubDomains;&#34; immer; &gt;&gt; Header, der besagt, dass Ihre Website 30 Tage lang nur √ºber HTTPS aufgerufen werden kann, einschlie√ülich Subdomains.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header Strict-Transport-Security &#34;max-age=31536000; includeSubDomains;&#34; immer; &gt;&gt; Header, der besagt, dass auf Ihre Website 1 Jahr lang nur √ºber HTTPS zugegriffen werden kann, einschlie√ülich Subdomains.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header Strict-Transport-Security &#34;max-age=31536000; includeSubDomains; preload&#34; immer; &gt;&gt; Der Header, der angibt, dass auf Ihre Website 1 Jahr lang nur √ºber HTTPS zugegriffen werden kann, einschlie√ülich Subdomains, und dass dieser Header von Browsern zwischengespeichert wird. Dar√ºber hinaus werden neue Browser diesen Titel erkennen, auch wenn sie Ihre Website noch nie zuvor besucht haben.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_header Strict-Transport-Security &#34;max-age=0; includeSubDomains&#34;; &gt;&gt; Titel f√ºr das vollst√§ndige Entfernen der HSTS-Funktion und der Mitgliedschaft in der Preload-Liste.
</span></span></code></pre></div><p>Nachdem Sie den oben erw√§hnten Header hinzugef√ºgt haben, ist es jetzt an der Zeit, den Hash des verwendeten SSL-Zertifikats an die HTTP-Sitzung anzuheften. In diesem Stadium m√ºssen wir einen Hash Ihres aktuellen Zertifikats extrahieren, das Zertifikat der obersten Unterzeichnungsstelle hashen und diesen Hash-Prozess fortsetzen, bis wir die gesamte Kette einschlie√ülich der obersten Stammzertifizierungsstelle abgeschlossen haben. Aus diesem Grund f√ºhren wir die folgenden Befehle jeweils mit einem Root-Benutzer oder einem Benutzer mit sudo-Berechtigung aus. (Der Vortrag wurde speziell f√ºr Let&rsquo;s Encrypt gemacht.)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>1<span style=color:#f92672>]</span> cat /etc/letsencrypt/live/IHR SERVERNAME/cert.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 &gt;&gt; Dieser Befehl extrahiert den Hash des Zertifikats Ihrer Website. Kopieren Sie den Ergebniswert irgendwo hin.
</span></span><span style=display:flex><span>2<span style=color:#f92672>]</span> curl -s https://letsencrypt.org/certs/lets-encrypt-x4-cross-signed.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 &gt;&gt; Dieser Befehl extrahiert eines der mehrfach signierten Zertifikate von letsencrypt.
</span></span><span style=display:flex><span>3<span style=color:#f92672>]</span> curl -s https://letsencrypt.org/certs/lets-encrypt-x3-cross-signed.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 &gt;&gt; Dieser Befehl extrahiert eines der mehrfach signierten Zertifikate von letsencrypt.
</span></span><span style=display:flex><span>4<span style=color:#f92672>]</span> curl -s https://letsencrypt.org/certs/isrgrootx1.pem | openssl x509 -pubkey | openssl pkey -pubin -outform der | openssl dgst -sha256 -bin√§r | base64 &gt;&gt; Dieser Befehl extrahiert das Stammzertifikat <span style=color:#f92672>(</span>oberstes Zertifikat<span style=color:#f92672>)</span> von letsencrypt.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Der folgende Wert wird der Nginx-Konfigurationsdatei hinzugef√ºgt
</span></span><span style=display:flex><span>5<span style=color:#f92672>]</span> add_header Public-Key-Pins <span style=color:#e6db74>&#39;pin-sha256=&#34;ERSTE_ERGEBNIS&#34;; Pin-sha256 = &#34;ZWEITES_ERGEBNIS&#34;; pin-sha256=&#34;TIP_END&#34;; pin-sha256=&#34;FINISH_RESULT&#34;; Maximalalter = 2592000; includeSubDomains&#39;</span> immer; &gt;&gt; Sie k√∂nnen sich nur mit dem angegebenen Zertifikat <span style=color:#ae81ff>30</span> Tage lang mit Ihrer Website verbinden. Sie k√∂nnen den max-age-Wert optional erh√∂hen. Bevor die G√ºltigkeitsdauer Ihres Zertifikats weniger als <span style=color:#ae81ff>30</span> Tage betr√§gt, m√ºssen Sie die Kopfzeile deaktivieren oder ein neues Zertifikat anfordern und es als f√ºnften Wert hinzuf√ºgen.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Als Bonus m√∂chte ich Ihnen einen weiteren Befehl zeigen, dessen Ausf√ºhrung lange dauert, aber sehr n√ºtzlich ist.
</span></span><span style=display:flex><span>6<span style=color:#f92672>]</span> openssl dhparam -out /etc/nginx/dhparams.pem <span style=color:#ae81ff>4096</span> &gt;&gt; Die Ausf√ºhrung dieses Befehls kann zwischen <span style=color:#ae81ff>15</span> Minuten und <span style=color:#ae81ff>1</span> Stunde dauern.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Nachdem der Vorgang abgeschlossen ist, m√ºssen Sie den folgenden Befehl zur nginx-Konfigurationsdatei hinzuf√ºgen.
</span></span><span style=display:flex><span>ssl_dhparam /etc/nginx/dhparam.pem; &gt;&gt; Der Befehl zum √Ñndern der w√§hrend des Diffie-Hellman-Schl√ºsselaustauschalgorithmus zu verwendenden Werte mit den gerade erstellten geheimen Werten, abgesehen von den Standardwerten.
</span></span></code></pre></div><p>Nachdem Sie die Einstellungen vorgenommen haben, √ºbernehmen Sie die Einstellungen mit dem Befehl ‚Äûsudo nginx -t‚Äú und dann, wenn Sie keine Fehlermeldung sehen, ‚Äûsudo service nginx restart‚Äú und starten Sie den Dienst neu. Nun wird die Verbindung mit der von Ihnen festgelegten Konfiguration und Bedingungen bereitgestellt. Wenn Sie den Vorher/Nachher-Bewertungsunterschied sehen m√∂chten, k√∂nnen Sie sich die Bilder unten ansehen oder Ihre eigene Website unter ‚Äû<a href=https://www.ssllabs.com/ssltest/index.html%E2%80%9C>https://www.ssllabs.com/ssltest/index.html‚Äú</a> testen.</p><p>VOR
<picture><source srcset=/images/ssl-anlatim/ssl-ilk-hali-ssllabs.avif type=image/avif><source srcset=/images/ssl-anlatim/ssl-ilk-hali-ssllabs.webp type=image/webp><img src=/images/ssl-anlatim/ssl-ilk-hali-ssllabs.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>SSL Labs test</small></b></center></caption></picture></p><p>NACH
<picture><source srcset=/images/ssl-anlatim/ssl-son-hali-ssllabs.avif type=image/avif><source srcset=/images/ssl-anlatim/ssl-son-hali-ssllabs.webp type=image/webp><img src=/images/ssl-anlatim/ssl-son-hali-ssllabs.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>SSL Labs test</small></b></center></caption></picture></p><p>Wenn Sie fragen, warum die Cipher-St√§rke nicht 100 % betr√§gt, ist es derzeit nicht m√∂glich, 100 % zu erreichen, da ‚ÄûTLS_AES_128_GCM_SHA256 (0x1301)‚Äú automatisch mit TLS 1.3 geliefert wird und hinzugef√ºgt wird, auch wenn wir es nicht m√∂chten. Wenn Sie denken, dass ich TLS 1.3 abschalte, dann wird es nicht kommen, dann sind Ihre Punkte leider woanders weg.</p><h1 id=ende>Ende<a hidden class=anchor aria-hidden=true href=#ende>#</a></h1><p>Dieser Artikel wurde zuvor unter <a href=https://teknolojirehberleri.xyz>https://teknolojirehberleri.xyz</a> ver√∂ffentlicht. Um ein pers√∂nliches Portfolio zu erstellen, hatte ich das Bed√ºrfnis, es auf meiner pers√∂nlichen Website erneut zu ver√∂ffentlichen.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wiseweb-works.github.io/blog/de/tags/linux/>linux</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/ssl/>ssl</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/sicherheit/>sicherheit</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/audit/>audit</a></li></ul><nav class=paginav><a class=prev href=https://wiseweb-works.github.io/blog/de/post/ecc-ssl-sertifikasi/><span class=title>¬´ Vorherige</span><br><span>Generieren eines ECC-SSL-Zertifikats auf einem Linux-Server</span></a>
<a class=next href=https://wiseweb-works.github.io/blog/de/post/ssh-guvenligi/><span class=title>N√§chste ¬ª</span><br><span>Erh√∂hung der SSH-Sicherheit auf Linux-Servern</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://wiseweb-works.github.io/blog/de/>Wise</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Kopieren";function s(){t.innerHTML="Kopiert!",setTimeout(()=>{t.innerHTML="Kopieren"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
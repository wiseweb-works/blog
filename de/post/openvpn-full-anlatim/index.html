<!doctype html><html lang=de dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Eingehender OpenVPN-Test | Wise</title><meta name=keywords content="linux,ssl,security,ecc,elliptic curve,openvpn,tls,aes"><meta name=description content="Einf√ºhrung und Zusammenfassung Heute werden wir OpenVPN, meiner Meinung nach eine der wichtigsten Software der letzten Zeit, ausf√ºhrlich √ºberpr√ºfen. In diesem Test werden wir zuerst dar√ºber sprechen, wof√ºr OpenVPN verwendet wird. Dann untersuchen wir, was wir zum Ausf√ºhren des Programms ben√∂tigen und was vor dem ersten Ausf√ºhren zu tun ist. Abschlie√üend werde ich versuchen zu erkl√§ren, was vom ersten Moment des Verbindungsaufbaus bis zum letzten Schritt, wenn die Daten entschl√ºsselt werden, im Hintergrund vor sich geht."><meta name=author content="Wise"><link rel=canonical href=https://wiseweb-works.github.io/blog/de/post/openvpn-full-anlatim/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.3da8f760c1219bf0b204073b46d591a809f88d454cd18abfeec1ca847f7b86a1.css integrity="sha256-Paj3YMEhm/CyBAc7RtWRqAn4jUVM0Yq/7sHKhH97hqE=" rel="preload stylesheet" as=style><link rel=icon href=https://wiseweb-works.github.io/blog/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wiseweb-works.github.io/blog/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wiseweb-works.github.io/blog/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://wiseweb-works.github.io/blog/favicons/apple-touch-icon.png><link rel=mask-icon href=https://wiseweb-works.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=tr href=https://wiseweb-works.github.io/blog/post/openvpn-full-anlatim/><link rel=alternate hreflang=en href=https://wiseweb-works.github.io/blog/en/post/openvpn-full-anlatim/><link rel=alternate hreflang=de href=https://wiseweb-works.github.io/blog/de/post/openvpn-full-anlatim/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Eingehender OpenVPN-Test"><meta property="og:description" content="Einf√ºhrung und Zusammenfassung Heute werden wir OpenVPN, meiner Meinung nach eine der wichtigsten Software der letzten Zeit, ausf√ºhrlich √ºberpr√ºfen. In diesem Test werden wir zuerst dar√ºber sprechen, wof√ºr OpenVPN verwendet wird. Dann untersuchen wir, was wir zum Ausf√ºhren des Programms ben√∂tigen und was vor dem ersten Ausf√ºhren zu tun ist. Abschlie√üend werde ich versuchen zu erkl√§ren, was vom ersten Moment des Verbindungsaufbaus bis zum letzten Schritt, wenn die Daten entschl√ºsselt werden, im Hintergrund vor sich geht."><meta property="og:type" content="article"><meta property="og:url" content="https://wiseweb-works.github.io/blog/de/post/openvpn-full-anlatim/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-27T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-08T02:13:24+02:00"><meta property="og:site_name" content="Wise Web Works"><meta name=twitter:card content="summary"><meta name=twitter:title content="Eingehender OpenVPN-Test"><meta name=twitter:description content="Einf√ºhrung und Zusammenfassung Heute werden wir OpenVPN, meiner Meinung nach eine der wichtigsten Software der letzten Zeit, ausf√ºhrlich √ºberpr√ºfen. In diesem Test werden wir zuerst dar√ºber sprechen, wof√ºr OpenVPN verwendet wird. Dann untersuchen wir, was wir zum Ausf√ºhren des Programms ben√∂tigen und was vor dem ersten Ausf√ºhren zu tun ist. Abschlie√üend werde ich versuchen zu erkl√§ren, was vom ersten Moment des Verbindungsaufbaus bis zum letzten Schritt, wenn die Daten entschl√ºsselt werden, im Hintergrund vor sich geht."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wiseweb-works.github.io/blog/de/post/"},{"@type":"ListItem","position":2,"name":"Eingehender OpenVPN-Test","item":"https://wiseweb-works.github.io/blog/de/post/openvpn-full-anlatim/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Eingehender OpenVPN-Test","name":"Eingehender OpenVPN-Test","description":"Einf√ºhrung und Zusammenfassung Heute werden wir OpenVPN, meiner Meinung nach eine der wichtigsten Software der letzten Zeit, ausf√ºhrlich √ºberpr√ºfen. In diesem Test werden wir zuerst dar√ºber sprechen, wof√ºr OpenVPN verwendet wird. Dann untersuchen wir, was wir zum Ausf√ºhren des Programms ben√∂tigen und was vor dem ersten Ausf√ºhren zu tun ist. Abschlie√üend werde ich versuchen zu erkl√§ren, was vom ersten Moment des Verbindungsaufbaus bis zum letzten Schritt, wenn die Daten entschl√ºsselt werden, im Hintergrund vor sich geht.","keywords":["linux","ssl","security","ecc","elliptic curve","openvpn","tls","aes"],"articleBody":"Einf√ºhrung und Zusammenfassung Heute werden wir OpenVPN, meiner Meinung nach eine der wichtigsten Software der letzten Zeit, ausf√ºhrlich √ºberpr√ºfen. In diesem Test werden wir zuerst dar√ºber sprechen, wof√ºr OpenVPN verwendet wird. Dann untersuchen wir, was wir zum Ausf√ºhren des Programms ben√∂tigen und was vor dem ersten Ausf√ºhren zu tun ist. Abschlie√üend werde ich versuchen zu erkl√§ren, was vom ersten Moment des Verbindungsaufbaus bis zum letzten Schritt, wenn die Daten entschl√ºsselt werden, im Hintergrund vor sich geht. Daher sch√§tze ich, dass unser Artikel aus 3 Teilen und gegebenenfalls einem Frage-Antwort-Abschnitt bestehen wird. Jetzt schnallen wir uns an und machen einen Ausflug in die tiefe und d√ºstere Welt des Internets.\nWas ist OpenVPN und wof√ºr wird es verwendet? Heutzutage gibt es fast kein Gesch√§ft, das nicht online erledigt werden kann. Sogar unsere Arbeit, die normalerweise nicht online ist, hat sich aufgrund der Pandemie und der neuen Normalit√§t auf die Arbeit von zu Hause aus entwickelt. Es gab jedoch gro√üe Probleme, sowohl weil es eine Arbeitsmethode ist, an die wir nicht gew√∂hnt sind, als auch weil unsere Leute nicht sehr gut mit Technologie umgehen k√∂nnen. Bevor klar wurde, dass die Menschen sich von ihren Heimcomputern mit ihren B√ºrocomputern verbinden mussten, kamen einige Unternehmen auf frivole Ideen, wie zum Beispiel, B√ºrocomputer zu den H√§usern der Mitarbeiter zu schicken. Sie haben sehr gut verstanden, wie falsch das war, aus dem Feedback, das sie in kurzer Zeit erhalten haben. Kurz gesagt, es wurde endlich akzeptiert, dass elektronische Ger√§te im B√ºro bleiben und irgendwie eine sichere und nachhaltige Verbindung aus der Ferne hergestellt werden sollte. Nat√ºrlich befanden sich Institutionen auch schon fr√ºher in solchen N√∂ten, aber eine solche Gro√üsituation kam damals nicht in Frage. Vor der Pandemie wurden verschiedene Protokolle wie PPTP, L2TP, IPSec, IKev2, SSTP und schlie√ülich OpenVPN verwendet. Dies sind normalerweise Abk√ºrzungen f√ºr bestimmte lange und ausgefallene W√∂rter, und ihre grundlegende Logik besteht darin, zwei oder mehr Ger√§te zu verbinden und sie so zu verhalten, als ob sie sich im selben Netzwerk befinden. Ich werde nicht viel sagen, da Protokolle vor OpenVPN gewisse Schw√§chen, Langsamkeit und technische Schwierigkeiten bei der Implementierung mit sich brachten. OpenVPN ist der Name des Protokolls und Programms, das es mindestens 2 Ger√§ten in der Rolle von Server und Client erm√∂glicht, sich miteinander zu verbinden, und zwar auf eine Weise, die Industriestandards entspricht. Ich verwende ein Remote-Desktop-Programm. Ich h√∂re Sie anscheinend sagen, was die Notwendigkeit daf√ºr ist. Leider m√ºssen er und alle anderen Programme wie er grunds√§tzlich dieses Protokoll verwenden. Wenn Sie das Schildsymbol oder die Verbindungsdetails in TeamViewer, einem der bekanntesten, dr√ºcken, k√∂nnen Sie das OpenVPN-Protokoll sehen.\nWas brauchen wir, um eine OpenVPN-Verbindung aufzubauen? Zun√§chst muss OpenVPN sowohl auf der Server- als auch auf der Clientseite (dem zu verbindenden Ger√§t) installiert werden. Dann sollte eine Einstellungsdatei (Konfigurationsdatei) bearbeitet werden, die die Bedingungen zeigt, unter denen die Ger√§te kommunizieren. Das Hauptereignis ist, dass diese Konfigurationsdatei vom Client generiert und verwendet wird. Diese Konfigurationsdatei ist unterteilt in server_config, die vom Server verwendet wird, und client_config, die vom Client verwendet wird.\nDie vom Server verwaltete Einstellungsdatei enth√§lt die folgenden Eintr√§ge Port 1194 gibt an, welcher Port eine Verbindungsanfrage zum Herstellen der OpenVPN-Verbindung erh√§lt. proto tcp Verbindung √ºber TCP oder UDP m√∂glich. Einstellungseintrag zur Auswahl eingetragen. dev tun TAP- oder TUN-Schnittstelle kann verwendet werden. Dies sind virtuelle Schnittstellen. TAP-Schicht 2 stellt eine Verbindung her, w√§hrend TUN-Schicht 3 eine Verbindung herstellt. user none Erm√∂glicht das Verbinden von Benutzern mit einem nicht autorisierten Benutzer auf dem Server. group $NOGROUP Erm√∂glicht es, sich verbindende Benutzer mit einer nicht autorisierten Gruppe auf dem Server als Gruppe zu verkn√ºpfen. persist-key Eine Autorisierungseinstellung f√ºr die Erstellung und den Neustart der virtuellen Schnittstelle persist-tun Ebenfalls eine Berechtigungseinstellung f√ºr die Erstellung und den Neustart der virtuellen Schnittstelle keepalive 10 120 Eine Einstellung daf√ºr, wie viele Verbindungen aktiv gehalten werden und wie lange die aktive Verbindung beendet wird, wenn keine Kommunikation hergestellt wird. ifconfig-pool-persist ipp.txt Eine Einstellung, um die von OpenVPN an Clients im virtuellen Netzwerk vergebenen IP-Adressen beizubehalten und ihnen dieselben Adressen zuzuweisen, wenn sie sich wieder verbinden push \"dhcp-option DNS 1.1.1.1\" Eine DNS-Einstellung, die der Server beim Verlassen des Netzwerks verwenden soll compress Der Teil, in dem Komprimierungsoptionen festgelegt werden dh none Eine Einstellung zum Ein- oder Ausschalten von Diffie-Hellman ecdh-curve Wenn Sie Elliptic Curve Diffie-Hellman verwenden, wird die Einstellung angepasst, neben der die Kurve ausgew√§hlt werden muss dh dh.pem-Einstellung, die den Speicherort der PEM-Datei angibt, die Sie vorher erstellen m√ºssen, wenn Sie Diffie-Hellman verwenden tls-crypt tls-crypt.key Erforderliche Einstellung, um die TLS-Schicht noch vor dem Pre-Shared Master zu verschl√ºsseln tls-auth tls-auth.key 0Einstellung, die es erm√∂glicht, Parteien √ºber die Verschl√ºsselung hinaus in der Pre-Handshake-Phase der TLS-Schicht zu authentifizieren crl-verify crl.pem Einstellung um zu pr√ºfen, ob die generierten Zertifikate √ºber die CRL-Liste widerrufen werden oder nicht ca ca.crt Eine Einstellung, die den Speicherort des Zertifikats der Zertifizierungsstelle des generierten Zertifikats meldet cert $SERVER_NAME.crt Eine Einstellung, die den Speicherort des Zertifikats des Servers angibt key $SERVER_NAME.key Eine Einstellung, die den Speicherort des erforderlichen asymmetrischen geheimen Schl√ºssels neben dem Zertifikat des Servers angibt auth $HMAC_ALG Eine Einstellung, die beschreibt, welcher Hash-Algorithmus f√ºr den Datenkanal verwendet werden soll, und ggf. tls-auth cipher $CIPHER Eine Einstellung, die angibt, welcher Verschl√ºsselungsalgorithmus f√ºr den Datenkanal verwendet werden soll ncp-ciphers $CIPHER Eine Einstellung, die angibt, welche Verschl√ºsselungsalgorithmen der Server verwenden kann tls-server Eine Einstellung, die den Server anweist, den TLS-Kanal zu verwenden Eine Einstellung tls-version-min 1.2 meldet die niedrigste Version, die auf dem TLS-Kanal verwendet werden soll tls-cipher $CC_CIPHER Die Verschl√ºsselung wird auch auf der TLS-Schicht verwendet, mit Ausnahme des Datenkanals, der die Einstellung ist, die die Verschl√ºsselung des Steuerkanals deklariert client-config-dir /etc/openvpn/ccd Einstellung, die angibt, wo Client-Einstellungsdateien aufbewahrt werden status /var/log/openvpn/status.log Einstellung, die angibt, wo Statusberichte geschrieben und wo Protokolldateien aufbewahrt werden verb 3 Diese Einstellung, die die Abk√ºrzung des Wortes Verbose ist, ist die Einstellung, wie detailliert der Statusbericht gegeben werden soll. Die clientseitige Einstellungsdatei enth√§lt die folgenden Eintr√§ge client gibt an, dass sich das Ger√§t in der Client-Rolle befindet proto tcp-client meldet TCP als Protokoll remote $IP $PORT Der Teil, in dem die IP-Adresse und die Portnummer des/der zu verbindenden Server(s) festgelegt werden dev tun legt fest, welche der TUN/TAP-Schnittstellen verwendet werden sollen resolve-retry infinite Wir sagen Ihnen, wie lange Sie warten m√ºssen, wenn sich die Adressaufl√∂sung aufgrund von IP oder DNS verz√∂gert nobind-Einstellung, um keine Verbindung zu einer Adresse im lokalen Netzwerk herzustellen persist-key Erm√∂glicht das Lesen von Schl√ºsseldateien ohne zus√§tzliche Autorisierung beim Neustart persist-tun Es erm√∂glicht auch, dass die TUN/TAP-Schnittstelle beim Neustart ohne Autorisierung aufgeweckt wird remote-cert-tls server √úberpr√ºft das Zertifikat des verbundenen Servers auf TLS-Ebene verify-x509-name $SERVER_NAME name Befehl, der den Namen im Zertifikat angibt, zu dem der Server zur√ºckkehren wird, und wie der Name des Servers lauten soll auth $HMAC_ALG Befehl, der angibt, welcher Algorithmus f√ºr die Validierung verwendet werden soll auth-nocache Speichert das f√ºr die Anmeldung erforderliche Passwort nicht cipher $CIPHER Befehl zur Auswahl des f√ºr die Verschl√ºsselung zu verwendenden Algorithmus tls-client aktiviert TLS w√§hrend der TLS-Kommunikation und √ºbernimmt die Client-Rolle tls-version-min 1.2 Legt die niedrigste TLS-Version fest tls-cipher $CC_CIPHER w√§hlt den Verschl√ºsselungsalgorithmus aus, der im TLS-Steuerkanal verwendet werden soll ignore-unknown-option block-outside-dns Verhindert, dass unbekannte DNS-Adressen verwendet werden setenv opt block-outside-dns blockiert DNS-Leaks f√ºr Windows 10 Verb 3 Bestimmt den Grad der Berichterstattung compress Hier werden die Einstellungen des Komprimierungsalgorithmus gemeldet \"/etc/openvpn/easy-rsa/pki/ca.crt\" Hartcodierte Einbettung der erwarteten Server-Zertifizierungsstellendatei \"/etc/openvpn/easy-rsa/pki/issued/$CLIENT.crt\" Hartcodierte Einbettung der Client-Zertifikatsdatei \"/etc/openvpn/easy-rsa/pki/private/$CLIENT.key\" Hartcodierte Einbettung des asymmetrischen geheimen Schl√ºssels des Clients \"/etc/openvpn/tls-crypt.key\" Angabe der Schl√ºsseldatei f√ºr TLS-Crypt \"/etc/openvpn/tls-auth.key\" Angabe der Schl√ºsseldatei f√ºr die TLS-Authentifizierung key-direction 1 weist Client und Server Rollen f√ºr die TLS-Layer-Verschl√ºsselung zu (0 und 1) Eine ausf√ºhrliche Dokumentation dieser Einstellungen und mehr finden Sie auf der Webseite OpenVPN.\nWas passiert beim Aufbau einer OpenVPN-Verbindung? Jedes Mal, wenn ich mich mit OpenVPN verbinde, f√ºhle ich mich, als w√ºrde R2-D2 ihre Pl√§ne der Sternenflotte entf√ºhren. Die Leute wollen sich nicht immer einer genauen Pr√ºfung unterziehen und bitten vielleicht jemanden, ihnen zu erkl√§ren, was und wie. In meiner Absicht, diesen Artikel zu schreiben, habe ich mir diese Frage tats√§chlich gestellt und mich sehr bem√ºht, die Antwort zu bekommen. Ich m√∂chte nicht, dass Sie sich so viel M√ºhe geben, aber ich kann nicht sagen, dass Sie es sofort hochladen sollen, denken Sie nicht an den Rest, es ist mein Job. Wie eingangs versprochen, werde ich Ihnen diesen Vorgang ausf√ºhrlich erl√§utern und Ihnen die Entscheidung √ºberlassen. So funktioniert der Prozess in einer OpenVPN-Verbindung, Vor- und Nachteile (wie ich es bisher herausfinden konnte). Sie bauen zun√§chst eine TCP/UDP-Verbindung auf. Sie f√ºhren einen Prozess wie jede Anwendung aus, die TCP verwendet, und wechseln dann zur TLS-Schicht. Sie f√ºhren einen Handshake und eine Authentifizierung auf der TLS-Schicht durch. Diese Schicht wird auch Steuerkanal genannt. Dann wird eine bestimmte Kommunikation festgelegt und der Datenkanal weitergegeben. Der Prozess der Ver- und Entschl√ºsselung der diesmal zu versendenden Datenpakete im Daten- bzw. Datenkanal beginnt. Dazu sprechen Ger√§te miteinander und Daten werden unter bestimmten gemeinsamen Bedingungen gesendet. Kurz gesagt, am Ende des von mir so beschriebenen Prozesses endet die von uns bei 0 begonnene Kommunikation mit dem sicheren und erw√ºnschten Datenzugriff auf uns, oder es werden erneut Anfragen gesendet, diesmal auf umgekehrtem Weg, √ºber die Verbindung that offen gehalten wird. So entsteht ein System wie ineinander verschachtelte Rohre. Wenn Sie hier das einzig Wichtige f√ºr den Artikel schreiben m√ºssen:\nEs wird TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384_P512 sein. Hier gibt die Eingabe TLS an, dass der Kontrollkanal √ºber die TLS-Schicht ausgef√ºhrt wird. Andere Alternativen sind SSL oder NULL. Die Eingabe ECDHE gibt an, dass der erste Vorschl√ºssel unter Verwendung des elliptischen Diffie-Hellman-Algorithmus generiert wird. Andere Alternativen sind die Verwendung von DHE, DH oder nicht. Die ECDSA-Daten geben an, dass der Elliptic Digital Signature Certificate Algorithm f√ºr die gegenseitige Authentifizierung und den asymmetrischen Schl√ºssel verwendet wird. Eine weitere verf√ºgbare Alternative ist RSA. Die anderen braucht man nicht zu z√§hlen. Gibt den Verschl√ºsselungsalgorithmus an, der auf dem Datenkanal AES_256_GCM verwendet werden soll. Andere Alternativen sind AES-128-CBC, AES-128-GCM und AES-256-CBC. SHA384 gibt den zu verwendenden Hash-Algorithmus an. Die andere Alternative ist SHA256. P512 erm√∂glicht die Auswahl der elliptischen Kurve als Prime-512. Andere Alternativen sind P-256 und P-384. Der Prozess des Aufbaus der TCP-Verbindung Wenn Sie nun ein ungef√§hres Bild des Prozesses im Kopf haben, beginne ich mit der Erkl√§rung des TCP-Prozesses. Nehmen wir an, wir haben in unserem Fall einen Client und einen Server, und die Verbindung besteht nur aus diesen beiden. Der Client sendet ein SYN (m)-Paket an den Server, mit dem er sich verbinden m√∂chte. Als Antwort sendet der Server ein SYN (n)-Paket und ein ACK (m+1)-Paket √ºber denselben Port. Der Client, der dies empf√§ngt, gibt ebenfalls als Antwort ACK (n+1) zur√ºck, und es findet ein 3-Wege-TCP-Handshake oder ein 3-Wege-TCP-Handshake statt. Somit haben wir einen offenen Kanal zwischen Client und Server √ºber den angegebenen Port.\nhttps://blog.shiftasia.com/what-happen-when-access-website (Datum: 08.04.2023) https://www.netscout.com/blog/asert/ddos-attacks-ssl-something-old-something-new (Datum: 08.04.2023) Wie auf den Fotos zu sehen, kann bei reibungslosem Ablauf die Kommunikation in 3 Schritten erfolgen. Aber wenn Sie fragen, warum wir das in 3 Schritten machen, geht das nicht auch k√ºrzer? Ich w√ºrde (vorerst) nein sagen, nein, f√ºr eine Vollduplex-Kommunikation m√ºssen beide Parteien SYN- und ACK-Pakete senden. Vielleicht erz√§hle ich Ihnen in Zukunft andere Wege, aber im Moment ist es so. Wie auch immer, der TCP/UDP-Teil ist immer kurz und einfach.\nProzess, der in der TLS-Schicht ausgef√ºhrt wird Nach dem Aufbau einer Kommunikation √ºber TCP ist der Client die Person, die die Konversation auf eine andere Ebene bringt. Clients fordern immer etwas vom Server an oder fordern eine Antwort an. Im Allgemeinen reagieren Server nicht auf eine Anfrage, die nicht bei ihnen angekommen ist. Der Prozess l√§uft nach dem Prinzip Erst Nachfrage, dann Angebot ab. Ja, die Parteien befinden sich jetzt auf der TLS-Schicht. Der Client begr√º√üt zuerst den Server. Kein Scherz, es ist echt. Das erste vom Client gesendete Paket wird als Client-Hello-Paket bezeichnet. Neben diesem Paket (um den Vorgang zu beschleunigen) das Paket Supported-Chipers, das die unterst√ºtzten Verschl√ºsselungsalgorithmen angibt, eine vom Client zuf√§llig generierte Nummer, ein SNI-Servernamensindikator, wenn mehr als ein Dienst vorhanden ist die auf derselben IP-Adresse ausgef√ºhrt werden, und ggf. die Sitzungs-ID. . Die Antwort des Servers darauf ist zun√§chst einmal ein h√∂fliches Hallo. Denn das erste Paket, das der Server als Antwort sendet, hei√üt Server-Hello-Paket. Neben diesem Paket sendet das Selected-Chiper-Paket, das das Serverzertifikat, die unterst√ºtzten Verschl√ºsselungsalgorithmen und den ausgew√§hlten Algorithmus angibt, eine von ihm generierte Zufallszahl, gegebenenfalls die Sitzungs-ID und eine SNI-√§hnliche ID wenn sich mehr als ein Client √ºber dieselbe IP verbindet. . Der Client verifiziert zun√§chst anhand des Serverzertifikats, ob es sich wirklich um die Person handelt, auf die er wartet, indem er die Kommunikation startet. Au√üerdem pr√ºft der Server in manchen F√§llen mit einem Zertifikat, ob der Client einer der Clients ist, die er erwartet. Wenn dieser gegenseitige Authentifizierungsprozess positiv ist, wird die n√§chste Stufe bestanden. Der Schl√ºsselerzeugungs- und Austauschprozess wird ausgel√∂st. In dieser Phase greift der Client erneut ein und sagt, dass er den Schl√ºssel mit dem Algorithmus √§ndern m√∂chte, den er w√§hrend dieser Kommunikation festgelegt hat, was als unsicher gilt. Die Parteien beginnen mit der Generierung eines Prekeys mit Diffie-Hellman oder ECDHE. Dazu werden Pre-Secrets von Client und Server geteilt. Die Antworten, die durch Ausf√ºhren einer Reihe mathematischer Operationen gefunden wurden, werden nach oben gesendet, und das gleiche Ergebnis wird durch erneutes Ausf√ºhren mathematischer Operationen erreicht. Das Ergebnis ist der erste Fore-Key, den sie sicher zwischen ihnen erstellt haben. Danach, mit dem von ihnen bestimmten Verschl√ºsselungsalgorithmus, Ein anderer Datenkanal als der Steuerkanal wird zur Kommunikation erstellt, und der Prozess wird von dort aus fortgesetzt.\nhttps://www.researchgate.net/publication/298065605_A_multi-level_framework_to_identify_HTTPS_services (Datum: 08.04.2023) Wie auf den Fotos zu sehen ist, ist der Vorgang fast derselbe wie beim Herstellen einer Verbindung zu einer Webseite. Je nach Bedarf werden nur bestimmte Stufen hinzugef√ºgt, entfernt oder ge√§ndert. Beispielsweise √ºbermitteln die Parteien gem√§√ü PFS, was f√ºr Advanced Privacy steht, den Front-Key nicht mit dem asymmetrischen Schl√ºssel des Servers. Da in diesem Fall f√ºr jede Sitzung derselbe Schl√ºssel verwendet wird, werden die Daten gespeichert und sind dann r√ºckwirkend lesbar, indem auf einen Tag gewartet wird, an dem der Schl√ºssel enth√ºllt wird. Deshalb wurde diese √Ñnderung vorgenommen. Auch hier m√∂chte ich gem√§√ü dem Zero-Trust-Bedrohungsmodell, dass jede Schicht und jeder Prozess den Prozess vorantreibt, ohne darauf zu vertrauen, dass die andere ihre Arbeit korrekt erledigt. Aus diesem Grund wollen wir, dass die Pakete gem√§√ü der Funktion tls-auth verschl√ºsselt werden und die Integrit√§t der ein- und ausgehenden Daten bereits im ersten Kommunikationsmoment in der TLS-Schicht √ºberpr√ºft wird. Vom ersten Moment an, in dem Sie Hallo sagen, k√∂nnen Dritte nicht verstehen, wovon Sie sprechen und in welcher Phase Sie sich befinden. Dazu wird die erste Kommunikation mit einem oder mehreren vorgegebenen Schl√ºsseln gestartet und bei Bedarf werden diese Schl√ºssel in regelm√§√üigen Abst√§nden erneuert. So wird auch bis zur Erstellung des ersten Pre-Keys in der TLS-Schicht die Vertraulichkeit nicht kompromittiert und Unbefugte nicht umsonst erstellt.\nProzess, der in der Datenschicht ausgef√ºhrt wird Wenn dieser gesamte Vorgang erfolgreich abgeschlossen und der Datenkanal bestanden wurde, sind Sie nun beim besten Teil der Arbeit angelangt. Die Daten werden mit der AES-Verschl√ºsselungsmethode verschl√ºsselt. W√§hrend der Verschl√ºsselung werden die Tabellen gem√§√ü dem CBC-GCM-Z√§hlermodus gem√§√ü Ihrer Auswahl gemischt, und bei diesem Vorgang wird gem√§√ü Ihrer Auswahl ein 128- oder 256-Bit-Verschl√ºsselungsschl√ºssel verwendet. Unabh√§ngig von Ihrer Wahl betr√§gt die Verschl√ºsselungsblockl√§nge nat√ºrlich 128 Bit. Nur die L√§nge des Verschl√ºsselungsschl√ºssels √§ndert sich. AES-256-GCM, das ich f√ºr diese Erkl√§rung ausgew√§hlt habe, ist ein AEAD-Verschl√ºsselungstyp. Es fasst die von ihm gesendeten Daten unabh√§ngig von anderen Kan√§len und Prozessen zu einem bestimmten Zeitpunkt zusammen und versendet sie zusammen mit der Zusammenfassung. Somit werden Authentifizierungs- und Verschl√ºsselungsfunktionen in AEAD erf√ºllt, was f√ºr Authentication Encryption with Associated Data steht. Es gibt ein Problem, das hier eine Unterscheidung erfordert. In welcher Phase und in welcher Reihenfolge werden wir die Verschl√ºsselungs- und Hash-Algorithmen verwenden?\nEncrypt-then-MAC (EtM) https://en.wikipedia.org/wiki/Authenticated_encryption (Datum: 08.04.2023) Encrypt-and-MAC (E-and-M) https://en.wikipedia.org/wiki/Authenticated_encryption (Datum: 08.04.2023) MAC-then-Encrypt (MtE) https://en.wikipedia.org/wiki/Authenticated_encryption (Datum: 08.04.2023) Laut EtM, dem ersten Ansatz, werden die Daten zuerst verschl√ºsselt, dann als Ergebnis des Digests mit einem anderen Schl√ºssel verschl√ºsselt und das resultierende Ergebnis in Bl√∂cken zusammen gesendet. Wenn wir uns reale L√∂sungen ansehen, die es verwenden, f√§llt uns zuerst das IPSec-Protokoll ein. Dies ist die einzige Methode, die die h√∂chste Sicherheitsdefinition in AE erreichen kann, dies kann jedoch nur erreicht werden, wenn der verwendete MAC-Algorithmus frei von Korruption ist oder noch nicht geknackt wurde. F√ºr SSHv2 sind auch verschiedene EtM-Cipher-Suites verf√ºgbar. Beachten Sie jedoch, dass f√ºr Daten und Digest eine Schl√ºsseltrennung zwingend erforderlich ist (f√ºr Verschl√ºsselung und Schl√ºssel-Hashing m√ºssen unterschiedliche Schl√ºssel verwendet werden), da Sie sonst je nach verwendeter Verschl√ºsselungsmethode und Hash-Funktion m√∂glicherweise ein unsicheres Ergebnis erhalten.\nGem√§√ü dem zweiten Ansatz, E\u0026M, werden Klartextdaten verschl√ºsselt und daneben wird eine Zusammenfassung des Verschl√ºsselungszustands der Klartextdaten hinzugef√ºgt. Obwohl hier nur ein Schl√ºssel verwendet wird, zeigt die Tatsache, dass zwei unterschiedliche Ergebnisse (Verschl√ºsselungsergebnis und Digest-Ergebnis) f√ºr dieselben Daten vorliegen, deutlich, dass die Sicherheit nicht gut genug ist. Als reale L√∂sung mit diesem System k√∂nnen wir die ersten Versionen von SSH als Beispiel anf√ºhren. Um dies zu verbessern, wurden Methoden wie das Verschl√ºsseln der gesendeten Zusammenfassungsdatei mit demselben Schl√ºssel ausprobiert.\nLaut MtE, dem dritten und letzten mir bekannten Ansatz, wird eine Zusammenfassungsdatei auf Basis von Klartext generiert. Dann werden der Klartext und die Digest-Datei zusammen mit dem Schl√ºssel verschl√ºsselt. Der Chiffretext und die Chiffretextdatei werden zusammen gesendet. Wenn wir uns reale L√∂sungen ansehen, die es verwenden, sind das in erster Linie SSL/TLS-Implementierungen. Wir alle wissen, wie zuverl√§ssig und nachhaltig SSL/TLS-Anwendungen an sich sind. Dar√ºber hinaus wurden im Laufe der Jahre Verbesserungen wie MAC-then-pad-then-encrypt vorgenommen, um die Sicherheit zu erh√∂hen. Gem√§√ü dieser Verbesserung wird zuerst der Klartext verdaut, dann auf die Blockgr√∂√üe aufgef√ºllt und dann die Verschl√ºsselung durchgef√ºhrt. Dies f√ºhrt zu einem noch zuverl√§ssigeren Verschl√ºsselungsergebnis. Aber es gibt F√§lle, in denen der Padding-Mechanismus Angriffe wie Padding Oracle verursacht, wenn er bestimmte Fehler macht.\nhttps://community.openvpn.net/openvpn/wiki/Gigabit_Networks_Linux (Datum: 08.04.2023) Nach der Auswahl des zu verwendenden AEAD-Ansatzes wird je nach Verwendung von TAP oder TUN der in der obigen Grafik dargestellte Weg beschritten. Gem√§√ü diesem Pfad geht die im Benutzerbereich ausgef√ºhrte/gew√ºnschte Aktion zu den TAP/TUN-Adaptern auf Kernel-Ebene. Da sich diese Adapter auf der Kernel-Ebene befinden, arbeiten sie sehr schnell. Dann f√ºhren die virtuellen Adapter die notwendige Verschl√ºsselung mit der entsprechenden Bibliothek durch, f√ºgen ggf. den Digest hinzu und stellen die Paketgr√∂√üe ein. Dann sendet der Server Pakete sequentiell √ºber die Ethernet-Schnittstelle an die Ethernet-Schnittstelle des Clients. Der Client, der es erh√§lt, konfiguriert die Pakete neu, organisiert sie, kombiniert sie bei Bedarf und entschl√ºsselt sie mit den erforderlichen Bibliotheken. Nach der Entschl√ºsselung √ºbertr√§gt es den Client √ºber den virtuellen Adapter an den Endbenutzer. Als Ergebnis all dieser mathematischen Operationen und Bem√ºhungen erreichte der Benutzer also nach einigen Zyklen den gew√ºnschten Inhalt. Es ist ziemlich lang zu erkl√§ren, aber sehr einfach zu bedienen, liebe Leser. Sie m√ºssen nur die entsprechende Skriptseite auf meiner GitHub-Seite besuchen. Das zugeh√∂rige Skript nimmt all diese Anpassungen interaktiv f√ºr Sie vor. Alles, was Sie tun m√ºssen, ist sich zur√ºckzulehnen und zu genie√üen.\nFAQ und Ende Erhielt mich per Mail, Fosstodon oder GitHub I werde versuchen, hier von Zeit zu Zeit Fragen hinzuzuf√ºgen. So kommen Sie historisch gesehen direkt zum Ergebnis, ohne dar√ºber nachzudenken, welche Art von Fragen zu welchem ‚Äã‚ÄãZeitpunkt aufgetreten sind oder ob es eine L√∂sung gibt. Abgesehen davon, wenn es Fragen gibt, die einer zus√§tzlichen Erkl√§rung bed√ºrfen, ohne das technische Dokument zu √§ndern, denke ich, sie in diesen Abschnitt aufzunehmen.\n","wordCount":"3178","inLanguage":"de","datePublished":"2022-03-27T00:00:00Z","dateModified":"2023-04-08T02:13:24+02:00","author":{"@type":"Person","name":"Wise"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wiseweb-works.github.io/blog/de/post/openvpn-full-anlatim/"},"publisher":{"@type":"Organization","name":"Wise","logo":{"@type":"ImageObject","url":"https://wiseweb-works.github.io/blog/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wiseweb-works.github.io/blog/de/ accesskey=h title="Wise (Alt + H)">Wise</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://wiseweb-works.github.io/blog/ title=Turkish aria-label=:tr:>üáπüá∑</a></li><li><a href=https://wiseweb-works.github.io/blog/en/ title=English aria-label=:gb:>üá¨üáß</a></li></ul></div></div><ul id=menu><li><a href=https://wiseweb-works.github.io/de/blog/ title=Startzeite><span>Startzeite</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/post/ title=Bloggen><span>Bloggen</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/page/iletisim/ title=Kontakt><span>Kontakt</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/tags/ title=Stichworte><span>Stichworte</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/archives/ title=Archiv><span>Archiv</span></a></li><li><a href=https://wiseweb-works.github.io/de/blog/search/ title="Suche üîç"><span>Suche üîç</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Eingehender OpenVPN-Test</h1><div class=post-meta><span title='2022-03-27 00:00:00 +0000 UTC'>27 M√§rz, 2022</span>&nbsp;¬∑&nbsp;<span title='2023-04-08 02:13:24 +0200 +0200'>(Updated 8 April, 2023)</span>&nbsp;¬∑&nbsp;15 Minuten&nbsp;¬∑&nbsp;3178 W√∂rter&nbsp;¬∑&nbsp;Wise&nbsp;|&nbsp;√úbersetzungen:<ul class=i18n_list><li><a href=https://wiseweb-works.github.io/blog/post/openvpn-full-anlatim/>üáπüá∑</a></li><li><a href=https://wiseweb-works.github.io/blog/en/post/openvpn-full-anlatim/>üá¨üáß</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/wiseweb-works/blog/tree/master/content/post/openvpn-full-anlatim.de.md rel="noopener noreferrer" target=_blank>Bearbeiten</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Inhaltsverzeichnis</span></summary><div class=inner><ul><li><a href=#einf%c3%bchrung-und-zusammenfassung aria-label="Einf√ºhrung und Zusammenfassung">Einf√ºhrung und Zusammenfassung</a><ul><li><a href=#was-ist-openvpn-und-wof%c3%bcr-wird-es-verwendet aria-label="Was ist OpenVPN und wof√ºr wird es verwendet?">Was ist OpenVPN und wof√ºr wird es verwendet?</a></li><li><a href=#was-brauchen-wir-um-eine-openvpn-verbindung-aufzubauen aria-label="Was brauchen wir, um eine OpenVPN-Verbindung aufzubauen?">Was brauchen wir, um eine OpenVPN-Verbindung aufzubauen?</a><ul><li><a href=#die-vom-server-verwaltete-einstellungsdatei-enth%c3%a4lt-die-folgenden-eintr%c3%a4ge aria-label="Die vom Server verwaltete Einstellungsdatei enth√§lt die folgenden Eintr√§ge">Die vom Server verwaltete Einstellungsdatei enth√§lt die folgenden Eintr√§ge</a></li><li><a href=#die-clientseitige-einstellungsdatei-enth%c3%a4lt-die-folgenden-eintr%c3%a4ge aria-label="Die clientseitige Einstellungsdatei enth√§lt die folgenden Eintr√§ge">Die clientseitige Einstellungsdatei enth√§lt die folgenden Eintr√§ge</a></li></ul></li><li><a href=#was-passiert-beim-aufbau-einer-openvpn-verbindung aria-label="Was passiert beim Aufbau einer OpenVPN-Verbindung?">Was passiert beim Aufbau einer OpenVPN-Verbindung?</a><ul><li><a href=#der-prozess-des-aufbaus-der-tcp-verbindung aria-label="Der Prozess des Aufbaus der TCP-Verbindung">Der Prozess des Aufbaus der TCP-Verbindung</a></li><li><a href=#prozess-der-in-der-tls-schicht-ausgef%c3%bchrt-wird aria-label="Prozess, der in der TLS-Schicht ausgef√ºhrt wird">Prozess, der in der TLS-Schicht ausgef√ºhrt wird</a></li><li><a href=#prozess-der-in-der-datenschicht-ausgef%c3%bchrt-wird aria-label="Prozess, der in der Datenschicht ausgef√ºhrt wird">Prozess, der in der Datenschicht ausgef√ºhrt wird</a></li></ul></li></ul></li><li><a href=#faq-und-ende aria-label="FAQ und Ende">FAQ und Ende</a></li></ul></div></details></div><div class=post-content><h1 id=einf√ºhrung-und-zusammenfassung>Einf√ºhrung und Zusammenfassung<a hidden class=anchor aria-hidden=true href=#einf√ºhrung-und-zusammenfassung>#</a></h1><p>Heute werden wir OpenVPN, meiner Meinung nach eine der wichtigsten Software der letzten Zeit, ausf√ºhrlich √ºberpr√ºfen. In diesem Test werden wir zuerst dar√ºber sprechen, wof√ºr OpenVPN verwendet wird. Dann untersuchen wir, was wir zum Ausf√ºhren des Programms ben√∂tigen und was vor dem ersten Ausf√ºhren zu tun ist. Abschlie√üend werde ich versuchen zu erkl√§ren, was vom ersten Moment des Verbindungsaufbaus bis zum letzten Schritt, wenn die Daten entschl√ºsselt werden, im Hintergrund vor sich geht. Daher sch√§tze ich, dass unser Artikel aus 3 Teilen und gegebenenfalls einem Frage-Antwort-Abschnitt bestehen wird. Jetzt schnallen wir uns an und machen einen Ausflug in die tiefe und d√ºstere Welt des Internets.</p><h2 id=was-ist-openvpn-und-wof√ºr-wird-es-verwendet>Was ist OpenVPN und wof√ºr wird es verwendet?<a hidden class=anchor aria-hidden=true href=#was-ist-openvpn-und-wof√ºr-wird-es-verwendet>#</a></h2><p>Heutzutage gibt es fast kein Gesch√§ft, das nicht online erledigt werden kann. Sogar unsere Arbeit, die normalerweise nicht online ist, hat sich aufgrund der Pandemie und der neuen Normalit√§t auf die Arbeit von zu Hause aus entwickelt. Es gab jedoch gro√üe Probleme, sowohl weil es eine Arbeitsmethode ist, an die wir nicht gew√∂hnt sind, als auch weil unsere Leute nicht sehr gut mit Technologie umgehen k√∂nnen. Bevor klar wurde, dass die Menschen sich von ihren Heimcomputern mit ihren B√ºrocomputern verbinden mussten, kamen einige Unternehmen auf frivole Ideen, wie zum Beispiel, B√ºrocomputer zu den H√§usern der Mitarbeiter zu schicken. Sie haben sehr gut verstanden, wie falsch das war, aus dem Feedback, das sie in kurzer Zeit erhalten haben. Kurz gesagt, es wurde endlich akzeptiert, dass elektronische Ger√§te im B√ºro bleiben und irgendwie eine sichere und nachhaltige Verbindung aus der Ferne hergestellt werden sollte. Nat√ºrlich befanden sich Institutionen auch schon fr√ºher in solchen N√∂ten, aber eine solche Gro√üsituation kam damals nicht in Frage. Vor der Pandemie wurden verschiedene Protokolle wie PPTP, L2TP, IPSec, IKev2, SSTP und schlie√ülich OpenVPN verwendet. Dies sind normalerweise Abk√ºrzungen f√ºr bestimmte lange und ausgefallene W√∂rter, und ihre grundlegende Logik besteht darin, zwei oder mehr Ger√§te zu verbinden und sie so zu verhalten, als ob sie sich im selben Netzwerk befinden. Ich werde nicht viel sagen, da Protokolle vor OpenVPN gewisse Schw√§chen, Langsamkeit und technische Schwierigkeiten bei der Implementierung mit sich brachten. OpenVPN ist der Name des Protokolls und Programms, das es mindestens 2 Ger√§ten in der Rolle von Server und Client erm√∂glicht, sich miteinander zu verbinden, und zwar auf eine Weise, die Industriestandards entspricht. Ich verwende ein Remote-Desktop-Programm. Ich h√∂re Sie anscheinend sagen, was die Notwendigkeit daf√ºr ist. Leider m√ºssen er und alle anderen Programme wie er grunds√§tzlich dieses Protokoll verwenden. Wenn Sie das Schildsymbol oder die Verbindungsdetails in TeamViewer, einem der bekanntesten, dr√ºcken, k√∂nnen Sie das OpenVPN-Protokoll sehen.</p><h2 id=was-brauchen-wir-um-eine-openvpn-verbindung-aufzubauen>Was brauchen wir, um eine OpenVPN-Verbindung aufzubauen?<a hidden class=anchor aria-hidden=true href=#was-brauchen-wir-um-eine-openvpn-verbindung-aufzubauen>#</a></h2><p>Zun√§chst muss OpenVPN sowohl auf der Server- als auch auf der Clientseite (dem zu verbindenden Ger√§t) installiert werden. Dann sollte eine Einstellungsdatei (Konfigurationsdatei) bearbeitet werden, die die Bedingungen zeigt, unter denen die Ger√§te kommunizieren. Das Hauptereignis ist, dass diese Konfigurationsdatei vom Client generiert und verwendet wird. Diese Konfigurationsdatei ist unterteilt in server_config, die vom Server verwendet wird, und client_config, die vom Client verwendet wird.</p><h3 id=die-vom-server-verwaltete-einstellungsdatei-enth√§lt-die-folgenden-eintr√§ge>Die vom Server verwaltete Einstellungsdatei enth√§lt die folgenden Eintr√§ge<a hidden class=anchor aria-hidden=true href=#die-vom-server-verwaltete-einstellungsdatei-enth√§lt-die-folgenden-eintr√§ge>#</a></h3><ul><li><code>Port 1194</code> gibt an, welcher Port eine Verbindungsanfrage zum Herstellen der OpenVPN-Verbindung erh√§lt.</li><li><code>proto tcp</code> Verbindung √ºber TCP oder UDP m√∂glich. Einstellungseintrag zur Auswahl eingetragen.</li><li><code>dev tun</code> TAP- oder TUN-Schnittstelle kann verwendet werden. Dies sind virtuelle Schnittstellen. TAP-Schicht 2 stellt eine Verbindung her, w√§hrend TUN-Schicht 3 eine Verbindung herstellt.</li><li><code>user none</code> Erm√∂glicht das Verbinden von Benutzern mit einem nicht autorisierten Benutzer auf dem Server.</li><li><code>group $NOGROUP</code> Erm√∂glicht es, sich verbindende Benutzer mit einer nicht autorisierten Gruppe auf dem Server als Gruppe zu verkn√ºpfen.</li><li><code>persist-key</code> Eine Autorisierungseinstellung f√ºr die Erstellung und den Neustart der virtuellen Schnittstelle</li><li><code>persist-tun</code> Ebenfalls eine Berechtigungseinstellung f√ºr die Erstellung und den Neustart der virtuellen Schnittstelle</li><li><code>keepalive 10 120</code> Eine Einstellung daf√ºr, wie viele Verbindungen aktiv gehalten werden und wie lange die aktive Verbindung beendet wird, wenn keine Kommunikation hergestellt wird.</li><li><code>ifconfig-pool-persist ipp.txt</code> Eine Einstellung, um die von OpenVPN an Clients im virtuellen Netzwerk vergebenen IP-Adressen beizubehalten und ihnen dieselben Adressen zuzuweisen, wenn sie sich wieder verbinden</li><li><code>push "dhcp-option DNS 1.1.1.1"</code> Eine DNS-Einstellung, die der Server beim Verlassen des Netzwerks verwenden soll</li><li><code>compress</code> Der Teil, in dem Komprimierungsoptionen festgelegt werden</li><li><code>dh none</code> Eine Einstellung zum Ein- oder Ausschalten von Diffie-Hellman</li><li><code>ecdh-curve</code> Wenn Sie Elliptic Curve Diffie-Hellman verwenden, wird die Einstellung angepasst, neben der die Kurve ausgew√§hlt werden muss</li><li><code>dh dh.pem</code>-Einstellung, die den Speicherort der PEM-Datei angibt, die Sie vorher erstellen m√ºssen, wenn Sie Diffie-Hellman verwenden</li><li><code>tls-crypt tls-crypt.key</code> Erforderliche Einstellung, um die TLS-Schicht noch vor dem Pre-Shared Master zu verschl√ºsseln</li><li><code>tls-auth tls-auth.key 0</code>Einstellung, die es erm√∂glicht, Parteien √ºber die Verschl√ºsselung hinaus in der Pre-Handshake-Phase der TLS-Schicht zu authentifizieren</li><li><code>crl-verify crl.pem</code> Einstellung um zu pr√ºfen, ob die generierten Zertifikate √ºber die CRL-Liste widerrufen werden oder nicht</li><li><code>ca ca.crt</code> Eine Einstellung, die den Speicherort des Zertifikats der Zertifizierungsstelle des generierten Zertifikats meldet</li><li><code>cert $SERVER_NAME.crt</code> Eine Einstellung, die den Speicherort des Zertifikats des Servers angibt</li><li><code>key $SERVER_NAME.key</code> Eine Einstellung, die den Speicherort des erforderlichen asymmetrischen geheimen Schl√ºssels neben dem Zertifikat des Servers angibt</li><li><code>auth $HMAC_ALG</code> Eine Einstellung, die beschreibt, welcher Hash-Algorithmus f√ºr den Datenkanal verwendet werden soll, und ggf. <code>tls-auth</code></li><li><code>cipher $CIPHER</code> Eine Einstellung, die angibt, welcher Verschl√ºsselungsalgorithmus f√ºr den Datenkanal verwendet werden soll</li><li><code>ncp-ciphers $CIPHER</code> Eine Einstellung, die angibt, welche Verschl√ºsselungsalgorithmen der Server verwenden kann</li><li><code>tls-server</code> Eine Einstellung, die den Server anweist, den TLS-Kanal zu verwenden</li><li>Eine Einstellung <code>tls-version-min 1.2</code> meldet die niedrigste Version, die auf dem TLS-Kanal verwendet werden soll</li><li><code>tls-cipher $CC_CIPHER</code> Die Verschl√ºsselung wird auch auf der TLS-Schicht verwendet, mit Ausnahme des Datenkanals, der die Einstellung ist, die die Verschl√ºsselung des Steuerkanals deklariert</li><li><code>client-config-dir /etc/openvpn/ccd</code> Einstellung, die angibt, wo Client-Einstellungsdateien aufbewahrt werden</li><li><code>status /var/log/openvpn/status.log</code> Einstellung, die angibt, wo Statusberichte geschrieben und wo Protokolldateien aufbewahrt werden</li><li><code>verb 3</code> Diese Einstellung, die die Abk√ºrzung des Wortes Verbose ist, ist die Einstellung, wie detailliert der Statusbericht gegeben werden soll.</li></ul><h3 id=die-clientseitige-einstellungsdatei-enth√§lt-die-folgenden-eintr√§ge>Die clientseitige Einstellungsdatei enth√§lt die folgenden Eintr√§ge<a hidden class=anchor aria-hidden=true href=#die-clientseitige-einstellungsdatei-enth√§lt-die-folgenden-eintr√§ge>#</a></h3><ul><li><code>client</code> gibt an, dass sich das Ger√§t in der Client-Rolle befindet</li><li><code>proto tcp-client</code> meldet TCP als Protokoll</li><li><code>remote $IP $PORT</code> Der Teil, in dem die IP-Adresse und die Portnummer des/der zu verbindenden Server(s) festgelegt werden</li><li><code>dev tun</code> legt fest, welche der TUN/TAP-Schnittstellen verwendet werden sollen</li><li><code>resolve-retry infinite</code> Wir sagen Ihnen, wie lange Sie warten m√ºssen, wenn sich die Adressaufl√∂sung aufgrund von IP oder DNS verz√∂gert</li><li><code>nobind</code>-Einstellung, um keine Verbindung zu einer Adresse im lokalen Netzwerk herzustellen</li><li><code>persist-key</code> Erm√∂glicht das Lesen von Schl√ºsseldateien ohne zus√§tzliche Autorisierung beim Neustart</li><li><code>persist-tun</code> Es erm√∂glicht auch, dass die TUN/TAP-Schnittstelle beim Neustart ohne Autorisierung aufgeweckt wird</li><li><code>remote-cert-tls server</code> √úberpr√ºft das Zertifikat des verbundenen Servers auf TLS-Ebene</li><li><code>verify-x509-name $SERVER_NAME name</code> Befehl, der den Namen im Zertifikat angibt, zu dem der Server zur√ºckkehren wird, und wie der Name des Servers lauten soll</li><li><code>auth $HMAC_ALG</code> Befehl, der angibt, welcher Algorithmus f√ºr die Validierung verwendet werden soll</li><li><code>auth-nocache</code> Speichert das f√ºr die Anmeldung erforderliche Passwort nicht</li><li><code>cipher $CIPHER</code> Befehl zur Auswahl des f√ºr die Verschl√ºsselung zu verwendenden Algorithmus</li><li><code>tls-client</code> aktiviert TLS w√§hrend der TLS-Kommunikation und √ºbernimmt die Client-Rolle</li><li><code>tls-version-min 1.2</code> Legt die niedrigste TLS-Version fest</li><li><code>tls-cipher $CC_CIPHER</code> w√§hlt den Verschl√ºsselungsalgorithmus aus, der im TLS-Steuerkanal verwendet werden soll</li><li><code>ignore-unknown-option block-outside-dns</code> Verhindert, dass unbekannte DNS-Adressen verwendet werden</li><li><code>setenv opt block-outside-dns</code> blockiert DNS-Leaks f√ºr Windows 10</li><li><code>Verb 3</code> Bestimmt den Grad der Berichterstattung</li><li><code>compress</code> Hier werden die Einstellungen des Komprimierungsalgorithmus gemeldet</li><li><code>"&lt;ca>/etc/openvpn/easy-rsa/pki/ca.crt&lt;/ca>"</code> Hartcodierte Einbettung der erwarteten Server-Zertifizierungsstellendatei</li><li><code>"&lt;cert>/etc/openvpn/easy-rsa/pki/issued/$CLIENT.crt&lt;/cert>"</code> Hartcodierte Einbettung der Client-Zertifikatsdatei</li><li><code>"&lt;key>/etc/openvpn/easy-rsa/pki/private/$CLIENT.key&lt;/key>"</code> Hartcodierte Einbettung des asymmetrischen geheimen Schl√ºssels des Clients</li><li><code>"&lt;tls-crypt>/etc/openvpn/tls-crypt.key&lt;/tls-crypt>"</code> Angabe der Schl√ºsseldatei f√ºr TLS-Crypt</li><li><code>"&lt;tls-auth>/etc/openvpn/tls-auth.key&lt;/tls-auth>"</code> Angabe der Schl√ºsseldatei f√ºr die TLS-Authentifizierung</li><li><code>key-direction 1</code> weist Client und Server Rollen f√ºr die TLS-Layer-Verschl√ºsselung zu (0 und 1)</li></ul><p>Eine ausf√ºhrliche Dokumentation dieser Einstellungen und mehr finden Sie auf der Webseite <a href=https://openvpn.net/community-resources/reference-manual-for-openvpn-2-4/>OpenVPN</a>.</p><h2 id=was-passiert-beim-aufbau-einer-openvpn-verbindung>Was passiert beim Aufbau einer OpenVPN-Verbindung?<a hidden class=anchor aria-hidden=true href=#was-passiert-beim-aufbau-einer-openvpn-verbindung>#</a></h2><p>Jedes Mal, wenn ich mich mit OpenVPN verbinde, f√ºhle ich mich, als w√ºrde R2-D2 ihre Pl√§ne der Sternenflotte entf√ºhren. Die Leute wollen sich nicht immer einer genauen Pr√ºfung unterziehen und bitten vielleicht jemanden, ihnen zu erkl√§ren, was und wie. In meiner Absicht, diesen Artikel zu schreiben, habe ich mir diese Frage tats√§chlich gestellt und mich sehr bem√ºht, die Antwort zu bekommen. Ich m√∂chte nicht, dass Sie sich so viel M√ºhe geben, aber ich kann nicht sagen, dass Sie es sofort hochladen sollen, denken Sie nicht an den Rest, es ist mein Job. Wie eingangs versprochen, werde ich Ihnen diesen Vorgang ausf√ºhrlich erl√§utern und Ihnen die Entscheidung √ºberlassen. So funktioniert der Prozess in einer OpenVPN-Verbindung, Vor- und Nachteile (wie ich es bisher herausfinden konnte). Sie bauen zun√§chst eine TCP/UDP-Verbindung auf. Sie f√ºhren einen Prozess wie jede Anwendung aus, die TCP verwendet, und wechseln dann zur TLS-Schicht. Sie f√ºhren einen Handshake und eine Authentifizierung auf der TLS-Schicht durch. Diese Schicht wird auch Steuerkanal genannt. Dann wird eine bestimmte Kommunikation festgelegt und der Datenkanal weitergegeben. Der Prozess der Ver- und Entschl√ºsselung der diesmal zu versendenden Datenpakete im Daten- bzw. Datenkanal beginnt. Dazu sprechen Ger√§te miteinander und Daten werden unter bestimmten gemeinsamen Bedingungen gesendet. Kurz gesagt, am Ende des von mir so beschriebenen Prozesses endet die von uns bei 0 begonnene Kommunikation mit dem sicheren und erw√ºnschten Datenzugriff auf uns, oder es werden erneut Anfragen gesendet, diesmal auf umgekehrtem Weg, √ºber die Verbindung that offen gehalten wird. So entsteht ein System wie ineinander verschachtelte Rohre. Wenn Sie hier das einzig Wichtige f√ºr den Artikel schreiben m√ºssen:</p><ul><li>Es wird <code>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384_P512</code> sein.<ul><li>Hier gibt die Eingabe <code>TLS</code> an, dass der Kontrollkanal √ºber die TLS-Schicht ausgef√ºhrt wird. Andere Alternativen sind <code>SSL</code> oder <code>NULL</code>.</li><li>Die Eingabe <code>ECDHE</code> gibt an, dass der erste Vorschl√ºssel unter Verwendung des elliptischen Diffie-Hellman-Algorithmus generiert wird. Andere Alternativen sind die Verwendung von <code>DHE</code>, <code>DH</code> oder nicht.</li><li>Die <code>ECDSA</code>-Daten geben an, dass der Elliptic Digital Signature Certificate Algorithm f√ºr die gegenseitige Authentifizierung und den asymmetrischen Schl√ºssel verwendet wird. Eine weitere verf√ºgbare Alternative ist <code>RSA</code>. Die anderen braucht man nicht zu z√§hlen.</li><li>Gibt den Verschl√ºsselungsalgorithmus an, der auf dem Datenkanal <code>AES_256_GCM</code> verwendet werden soll. Andere Alternativen sind <code>AES-128-CBC</code>, <code>AES-128-GCM</code> und <code>AES-256-CBC</code>.</li><li><code>SHA384</code> gibt den zu verwendenden Hash-Algorithmus an. Die andere Alternative ist <code>SHA256</code>.</li><li><code>P512</code> erm√∂glicht die Auswahl der elliptischen Kurve als Prime-512. Andere Alternativen sind <code>P-256</code> und <code>P-384</code>.</li></ul></li></ul><h3 id=der-prozess-des-aufbaus-der-tcp-verbindung>Der Prozess des Aufbaus der TCP-Verbindung<a hidden class=anchor aria-hidden=true href=#der-prozess-des-aufbaus-der-tcp-verbindung>#</a></h3><p>Wenn Sie nun ein ungef√§hres Bild des Prozesses im Kopf haben, beginne ich mit der Erkl√§rung des TCP-Prozesses. Nehmen wir an, wir haben in unserem Fall einen Client und einen Server, und die Verbindung besteht nur aus diesen beiden. Der Client sendet ein SYN (m)-Paket an den Server, mit dem er sich verbinden m√∂chte. Als Antwort sendet der Server ein SYN (n)-Paket und ein ACK (m+1)-Paket √ºber denselben Port. Der Client, der dies empf√§ngt, gibt ebenfalls als Antwort ACK (n+1) zur√ºck, und es findet ein 3-Wege-TCP-Handshake oder ein 3-Wege-TCP-Handshake statt. Somit haben wir einen offenen Kanal zwischen Client und Server √ºber den angegebenen Port.</p><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TCP-Handshake.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TCP-Handshake.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/TCP-Handshake.jpg loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>https://blog.shiftasia.com/what-happen-when-access-website (Datum: 08.04.2023)</small></b></center></caption></picture></p><hr><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TCP-Handshake-2.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TCP-Handshake-2.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/TCP-Handshake-2.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>https://www.netscout.com/blog/asert/ddos-attacks-ssl-something-old-something-new (Datum: 08.04.2023)</small></b></center></caption></picture></p><p>Wie auf den Fotos zu sehen, kann bei reibungslosem Ablauf die Kommunikation in 3 Schritten erfolgen. Aber wenn Sie fragen, warum wir das in 3 Schritten machen, geht das nicht auch k√ºrzer? Ich w√ºrde (vorerst) nein sagen, nein, f√ºr eine Vollduplex-Kommunikation m√ºssen beide Parteien SYN- und ACK-Pakete senden. Vielleicht erz√§hle ich Ihnen in Zukunft andere Wege, aber im Moment ist es so. Wie auch immer, der TCP/UDP-Teil ist immer kurz und einfach.</p><h3 id=prozess-der-in-der-tls-schicht-ausgef√ºhrt-wird>Prozess, der in der TLS-Schicht ausgef√ºhrt wird<a hidden class=anchor aria-hidden=true href=#prozess-der-in-der-tls-schicht-ausgef√ºhrt-wird>#</a></h3><p>Nach dem Aufbau einer Kommunikation √ºber TCP ist der Client die Person, die die Konversation auf eine andere Ebene bringt. Clients fordern immer etwas vom Server an oder fordern eine Antwort an. Im Allgemeinen reagieren Server nicht auf eine Anfrage, die nicht bei ihnen angekommen ist. Der Prozess l√§uft nach dem Prinzip <code>Erst Nachfrage, dann Angebot</code> ab. Ja, die Parteien befinden sich jetzt auf der TLS-Schicht. Der Client begr√º√üt zuerst den Server. Kein Scherz, es ist echt. Das erste vom Client gesendete Paket wird als <code>Client-Hello</code>-Paket bezeichnet. Neben diesem Paket (um den Vorgang zu beschleunigen) das Paket <code>Supported-Chipers</code>, das die unterst√ºtzten Verschl√ºsselungsalgorithmen angibt, eine vom Client zuf√§llig generierte Nummer, ein <code>SNI</code>-Servernamensindikator, wenn mehr als ein Dienst vorhanden ist die auf derselben IP-Adresse ausgef√ºhrt werden, und ggf. die Sitzungs-ID. . Die Antwort des Servers darauf ist zun√§chst einmal ein h√∂fliches Hallo. Denn das erste Paket, das der Server als Antwort sendet, hei√üt <code>Server-Hello</code>-Paket. Neben diesem Paket sendet das <code>Selected-Chiper</code>-Paket, das das Serverzertifikat, die unterst√ºtzten Verschl√ºsselungsalgorithmen und den ausgew√§hlten Algorithmus angibt, eine von ihm generierte Zufallszahl, gegebenenfalls die Sitzungs-ID und eine SNI-√§hnliche ID wenn sich mehr als ein Client √ºber dieselbe IP verbindet. . Der Client verifiziert zun√§chst anhand des Serverzertifikats, ob es sich wirklich um die Person handelt, auf die er wartet, indem er die Kommunikation startet. Au√üerdem pr√ºft der Server in manchen F√§llen mit einem Zertifikat, ob der Client einer der Clients ist, die er erwartet. Wenn dieser gegenseitige Authentifizierungsprozess positiv ist, wird die n√§chste Stufe bestanden. Der Schl√ºsselerzeugungs- und Austauschprozess wird ausgel√∂st. In dieser Phase greift der Client erneut ein und sagt, dass er den Schl√ºssel mit dem Algorithmus √§ndern m√∂chte, den er w√§hrend dieser Kommunikation festgelegt hat, was als unsicher gilt. Die Parteien beginnen mit der Generierung eines Prekeys mit Diffie-Hellman oder ECDHE. Dazu werden Pre-Secrets von Client und Server geteilt. Die Antworten, die durch Ausf√ºhren einer Reihe mathematischer Operationen gefunden wurden, werden nach oben gesendet, und das gleiche Ergebnis wird durch erneutes Ausf√ºhren mathematischer Operationen erreicht. Das Ergebnis ist der erste Fore-Key, den sie sicher zwischen ihnen erstellt haben. Danach, mit dem von ihnen bestimmten Verschl√ºsselungsalgorithmus, Ein anderer Datenkanal als der Steuerkanal wird zur Kommunikation erstellt, und der Prozess wird von dort aus fortgesetzt.</p><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TLS-Handshake.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TLS-Handshake.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/TLS-Handshake.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>https://www.researchgate.net/publication/298065605_A_multi-level_framework_to_identify_HTTPS_services (Datum: 08.04.2023)</small></b></center></caption></picture></p><hr><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TLS-Handshake-2.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TLS-Handshake-2.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/TLS-Handshake-2.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small></small></b></center></caption></picture></p><p>Wie auf den Fotos zu sehen ist, ist der Vorgang fast derselbe wie beim Herstellen einer Verbindung zu einer Webseite. Je nach Bedarf werden nur bestimmte Stufen hinzugef√ºgt, entfernt oder ge√§ndert. Beispielsweise √ºbermitteln die Parteien gem√§√ü PFS, was f√ºr Advanced Privacy steht, den Front-Key nicht mit dem asymmetrischen Schl√ºssel des Servers. Da in diesem Fall f√ºr jede Sitzung derselbe Schl√ºssel verwendet wird, werden die Daten gespeichert und sind dann r√ºckwirkend lesbar, indem auf einen Tag gewartet wird, an dem der Schl√ºssel enth√ºllt wird. Deshalb wurde diese √Ñnderung vorgenommen. Auch hier m√∂chte ich gem√§√ü dem Zero-Trust-Bedrohungsmodell, dass jede Schicht und jeder Prozess den Prozess vorantreibt, ohne darauf zu vertrauen, dass die andere ihre Arbeit korrekt erledigt. Aus diesem Grund wollen wir, dass die Pakete gem√§√ü der Funktion <code>tls-auth</code> verschl√ºsselt werden und die Integrit√§t der ein- und ausgehenden Daten bereits im ersten Kommunikationsmoment in der TLS-Schicht √ºberpr√ºft wird. Vom ersten Moment an, in dem Sie Hallo sagen, k√∂nnen Dritte nicht verstehen, wovon Sie sprechen und in welcher Phase Sie sich befinden. Dazu wird die erste Kommunikation mit einem oder mehreren vorgegebenen Schl√ºsseln gestartet und bei Bedarf werden diese Schl√ºssel in regelm√§√üigen Abst√§nden erneuert. So wird auch bis zur Erstellung des ersten Pre-Keys in der TLS-Schicht die Vertraulichkeit nicht kompromittiert und Unbefugte nicht umsonst erstellt.</p><h3 id=prozess-der-in-der-datenschicht-ausgef√ºhrt-wird>Prozess, der in der Datenschicht ausgef√ºhrt wird<a hidden class=anchor aria-hidden=true href=#prozess-der-in-der-datenschicht-ausgef√ºhrt-wird>#</a></h3><p>Wenn dieser gesamte Vorgang erfolgreich abgeschlossen und der Datenkanal bestanden wurde, sind Sie nun beim besten Teil der Arbeit angelangt. Die Daten werden mit der AES-Verschl√ºsselungsmethode verschl√ºsselt. W√§hrend der Verschl√ºsselung werden die Tabellen gem√§√ü dem CBC-GCM-Z√§hlermodus gem√§√ü Ihrer Auswahl gemischt, und bei diesem Vorgang wird gem√§√ü Ihrer Auswahl ein 128- oder 256-Bit-Verschl√ºsselungsschl√ºssel verwendet. Unabh√§ngig von Ihrer Wahl betr√§gt die Verschl√ºsselungsblockl√§nge nat√ºrlich 128 Bit. Nur die L√§nge des Verschl√ºsselungsschl√ºssels √§ndert sich. AES-256-GCM, das ich f√ºr diese Erkl√§rung ausgew√§hlt habe, ist ein AEAD-Verschl√ºsselungstyp. Es fasst die von ihm gesendeten Daten unabh√§ngig von anderen Kan√§len und Prozessen zu einem bestimmten Zeitpunkt zusammen und versendet sie zusammen mit der Zusammenfassung. Somit werden Authentifizierungs- und Verschl√ºsselungsfunktionen in AEAD erf√ºllt, was f√ºr <code>Authentication Encryption with Associated Data</code> steht. Es gibt ein Problem, das hier eine Unterscheidung erfordert. In welcher Phase und in welcher Reihenfolge werden wir die Verschl√ºsselungs- und Hash-Algorithmen verwenden?</p><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/EtM.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/EtM.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/EtM.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>Encrypt-then-MAC (EtM) https://en.wikipedia.org/wiki/Authenticated_encryption (Datum: 08.04.2023)</small></b></center></caption></picture></p><hr><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/EaM.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/EaM.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/EaM.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>Encrypt-and-MAC (E-and-M) https://en.wikipedia.org/wiki/Authenticated_encryption (Datum: 08.04.2023)</small></b></center></caption></picture></p><hr><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/MtE.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/MtE.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/MtE.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>MAC-then-Encrypt (MtE) https://en.wikipedia.org/wiki/Authenticated_encryption (Datum: 08.04.2023)</small></b></center></caption></picture></p><ul><li><p>Laut EtM, dem ersten Ansatz, werden die Daten zuerst verschl√ºsselt, dann als Ergebnis des Digests mit einem anderen Schl√ºssel verschl√ºsselt und das resultierende Ergebnis in Bl√∂cken zusammen gesendet. Wenn wir uns reale L√∂sungen ansehen, die es verwenden, f√§llt uns zuerst das IPSec-Protokoll ein. Dies ist die einzige Methode, die die h√∂chste Sicherheitsdefinition in AE erreichen kann, dies kann jedoch nur erreicht werden, wenn der verwendete MAC-Algorithmus frei von Korruption ist oder noch nicht geknackt wurde. F√ºr SSHv2 sind auch verschiedene EtM-Cipher-Suites verf√ºgbar. Beachten Sie jedoch, dass f√ºr Daten und Digest eine Schl√ºsseltrennung zwingend erforderlich ist (f√ºr Verschl√ºsselung und Schl√ºssel-Hashing m√ºssen unterschiedliche Schl√ºssel verwendet werden), da Sie sonst je nach verwendeter Verschl√ºsselungsmethode und Hash-Funktion m√∂glicherweise ein unsicheres Ergebnis erhalten.</p></li><li><p>Gem√§√ü dem zweiten Ansatz, E&amp;M, werden Klartextdaten verschl√ºsselt und daneben wird eine Zusammenfassung des Verschl√ºsselungszustands der Klartextdaten hinzugef√ºgt. Obwohl hier nur ein Schl√ºssel verwendet wird, zeigt die Tatsache, dass zwei unterschiedliche Ergebnisse (Verschl√ºsselungsergebnis und Digest-Ergebnis) f√ºr dieselben Daten vorliegen, deutlich, dass die Sicherheit nicht gut genug ist. Als reale L√∂sung mit diesem System k√∂nnen wir die ersten Versionen von SSH als Beispiel anf√ºhren. Um dies zu verbessern, wurden Methoden wie das Verschl√ºsseln der gesendeten Zusammenfassungsdatei mit demselben Schl√ºssel ausprobiert.</p></li><li><p>Laut MtE, dem dritten und letzten mir bekannten Ansatz, wird eine Zusammenfassungsdatei auf Basis von Klartext generiert. Dann werden der Klartext und die Digest-Datei zusammen mit dem Schl√ºssel verschl√ºsselt. Der Chiffretext und die Chiffretextdatei werden zusammen gesendet. Wenn wir uns reale L√∂sungen ansehen, die es verwenden, sind das in erster Linie SSL/TLS-Implementierungen. Wir alle wissen, wie zuverl√§ssig und nachhaltig SSL/TLS-Anwendungen an sich sind. Dar√ºber hinaus wurden im Laufe der Jahre Verbesserungen wie <code>MAC-then-pad-then-encrypt</code> vorgenommen, um die Sicherheit zu erh√∂hen. Gem√§√ü dieser Verbesserung wird zuerst der Klartext verdaut, dann auf die Blockgr√∂√üe aufgef√ºllt und dann die Verschl√ºsselung durchgef√ºhrt. Dies f√ºhrt zu einem noch zuverl√§ssigeren Verschl√ºsselungsergebnis. Aber es gibt F√§lle, in denen der Padding-Mechanismus Angriffe wie Padding Oracle verursacht, wenn er bestimmte Fehler macht.</p></li></ul><p><picture><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TAP-TUN.avif type=image/avif><source srcset=https://wiseweb-works.github.io/images/openvpn-full/TAP-TUN.webp type=image/webp><img src=https://wiseweb-works.github.io/images/openvpn-full/TAP-TUN.png loading=lazy decoding=async width=min(100%, 720px) height=auto><caption><center><b><small>https://community.openvpn.net/openvpn/wiki/Gigabit_Networks_Linux (Datum: 08.04.2023)</small></b></center></caption></picture></p><p>Nach der Auswahl des zu verwendenden AEAD-Ansatzes wird je nach Verwendung von TAP oder TUN der in der obigen Grafik dargestellte Weg beschritten. Gem√§√ü diesem Pfad geht die im Benutzerbereich ausgef√ºhrte/gew√ºnschte Aktion zu den TAP/TUN-Adaptern auf Kernel-Ebene. Da sich diese Adapter auf der Kernel-Ebene befinden, arbeiten sie sehr schnell. Dann f√ºhren die virtuellen Adapter die notwendige Verschl√ºsselung mit der entsprechenden Bibliothek durch, f√ºgen ggf. den Digest hinzu und stellen die Paketgr√∂√üe ein. Dann sendet der Server Pakete sequentiell √ºber die Ethernet-Schnittstelle an die Ethernet-Schnittstelle des Clients. Der Client, der es erh√§lt, konfiguriert die Pakete neu, organisiert sie, kombiniert sie bei Bedarf und entschl√ºsselt sie mit den erforderlichen Bibliotheken. Nach der Entschl√ºsselung √ºbertr√§gt es den Client √ºber den virtuellen Adapter an den Endbenutzer. Als Ergebnis all dieser mathematischen Operationen und Bem√ºhungen erreichte der Benutzer also nach einigen Zyklen den gew√ºnschten Inhalt. Es ist ziemlich lang zu erkl√§ren, aber sehr einfach zu bedienen, liebe Leser. Sie m√ºssen nur die entsprechende <a href=https://github.com/wiseweb-works/openvpn-most-secure-install/>Skriptseite</a> auf meiner GitHub-Seite besuchen. Das zugeh√∂rige Skript nimmt all diese Anpassungen interaktiv f√ºr Sie vor. Alles, was Sie tun m√ºssen, ist sich zur√ºckzulehnen und zu genie√üen.</p><h1 id=faq-und-ende>FAQ und Ende<a hidden class=anchor aria-hidden=true href=#faq-und-ende>#</a></h1><p>Erhielt mich per <a href=mailto:wisewebworks@outlook.com>Mail</a>, <a href=https://fosstodon.org/@wise>Fosstodon</a> oder <a href=https://github.com/wiseweb-works>GitHub</a> I werde versuchen, hier von Zeit zu Zeit Fragen hinzuzuf√ºgen. So kommen Sie historisch gesehen direkt zum Ergebnis, ohne dar√ºber nachzudenken, welche Art von Fragen zu welchem ‚Äã‚ÄãZeitpunkt aufgetreten sind oder ob es eine L√∂sung gibt. Abgesehen davon, wenn es Fragen gibt, die einer zus√§tzlichen Erkl√§rung bed√ºrfen, ohne das technische Dokument zu √§ndern, denke ich, sie in diesen Abschnitt aufzunehmen.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wiseweb-works.github.io/blog/de/tags/linux/>linux</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/ssl/>ssl</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/security/>security</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/ecc/>ecc</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/elliptic-curve/>elliptic curve</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/openvpn/>openvpn</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/tls/>tls</a></li><li><a href=https://wiseweb-works.github.io/blog/de/tags/aes/>aes</a></li></ul><nav class=paginav><a class=next href=https://wiseweb-works.github.io/blog/de/post/ecc-ssl-sertifikasi/><span class=title>N√§chste ¬ª</span><br><span>Generieren eines ECC-SSL-Zertifikats auf einem Linux-Server</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://wiseweb-works.github.io/blog/de/>Wise</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Kopieren";function s(){t.innerHTML="Kopiert!",setTimeout(()=>{t.innerHTML="Kopieren"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
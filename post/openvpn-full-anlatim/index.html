<!doctype html><html lang=tr dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OpenVPN Derinlemesine AnlatÄ±m | Wise</title>
<meta name=keywords content="linux,ssl,security,ecc,elliptic curve,openvpn,tls,aes"><meta name=description content="GiriÅŸ ve Ã–zet BugÃ¼n sizlerle kendi bence son zamanlarÄ±n en Ã¶nemli yazÄ±lÄ±mlarÄ±ndan olan OpenVPN ile ilgili derinlemesine bir inceleme yapacaÄŸÄ±z. Bu incelememizde Ã¶ncelikle OpenVPN&rsquo;in ne iÃ§in kullanÄ±ldÄ±ÄŸÄ±ndan bahsedeceÄŸiz. ArdÄ±ndan programÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in nelere ihtiyaÃ§ duyduÄŸumuzu ve ilk Ã§alÄ±ÅŸtÄ±rma Ã¶ncesi yapÄ±lmasÄ± gerekenleri inceleyeceÄŸiz. Son olarak da baÄŸlantÄ±nÄ±n baÅŸlatÄ±ldÄ±ÄŸÄ± ilk andan verinin Ã§Ã¶zÃ¼ldÃ¼ÄŸÃ¼ son adÄ±ma kadar nelerin arka planda dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ anlatmaya Ã§alÄ±ÅŸacaÄŸÄ±m. DolayÄ±sÄ±yla yazÄ±mÄ±z tahminimce 3 bÃ¶lÃ¼m ve gerekirse bir de soru-cevap bÃ¶lÃ¼mÃ¼nden oluÅŸacak."><meta name=author content="Wise"><link rel=canonical href=https://wiseweb-works.github.io/blog/post/openvpn-full-anlatim/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.1dc5045524874cb6405eec9368359dbbf2b48c56f110d6815cb53713394d9397.css integrity="sha256-HcUEVSSHTLZAXuyTaDWdu/K0jFbxENaBXLU3EzlNk5c=" rel="preload stylesheet" as=style><link rel=icon href=https://wiseweb-works.github.io/blog/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wiseweb-works.github.io/blog/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wiseweb-works.github.io/blog/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://wiseweb-works.github.io/blog/favicons/apple-touch-icon.png><link rel=mask-icon href=https://wiseweb-works.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=tr href=https://wiseweb-works.github.io/blog/post/openvpn-full-anlatim/><link rel=alternate hreflang=en href=https://wiseweb-works.github.io/blog/en/post/openvpn-full-anlatim/><link rel=alternate hreflang=de href=https://wiseweb-works.github.io/blog/de/post/openvpn-full-anlatim/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="OpenVPN Derinlemesine AnlatÄ±m"><meta property="og:description" content="GiriÅŸ ve Ã–zet BugÃ¼n sizlerle kendi bence son zamanlarÄ±n en Ã¶nemli yazÄ±lÄ±mlarÄ±ndan olan OpenVPN ile ilgili derinlemesine bir inceleme yapacaÄŸÄ±z. Bu incelememizde Ã¶ncelikle OpenVPN&rsquo;in ne iÃ§in kullanÄ±ldÄ±ÄŸÄ±ndan bahsedeceÄŸiz. ArdÄ±ndan programÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in nelere ihtiyaÃ§ duyduÄŸumuzu ve ilk Ã§alÄ±ÅŸtÄ±rma Ã¶ncesi yapÄ±lmasÄ± gerekenleri inceleyeceÄŸiz. Son olarak da baÄŸlantÄ±nÄ±n baÅŸlatÄ±ldÄ±ÄŸÄ± ilk andan verinin Ã§Ã¶zÃ¼ldÃ¼ÄŸÃ¼ son adÄ±ma kadar nelerin arka planda dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ anlatmaya Ã§alÄ±ÅŸacaÄŸÄ±m. DolayÄ±sÄ±yla yazÄ±mÄ±z tahminimce 3 bÃ¶lÃ¼m ve gerekirse bir de soru-cevap bÃ¶lÃ¼mÃ¼nden oluÅŸacak."><meta property="og:type" content="article"><meta property="og:url" content="https://wiseweb-works.github.io/blog/post/openvpn-full-anlatim/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-27T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-11T02:43:18+02:00"><meta property="og:site_name" content="Wise Web Works"><meta name=twitter:card content="summary"><meta name=twitter:title content="OpenVPN Derinlemesine AnlatÄ±m"><meta name=twitter:description content="GiriÅŸ ve Ã–zet BugÃ¼n sizlerle kendi bence son zamanlarÄ±n en Ã¶nemli yazÄ±lÄ±mlarÄ±ndan olan OpenVPN ile ilgili derinlemesine bir inceleme yapacaÄŸÄ±z. Bu incelememizde Ã¶ncelikle OpenVPN&rsquo;in ne iÃ§in kullanÄ±ldÄ±ÄŸÄ±ndan bahsedeceÄŸiz. ArdÄ±ndan programÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in nelere ihtiyaÃ§ duyduÄŸumuzu ve ilk Ã§alÄ±ÅŸtÄ±rma Ã¶ncesi yapÄ±lmasÄ± gerekenleri inceleyeceÄŸiz. Son olarak da baÄŸlantÄ±nÄ±n baÅŸlatÄ±ldÄ±ÄŸÄ± ilk andan verinin Ã§Ã¶zÃ¼ldÃ¼ÄŸÃ¼ son adÄ±ma kadar nelerin arka planda dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ anlatmaya Ã§alÄ±ÅŸacaÄŸÄ±m. DolayÄ±sÄ±yla yazÄ±mÄ±z tahminimce 3 bÃ¶lÃ¼m ve gerekirse bir de soru-cevap bÃ¶lÃ¼mÃ¼nden oluÅŸacak."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wiseweb-works.github.io/blog/post/"},{"@type":"ListItem","position":2,"name":"OpenVPN Derinlemesine AnlatÄ±m","item":"https://wiseweb-works.github.io/blog/post/openvpn-full-anlatim/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OpenVPN Derinlemesine AnlatÄ±m","name":"OpenVPN Derinlemesine AnlatÄ±m","description":"GiriÅŸ ve Ã–zet BugÃ¼n sizlerle kendi bence son zamanlarÄ±n en Ã¶nemli yazÄ±lÄ±mlarÄ±ndan olan OpenVPN ile ilgili derinlemesine bir inceleme yapacaÄŸÄ±z. Bu incelememizde Ã¶ncelikle OpenVPN\u0026rsquo;in ne iÃ§in kullanÄ±ldÄ±ÄŸÄ±ndan bahsedeceÄŸiz. ArdÄ±ndan programÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in nelere ihtiyaÃ§ duyduÄŸumuzu ve ilk Ã§alÄ±ÅŸtÄ±rma Ã¶ncesi yapÄ±lmasÄ± gerekenleri inceleyeceÄŸiz. Son olarak da baÄŸlantÄ±nÄ±n baÅŸlatÄ±ldÄ±ÄŸÄ± ilk andan verinin Ã§Ã¶zÃ¼ldÃ¼ÄŸÃ¼ son adÄ±ma kadar nelerin arka planda dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ anlatmaya Ã§alÄ±ÅŸacaÄŸÄ±m. DolayÄ±sÄ±yla yazÄ±mÄ±z tahminimce 3 bÃ¶lÃ¼m ve gerekirse bir de soru-cevap bÃ¶lÃ¼mÃ¼nden oluÅŸacak.","keywords":["linux","ssl","security","ecc","elliptic curve","openvpn","tls","aes"],"articleBody":"GiriÅŸ ve Ã–zet BugÃ¼n sizlerle kendi bence son zamanlarÄ±n en Ã¶nemli yazÄ±lÄ±mlarÄ±ndan olan OpenVPN ile ilgili derinlemesine bir inceleme yapacaÄŸÄ±z. Bu incelememizde Ã¶ncelikle OpenVPNâ€™in ne iÃ§in kullanÄ±ldÄ±ÄŸÄ±ndan bahsedeceÄŸiz. ArdÄ±ndan programÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in nelere ihtiyaÃ§ duyduÄŸumuzu ve ilk Ã§alÄ±ÅŸtÄ±rma Ã¶ncesi yapÄ±lmasÄ± gerekenleri inceleyeceÄŸiz. Son olarak da baÄŸlantÄ±nÄ±n baÅŸlatÄ±ldÄ±ÄŸÄ± ilk andan verinin Ã§Ã¶zÃ¼ldÃ¼ÄŸÃ¼ son adÄ±ma kadar nelerin arka planda dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ anlatmaya Ã§alÄ±ÅŸacaÄŸÄ±m. DolayÄ±sÄ±yla yazÄ±mÄ±z tahminimce 3 bÃ¶lÃ¼m ve gerekirse bir de soru-cevap bÃ¶lÃ¼mÃ¼nden oluÅŸacak. Åimdi kemerlerimizi baÄŸlayalÄ±m ve internetin derin ve kasvetli dÃ¼nyasÄ±nda bir geziye Ã§Ä±kalÄ±m.\nOpenVPN nedir ve ne iÃ§in kullanÄ±lÄ±yor ? GÃ¼nÃ¼mÃ¼zde artÄ±k internet Ã¼zerinden yapÄ±lmayan bir iÅŸ neredeyse kalmadÄ±. Hatta normalde internet Ã¼zerinden olmayan Ã§alÄ±ÅŸma eylemimiz bile pandemi ve yeni normal nedeniyle evden Ã§alÄ±ÅŸmaya doÄŸru evrildi. Fakat hem alÄ±ÅŸÄ±k olmadÄ±ÄŸÄ±mÄ±z bir Ã§alÄ±ÅŸma yÃ¶ntemi olmasÄ± nedeniyle hem de insanlarÄ±mÄ±zÄ±n teknoloji ile arasÄ±nÄ±n pek iyi olmamasÄ± nedeniyle bÃ¼yÃ¼k sorunlar yaÅŸandÄ±. Ä°nsanlarÄ±n evlerindeki bilgisayarlardan ofisteki bilgisayarlarÄ±na baÄŸlanmasÄ± gerektiÄŸi anlaÅŸÄ±lmadan Ã¶nce bazÄ± firmalar Ã§alÄ±ÅŸanlarÄ±n evlerine ofis bilgisayarlarÄ±nÄ± gÃ¶nderme gibi uÃ§uk fikirler buldu. Bunun ne kadar hatalÄ± bir gidiÅŸ yolu olduÄŸunu kÄ±sa sÃ¼re iÃ§inde aldÄ±klarÄ± geri dÃ¶nÃ¼ÅŸlerden Ã§ok iyi anladÄ±lar. KÄ±saca elektronik cihazlarÄ±n ofiste kalmasÄ± ve bir ÅŸekilde uzaktan gÃ¼venli ve sÃ¼rdÃ¼rÃ¼lebilir bir baÄŸlantÄ± yapÄ±lmasÄ± gerektiÄŸi sonunda kabullenildi. Kurumlar daha Ã¶nceleri de kendilerini bÃ¶yle ihtiyaÃ§lar iÃ§inde buluyordu elbette ama bu derece bÃ¼yÃ¼k Ã¶lÃ§ekli bir durum sÃ¶z konusu deÄŸildi o zamanlar. Pandemi Ã¶ncesinde PPTP, L2TP, IPSec, IKev2, SSTP ve nihayet OpenVPN gibi Ã§eÅŸitli protokoller kullanÄ±yordu. Bunlar genelde belirli uzun ve havalÄ± kelimelerin kÄ±saltmasÄ± olup temel mantÄ±klarÄ± iki veya daha fazla cihazÄ± birbirine baÄŸlamak ve aynÄ± aÄŸdaymÄ±ÅŸ gibi hareket etmelerini saÄŸlamak Ã¼zerinedir. OpenVPNâ€™den Ã¶nceki protokoller belirli zayÄ±flÄ±klarÄ±, yavaÅŸlÄ±klarÄ± ve uygulanmasÄ±yla ilgili teknik zorluklarÄ± da beraberlerinde getirdikleri iÃ§in Ã§ok bahsetmeyeceÄŸim. OpenVPN sunucu ve istemci rolÃ¼ndeki en az 2 cihazÄ±n birbirlerine baÄŸlanmasÄ± ve bunu endÃ¼stiri standartlarÄ±nÄ± karÅŸÄ±layacak ÅŸekilde yapmasÄ±na yarayan protokol ve programÄ±n adÄ±dÄ±r. Ben uzak masaÃ¼stÃ¼ programÄ± kullanÄ±yorum buna ne gerek var dediÄŸinizi duyar gibiyim. Maalesef o ve onun gibi diÄŸer tÃ¼m programlar temelde bu protokolÃ¼ kullanmak durumunda kalÄ±yorlar. En meÅŸhurlarÄ±ndan olan TeamViewer programÄ±nda kalkan simgesine veya baÄŸlantÄ± ayrÄ±ntÄ±larÄ±na bastÄ±ÄŸÄ±nÄ±z takdirde OpenVPN protokolÃ¼nÃ¼ gÃ¶rebilirsiniz.\nOpenVPN baÄŸlantÄ±sÄ± kurmak iÃ§in nelere ihtiyaÃ§ duyarÄ±z ? Ã–ncelikle hem sunucu hem de istemci (baÄŸlanacak cihaz) tarafÄ±nda OpenVPNâ€™in kurulu olmasÄ± gerekiyor. ArdÄ±ndan cihazlarÄ±n hangi ÅŸartlar altÄ±nda iletiÅŸim kuracaklarÄ±nÄ± gÃ¶sterir bir ayar (config) dosyasÄ±nÄ±n dÃ¼zenlenmesi gerekmektedir. AsÄ±l olay zaten bu config dosyasÄ±nÄ±n Ã¼retilmesi ve istemci tarafÄ±ndan kullanÄ±lmasÄ±dÄ±r. Bu config dosyasÄ± sunucu tarafÄ±ndan kullanÄ±lan server_config ve istemci tarafÄ±ndan kullanÄ±lan client_config olarak ikiye ayrÄ±lÄ±r.\nServer tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir port 1194 OpenVPN baÄŸlantÄ±sÄ±nÄ± yapmak iÃ§in kendisine hangi port Ã¼zerinden baÄŸlantÄ± talebi geleceÄŸini belirtir. proto tcp BaÄŸlantÄ±nÄ±n TCP veya UDP Ã¼zerinden yapÄ±lmasÄ± mÃ¼mkÃ¼n. SeÃ§im iÃ§in girilen ayar girdisi. dev tun TAP veya TUN arabirimi kullanÄ±labilir. Bunlar sanal arabirimlerdir. TAP layer 2 bir baÄŸlantÄ± kurarken TUN layer 3 bir baÄŸlantÄ± kurar. user nobody BaÄŸlanan kullanÄ±cÄ±larÄ±n sunucu Ã¼zerinde yetkisiz bir kullanÄ±cÄ±ya linklenmesini saÄŸlÄ±yor. group $NOGROUP BaÄŸlanan kullanÄ±cÄ±larÄ±n sunucu Ã¼zerinde grup olarak da yetkisiz bir gruba linklenmesini saÄŸlÄ±yor. persist-key Sanal arabirimin oluÅŸturulmasÄ± ve yeniden baÅŸlatÄ±lmasÄ± ile ilgili bir yetkilendirme ayarÄ± persist-tun Yine aynÄ± ÅŸekilde sanal arabirimin oluÅŸturulmasÄ± ve yeniden baÅŸlatÄ±lmasÄ± ile ilgili bir yetkilendirme ayarÄ± keepalive 10 120 KaÃ§ adet baÄŸlantÄ±nÄ±n aktif tutulacaÄŸÄ±nÄ± ve ne kadar sÃ¼re iletiÅŸim kurulmaz ise aktif baÄŸlantÄ±nÄ±n sonlandÄ±rÄ±lacaÄŸÄ± ile ilgili bir ayar ifconfig-pool-persist ipp.txt OpenVPN tarafÄ±ndan istemcilere sanal aÄŸda verilen IP adreslerinin tutulmasÄ± ve tekrar baÄŸlandÄ±klarÄ± takdirde aynÄ± adreslerin verilmesi iÃ§in bir ayar push \"dhcp-option DNS 1.1.1.1\" Sunucunun aÄŸa Ã§Ä±karken kullanmasÄ± iÃ§in bir DNS ayarÄ± compress SÄ±kÄ±ÅŸtÄ±rma seÃ§eneklerinin ayarlandÄ±ÄŸÄ± kÄ±sÄ±m dh none Diffie-Hellmanâ€™Ä±n aÃ§Ä±lÄ±p kapatÄ±lmasÄ± ile ilgili bir ayar ecdh-curve EÄŸer Elliptik EÄŸri Diffie-Hellman kullanÄ±yor iseniz yanÄ±nda seÃ§meniz gereken eÄŸrinin ayarlandÄ±ÄŸÄ± ayar dh dh.pem Diffie-Hellman kullanÄ±yor iseniz Ã¶nceden oluÅŸturmanÄ±z gereken PEM dosyasÄ±nÄ±n konumunu belirten ayar tls-crypt tls-crypt.key TLS katmanÄ±nÄ±n pre-shared master Ã¶ncesinde dahi ÅŸifrelenmesi iÃ§in gerekli ayar tls-auth tls-auth.key 0 TLS katmanÄ±nÄ±n pre-handshake aÅŸamasÄ±nda ÅŸifrelenmesinin de Ã¶tesinde taraflarÄ±n da doÄŸrulanmasÄ±nÄ± saÄŸlayan ayar crl-verify crl.pem Ãœretilen sertifikalarÄ±n revoke edilip edilmediÄŸinin CRL listesi Ã¼zerinden kontrol edilmesine yarayan ayar ca ca.crt Ãœretilen sertifikaya ait sertifika otoritesinin sertifikasÄ±nÄ±n konumunu bildiren bir ayar cert $SERVER_NAME.crt Sunucunun sertifikasÄ±nÄ±n konumunu bildiren bir ayar key $SERVER_NAME.key Sunucunun sertifikasÄ±nÄ±n yanÄ±nda yine gerekli olan asimetrik secret keyinin konumunu bildiren bir ayar auth $HMAC_ALG Veri kanalÄ± ve gerekirse tls-auth iÃ§in hangi Ã¶zet algoritmasÄ±nÄ±n kullanÄ±lacaÄŸÄ±nÄ± bildiren bir ayar cipher $CIPHER Veri kanalÄ± iÃ§in hangi ÅŸifreleme algoritmasÄ±nÄ±n kullanÄ±lacaÄŸÄ±nÄ± bildiren bir ayar ncp-ciphers $CIPHER Sunucunun kullanabileceÄŸi ÅŸifreleme algoritmalarÄ±nÄ± bildiren bir ayar tls-server Sunucunun TLS kanalÄ±nÄ± kullanmasÄ±nÄ± sÃ¶yleyen bir ayar tls-version-min 1.2 TLS kanalÄ±nda kullanÄ±lmasÄ± iÃ§in en dÃ¼ÅŸÃ¼k versiyonu bildiren bir ayar tls-cipher $CC_CIPHER Veri kanalÄ±ndan hariÃ§ TLS katmanÄ±nda da ÅŸifreleme kullanÄ±lÄ±yor bu da kontrol kanalÄ± ÅŸifrelemesini bildiren ayar client-config-dir /etc/openvpn/ccd Ä°stemci ayar dosyalarÄ±nÄ±n tutulduÄŸu konumu bildiren ayar status /var/log/openvpn/status.log Durum raporlarÄ±nÄ±n yazÄ±lacaÄŸÄ± konumu ve log dosyalarÄ±nÄ±n tutulduÄŸu konumu bildiren ayar verb 3 Verbose kelimesinin kÄ±saltÄ±lmÄ±ÅŸÄ± olan bu ayar ne kadar detaylÄ± durum raporu verileceÄŸinin ayarÄ±dÄ±r. Ä°stemci tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir client Ä°lgili cihazÄ±n istemci rolÃ¼nde olduÄŸunu belirtiyor proto tcp-client Protokol olarak TCPâ€™nin kullanÄ±lacaÄŸÄ±nÄ± bildiriyor remote $IP $PORT BaÄŸlanÄ±lacak sunucu(larÄ±n) IP adresinin ve Port numarasÄ±nÄ±n ayarladÄ±ÄŸÄ± kÄ±sÄ±m dev tun TUN/TAP arabirimlerinden hangisinin kullanÄ±lacaÄŸÄ±nÄ± ayarlÄ±yor resolv-retry infinite EÄŸer IP veya DNS nedeniyle adres Ã§Ã¶zÃ¼mlemesi gecikir ise ne kadar sÃ¼re ile bekleyeceÄŸini sÃ¶ylÃ¼yoruz nobind Lokaldeki herhangi bir adrese baÄŸlanÄ±lmamasÄ±nÄ± bildiren ayar persist-key Yeniden baÅŸlatma durumunda anahtar dosyalarÄ±nÄ±n ek bir yetkiye gerek kalmadan okunabilmesini yarar persist-tun AynÄ± ÅŸekilde yeniden baÅŸlatma durumunda TUN/TAP arabiriminin yetkiye gerek kalmadan uyandÄ±rÄ±labilmesine yarar remote-cert-tls server BaÄŸlanÄ±lan sunucunun sertifikasÄ±nÄ± TLS katmanÄ±nda doÄŸrulanmasÄ±nÄ± saÄŸlar verify-x509-name $SERVER_NAME name Sunucunun geri dÃ¶neceÄŸi sertifikasÄ±ndaki ismi ve sunucunun isminin ne olmasÄ± gerektiÄŸini bildiren komut auth $HMAC_ALG DoÄŸrulama iÃ§in hangi algoritmanÄ±n kullanÄ±lacaÄŸÄ±nÄ± bildiren komut auth-nocache Oturum aÃ§mak iÃ§in gerekli parolayÄ± Ã¶nbelleÄŸe almaz cipher $CIPHER Åifreleme iÃ§in kullanÄ±lacak algoritmayÄ± seÃ§meye yarayan komut tls-client TLS iletiÅŸimi sÄ±rasÄ±nda TLSâ€™yi etkinleÅŸtirir ve istemci rolÃ¼nÃ¼ Ã¼stlenir tls-version-min 1.2 En dÃ¼ÅŸÃ¼k TLS versiyonunu ayarlar tls-cipher $CC_CIPHER TLS kontrol kanalÄ±nda kullanÄ±lacak ÅŸifreleme algoritmasÄ±nÄ± seÃ§er ignore-unknown-option block-outside-dns Bilinmeyen DNS adreslerinin kullanÄ±lmasÄ±nÄ± engeller setenv opt block-outside-dns Windows 10 iÃ§in DNS sÄ±zÄ±ntÄ±larÄ±nÄ± engeller verb 3 Rapor verme derecesini belirler compress SÄ±kÄ±ÅŸtÄ±rma algoritmasÄ± ayarlarÄ± burada bildirilir \"/etc/openvpn/easy-rsa/pki/ca.crt\" Beklenilen sunucu sertifika otoritesi dosyasÄ±nÄ±n Hard-Coded gÃ¶mÃ¼lmesi \"/etc/openvpn/easy-rsa/pki/issued/$CLIENT.crt\" Ä°stemci sertifika dosyasÄ±nÄ±n Hard-Coded gÃ¶mÃ¼lmesi \"/etc/openvpn/easy-rsa/pki/private/$CLIENT.key\" Ä°stemci asimetrik secret keyinin Hard-Coded gÃ¶mÃ¼lmesi \"/etc/openvpn/tls-crypt.key\" TLS crypt iÃ§in key dosyasÄ±nÄ±n belirtilmesi \"/etc/openvpn/tls-auth.key\" TLS auth iÃ§in key dosyasÄ±nÄ±n belirtilmesi key-direction 1 TLS katmanÄ± ÅŸifrelenmesi iÃ§in istemci ve sunucuya rol atÄ±yor (0 ve 1 ÅŸeklinde) Bu ayarlarÄ± ve daha bir Ã§oÄŸunun ayrÄ±ntÄ±lÄ± dÃ¶kÃ¼mantasyonunu OpenVPN web sayfasÄ±nda bulabilirsiniz.\nOpenVPN baÄŸlantÄ±sÄ± kurulurken neler oluyor ? OpenVPN ile baÄŸlantÄ± kurduÄŸum her zaman kendimi YÄ±ldÄ±z Filosu planlarÄ±nÄ± kaÃ§Ä±ran R2-D2 gibi hissediyorum. Ä°nsanlar kendilerini her zaman iÃ§in derinlemesine bir inceleme iÃ§erisinde bulmak istemiyorlar ve birilerinin onlara neyin nasÄ±l dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ aÃ§Ä±klamalarÄ±nÄ± isteyebiliyorlar. Benim bu yazÄ±yÄ± kaleme alma amacÄ±mda aslÄ±nda bu soruyu kendime sormuÅŸ olmam ve cevabÄ±nÄ± almak iÃ§in Ã§ok Ã§aba sarfetmiÅŸ olmam. Sizin de bu kadar uÄŸraÅŸmanÄ±zÄ± istemem fakat size hemencecik bunu yÃ¼kle gerisini dÃ¼ÅŸÃ¼nme o iÅŸ bende de diyemem. BaÅŸta sÃ¶z verdiÄŸim gibi derinlemesine bir ÅŸekilde bu sÃ¼reci sizlere anlatacaÄŸÄ±m ve kararÄ± size bÄ±rakacaÄŸÄ±m. Bir OpenVPN baÄŸlantÄ±sÄ±nda artÄ±sÄ±yla eksisiyle (benim ÅŸu ana kadar Ã§Ã¶zebildiÄŸim ÅŸekliyle) sÃ¼reÃ§ ÅŸÃ¶yle iÅŸliyor. Ã–nce bir TCP/UDP baÄŸlantÄ±sÄ± kuruyorsunuz. TCP kullanan her uygulama gibi bir sÃ¼reÃ§ yÃ¼rÃ¼tÃ¼yorsunuz ve ardÄ±ndan TLS katmanÄ±na geÃ§iyorsunuz. TLS katmanÄ±nda el sÄ±kÄ±ÅŸma (handshake) ve bazÄ± kimlik doÄŸrulama iÅŸlemleri yapÄ±yorsunuz. Bu katmana aynÄ± zamanda kontrol kanalÄ± da deniliyor. ArdÄ±ndan belirli bir iletiÅŸim tutturulmuÅŸ oluyor ve veri kanalÄ±na geÃ§iliyor. Veri veya data kanalÄ±nda bu sefer gÃ¶nderilecek veri paketlerinin ÅŸifrelenmesi ve Ã§Ã¶zÃ¼lmesi sÃ¼reci baÅŸlÄ±yor. Bunun iÃ§in yine cihazlar birbirleri ile konuÅŸuyor ve belirli ortak ÅŸartlar altÄ±nda veriler gÃ¶nderilmeye baÅŸlanÄ±yor. KÄ±saca bu ÅŸekilde anlattÄ±ÄŸÄ±m sÃ¼recin sonunda 0â€™dan baÅŸlattÄ±ÄŸÄ±mÄ±z iletiÅŸim bize gÃ¼venli ve istediÄŸimiz ÅŸekilde verilerin ulaÅŸmasÄ± ile son buluyor veya aÃ§Ä±k tutulan baÄŸlantÄ± Ã¼zerinden bu sefer tersine bir yolla yeniden istekler iletiliyor. BÃ¶ylece iÃ§ iÃ§e borular gibi bir sistem ortaya Ã§Ä±kÄ±yor. YazÄ± iÃ§in gerekli olan tek Ã¶nemli ÅŸeyi buraya yazmak gerekirse eÄŸer:\nTLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384_P512 ÅŸeklinde olacaktÄ±r. Burada TLS girdisi kontrol kanalÄ±nÄ±n TLS katmanÄ± Ã¼zerinden yÃ¼rÃ¼tÃ¼leceÄŸini belirtir. DiÄŸer alternatifler SSL veya NULLâ€˜dur. ECDHE girdisi Elliptik Diffie-Hellman algoritmasÄ± kullanÄ±larak ilk Ã¶n-anahtarÄ±n Ã¼retileceÄŸini belirtir. DiÄŸer alternatifler DHE, DH veya kullanmamaktÄ±r. ECDSA verisi karÅŸÄ±lÄ±klÄ± kimlik doÄŸrulama ve asimetrik anahtar iÃ§in Elliptik Dijital Ä°mza SertifikasÄ± AlgoritmasÄ±nÄ±n kullanÄ±lacaÄŸÄ±nÄ± belirtir. DiÄŸer kullanÄ±labilir alternatif RSAâ€˜dÄ±r. DiÄŸerlerini saymaya gerek bile yok. AES_256_GCM veri kanalÄ±nda kullanÄ±lacak ÅŸifreleme algoritmasÄ±nÄ±n belirtir. DiÄŸer alternatifler AES-128-CBC, AES-128-GCM ve AES-256-CBCâ€˜dir SHA384 kullanÄ±lacak Ã¶zet algoritmasÄ±nÄ± belirtir. DiÄŸer alternatif SHA256â€˜dÄ±r. P512 ise kullanÄ±lacak elliptik eÄŸrinin Prime-512 adlÄ± eÄŸri olarak seÃ§ilmesini saÄŸlar. DiÄŸer alternatifler P-256 ve P-384â€˜dÃ¼r. TCP baÄŸlantÄ±sÄ±nÄ±n kurulmasÄ± sÃ¼reci Åimdi kafanÄ±zda sÃ¼recin yaklaÅŸÄ±k bir resmi oluÅŸtu ise baÅŸlangÄ±cÄ± TCP sÃ¼recinin anlatÄ±mÄ±yla yapÄ±yorum. OlayÄ±mÄ±zda bir istemci ve bir sunucunun olduÄŸunu ve baÄŸlantÄ±nÄ±n sadece bu ikisinden ibaret olduÄŸunu dÃ¼ÅŸÃ¼nelim. Ä°stemci baÄŸlanmak istediÄŸi sunucuya bir SYN (m) paketi gÃ¶nderir. Sunucu ise buna cevap olarak aynÄ± port Ã¼zerinden bir SYN (n) paketi ve ACK (m+1) paket gÃ¶nderir. Bunu alan istemci de cevap olarak ACK (n+1) ÅŸeklinde dÃ¶nÃ¼ÅŸ yapar ve 3â€™lÃ¼ TCP el sÄ±kÄ±ÅŸmasÄ± veya 3 Way TCP handshake gerÃ§ekleÅŸmiÅŸ olur. BÃ¶ylece belirtilen port Ã¼zerinden istemci ve sunucu arasÄ±nda aÃ§Ä±k bir kanalÄ±mÄ±z oluÅŸtu.\nhttps://blog.shiftasia.com/what-happen-when-access-website (EriÅŸim Tarihi: 08.04.2023) https://www.netscout.com/blog/asert/ddos-attacks-ssl-something-old-something-new (EriÅŸim Tarihi: 08.04.2023) FotoÄŸraflarda da gÃ¶rÃ¼leceÄŸi Ã¼zere eÄŸer sÃ¼reÃ§ sorunsuz iÅŸler ise 3 adÄ±mda iletiÅŸim kurulabiliyor. Fakat neden 3 adÄ±mda bu iÅŸi yapÄ±yoruz daha kÄ±sa ÅŸekilde olmaz mÄ± derseniz size (ÅŸimdilik) hayÄ±r olmaz full-duplex bir iletiÅŸim iÃ§in her iki tarafÄ±n da SYN ve ACK paketlerini gÃ¶ndermesi gerekiyor derim. Ä°leride belki farklÄ± yollarÄ±nÄ± da anlatÄ±rÄ±m ama ÅŸimdilik bÃ¶yle. Zaten iÅŸin TCP/UDP kÄ±smÄ± her zaman iÃ§in kÄ±sa ve basittir.\nTLS katmanÄ±ndaki iÅŸletilen sÃ¼reÃ§ TCP Ã¼zerinden bir iletiÅŸim kurulmasÄ±nÄ±n ardÄ±ndan yine muhabbeti baÅŸka bir aÅŸamaya taÅŸÄ±yan kiÅŸi istemci oluyor. Her zaman iÃ§in istemciler sunucudan bir ÅŸeyler talep eder veya bir cevap ister. Sunucular genel olarak kendilerine gelmeyen bir isteÄŸi cevapladÄ±ÄŸÄ± Ã§ok gÃ¶rÃ¼lmemiÅŸtir. Ã–nce talep sonra arz ilkesine gÃ¶re sÃ¼reÃ§ ilerler. Evet, taraflar TLS katmanÄ±ndalar ÅŸimdi. Ä°stemci sunucuya Ã¶nce bir merhaba diyor. Åaka deÄŸil gerÃ§ek. Ä°stemci tarafÄ±ndan gÃ¶nderilen ilk pakete Client-Hello paketi denir. Bu paketin yanÄ±nda (sÃ¼reci hÄ±zlandÄ±rmak adÄ±na) desteklediÄŸi ÅŸifreleme algoritmalarÄ±nÄ± belirten Supported-Chipers paketi, istemci tarafÄ±ndan rastgele Ã¼retilmiÅŸ bir sayÄ±, aynÄ± IP adresinde birden fazla hizmet Ã§alÄ±ÅŸtÄ±rÄ±lÄ±yor ise bir SNI sunucu adÄ± indikatÃ¶rÃ¼ ve yine gerekiyor ise oturum IDâ€™si gÃ¶nderilir. Sunucunun buna cevabÄ± ise Ã¶ncelikle kibar bir merhaba demek oluyor. Ã‡Ã¼nkÃ¼ sunucunun cevaben gÃ¶nderdiÄŸi ilk pakete de Server-Hello paketi denir. Bu paketin yanÄ±nda sunucu sertifikasÄ±nÄ±, kendi desteklediÄŸi ÅŸifreleme algoritmalarÄ±nÄ± ve seÃ§tiÄŸi algoritmayÄ± belirten Selected-Chiper paketi, kendisinin Ã¼rettiÄŸi rastgele bir sayÄ±yÄ±, gerekirse Oturum IDâ€™sini ve aynÄ± IP Ã¼zerinden birden fazla istemci baÄŸlanÄ±yor ise buna iliÅŸkin SNI benzeri bir IDâ€™yi gÃ¶nderir. Ä°stemci Ã¶ncelikle iletiÅŸime baÅŸladÄ±ÄŸÄ± tarafÄ±ndan gerÃ§ekten beklediÄŸi kiÅŸi olup olmadÄ±ÄŸÄ±nÄ± sunucu sertifikasÄ± ile doÄŸrular. AyrÄ±ca bazÄ± durumlarda da sunucu istemcinin beklediÄŸi istemcilerden biri olup olmadÄ±ÄŸÄ±nÄ± yine sertifika ile doÄŸrular. EÄŸer bu karÅŸÄ±lÄ±klÄ± doÄŸrulama (mutual-authentication) sÃ¼reci olumlu sonuÃ§lanÄ±r ise bir sonraki aÅŸamaya geÃ§ilir. Anahtar Ã¼retim ve deÄŸiÅŸim sÃ¼reci tetiklenmiÅŸ olur. Bu aÅŸamda yine istemci devreye girer ve gÃ¼vensiz Ã¶nkabul edilen bu iletiÅŸim sÄ±rasÄ±nda belirledikleri algoritma ile anahtar deÄŸiÅŸtirmek istediÄŸini sÃ¶yler. Taraflar Diffie-Hellman veya ECDHE ile bir Ã¶nanahtar oluÅŸturmaya baÅŸlarlar. Bunun iÃ§in istemci ve sunucu tarafÄ±ndan Ã¶n-sÄ±rlar paylaÅŸÄ±lÄ±r. Bir takÄ±m matematiksel iÅŸlemler yapÄ±larak bulunan cevaplar karÅŸÄ±ya gÃ¶nderilir ve tekrar matematiksel iÅŸlemler yapÄ±larak aynÄ± sonuca ulaÅŸÄ±lÄ±r. Ä°ÅŸte ulaÅŸÄ±lan sonuÃ§ aralarÄ±nda gÃ¼venli bir ÅŸekilde oluÅŸturduklarÄ± ilk Ã¶n-anahtar oluyor. Bundan sonra belirledikleri ÅŸifreleme algoritmasÄ± ile iletiÅŸime geÃ§mek iÃ§in kontrol kanalÄ±ndan hariÃ§ bir veri kanalÄ± oluÅŸturulur ve sÃ¼reÃ§ oradan devam eder.\nhttps://www.researchgate.net/publication/298065605_A_multi-level_framework_to_identify_HTTPS_services (EriÅŸim Tarihi: 08.04.2023) FotoÄŸraflarda da gÃ¶rÃ¼lebileceÄŸi Ã¼zere sÃ¼reÃ§ bir web sayfasÄ±na baÄŸlanÄ±lÄ±rken yaÅŸanan sÃ¼reÃ§le neredeyse aynÄ±. Sadece ihtiyaÃ§lara gÃ¶re belirli aÅŸamalar ekleniyor, Ã§Ä±karÄ±lÄ±yor veya deÄŸiÅŸtiriliyor. Ã–rneÄŸin Ä°leri Seviye Gizlilik anlamÄ±na gelen PFS gereÄŸince taraflar Ã¶n-anahtarÄ± sunucunun asimetrik anahtarÄ± ile iletmiyor. Ã‡Ã¼nkÃ¼ bu durumda her oturum iÃ§in aynÄ± anahtar kullanÄ±lacaÄŸÄ± iÃ§in verilerin depolanÄ±p daha sonra anahtar aÃ§Ä±ÄŸa Ã§Ä±ktÄ±ÄŸÄ± bir gÃ¼n beklenerek veriler geÃ§miÅŸe dÃ¶nÃ¼k okunabilir bir hale gelecektir. Bu yÃ¼zden bu deÄŸiÅŸiklik yapÄ±ldÄ±. Yine sÄ±fÄ±r gÃ¼ven tehdit modeli gereÄŸince her bir katmanÄ±n ve sÃ¼recin bir diÄŸerinin iÅŸini doÄŸru yapacaÄŸÄ±na gÃ¼venmeden sÃ¼reci ilerletmesini istiyorum. Bu yÃ¼zden TLS katmanÄ±ndaki o ilk iletiÅŸim anÄ±nda dahi paketlerin tls-auth Ã¶zelliÄŸi gereÄŸince ÅŸifrelenmesini ve gelen-giden verilerin bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼n doÄŸrulanmasÄ±nÄ± istiyoruz. Daha ilk merhaba dediÄŸiniz andan itibaren Ã¼Ã§Ã¼ncÃ¼ kiÅŸiler sizin ne konuÅŸtuÄŸunuzu hangi aÅŸamada olduÄŸunuzu anlayamayacaklardÄ±r. Bunun iÃ§in Ã¶nceden belirlenmiÅŸ bir anahtar/anahtarlar ile ilk iletiÅŸim baÅŸlatÄ±lÄ±r ve gerekirse belirli aralÄ±klarla bu anahtarlar yenilenir. BÃ¶ylece TLS katmanÄ±nda ilk Ã¶n-anahtar oluÅŸturulana kadar dahi gizlilikten Ã¶dÃ¼n verilmemiÅŸ ve yetkisiz kiÅŸilerce boÅŸuna tarafik yaratÄ±lmamÄ±ÅŸ olur.\nVeri katmanÄ±nda iÅŸleyen sÃ¼reÃ§ EÄŸer tÃ¼m bu sÃ¼reÃ§ baÅŸarÄ±lÄ± bir ÅŸekilde tamamlanmÄ±ÅŸ ve veri kanalÄ±na geÃ§ilebildiyse eÄŸer artÄ±k iÅŸin en gÃ¼zel kÄ±smÄ±na gelmiÅŸ bulunuyorsunuz. Veriler AES ÅŸifreleme methodu ile ÅŸifrelenecek. Åifreleme sÄ±rasÄ±nda seÃ§iminize gÃ¶re CBC-GCM counter moduna gÃ¶re tablolar karÄ±ÅŸtÄ±rÄ±lacak ve bu sÃ¼reÃ§te seÃ§iminize gÃ¶re 128 veya 256 bit uzunluÄŸunda ÅŸifreleme anahtarÄ± kullanÄ±lacak. Tabi ne hangisini seÃ§erseniz seÃ§in ÅŸifreleme blok uzunluÄŸu 128 bit olucak. DeÄŸiÅŸen sadece ÅŸifreleme anahtarÄ± uzunluÄŸu. Benim bu anlatÄ±mÄ±m iÃ§in seÃ§miÅŸ olduÄŸum AES-256-GCM bir AEAD ÅŸifreleme tÃ¼rÃ¼dÃ¼r. DiÄŸer kanallardan ve sÃ¼reÃ§lerden baÄŸÄ±msÄ±z olarak gÃ¶nderdiÄŸi verileri belirli bir aÅŸamada Ã¶zetini Ã§Ä±kartÄ±r ve Ã¶zeti ile birlikte gÃ¶nderir. BÃ¶ylece â€˜Authentication Encryption with associated dataâ€™ anlamÄ±na gelen AEADâ€™de doÄŸrulama ve ÅŸifreleme iÅŸlevleri yerine getirilmiÅŸ oluyor. Burada bir ayrÄ±ma gidilmesini gerektirecek ÅŸÃ¶yle bir sorun mevcuttur. Åifreleme ve Ã–zet alma algoritmalarÄ±nÄ± hangi aÅŸamada ve sÄ±rayla kullanacaÄŸÄ±z.\nEncrypt-then-MAC (EtM) Encrypt-and-MAC (E-and-M) MAC-then-Encrypt (MtE) https://en.wikipedia.org/wiki/Authenticated_encryption (EriÅŸim Tarihi: 08.04.2023)\nBirinci yaklaÅŸÄ±m olan EtMâ€™ye gÃ¶re veri Ã¶nce ÅŸifrelenir ardÄ±ndan baÅŸka bir anahtar ile Ã¶zeti sonucu ÅŸifrelenir ve ortaya Ã§Ä±kan sonuÃ§ bloklar halinde birlikte gÃ¶nderilir. Bunu kullanan gerÃ§ek dÃ¼nya Ã§Ã¶zÃ¼mlerine bakacak olursak IPSec protokolÃ¼ ilk akla gelen olacaktÄ±r. Bu, AEâ€™de en yÃ¼ksek gÃ¼venlik tanÄ±mÄ±na ulaÅŸabilen tek yÃ¶ntemdir, ancak bu ancak kullanÄ±lan MAC algoritmasÄ±nÄ±n bozulma iÃ§ermediÄŸi veya henÃ¼z kÄ±rÄ±lmadÄ±ÄŸÄ± takdirde elde edilebilir. SSHv2 iÃ§in de Ã§eÅŸitli EtM ÅŸifre takÄ±mlarÄ± mevcuttur. Ancak veri ve Ã¶zet iÃ§in anahtar ayrÄ±mÄ±nÄ±n zorunlu olduÄŸunu unutmayÄ±n (ÅŸifreleme ve anahtarlÄ± karma iÃ§in farklÄ± anahtarlar kullanÄ±lmalÄ±dÄ±r), aksi takdirde kullanÄ±lan belirli ÅŸifreleme yÃ¶ntemine ve karma iÅŸlevine baÄŸlÄ± olarak potansiyel olarak gÃ¼vensiz bir sonuÃ§ elde edebilirsiniz.\nÄ°kinci yaklaÅŸÄ±m olan E\u0026Mâ€™ye gÃ¶re dÃ¼z metin olan veri ÅŸifrelenir ve yanÄ±na dÃ¼z metin verinin ÅŸifrelenmemiz halinin Ã¶zeti eklenir. Burada sadece bir anahtar kullanÄ±lmÄ±ÅŸ olmasÄ±na raÄŸmen aynÄ± veriye ait iki farklÄ± sonucun (ÅŸifreleme sonucu ve Ã¶zet sonucu) olmasÄ± gÃ¼venliÄŸin yeterince iyi olmadÄ±ÄŸÄ±nÄ± aÃ§Ä±kca gÃ¶zler Ã¶nÃ¼ne sermektedir. Bu sistemi kullanan gerÃ§ek dÃ¼nya Ã§Ã¶zÃ¼mÃ¼ olarak SSHâ€™Ä±n ilk versiyonlarÄ±nÄ± Ã¶rnek gÃ¶sterebiliriz. Bunu geliÅŸtirmek iÃ§in ayrÄ±ca gÃ¶nderilen Ã¶zet dosyasÄ±nÄ± da aynÄ± anahtar ile ÅŸifreleme gibi yÃ¶ntemler denenmiÅŸtir.\nÃœÃ§Ã¼ncÃ¼ ve bildiÄŸim son yaklaÅŸÄ±m olan MtEâ€™ye gÃ¶re dÃ¼z metine dayalÄ± olarak bir Ã¶zet dosyasÄ± Ã¼retilir. ArdÄ±ndan dÃ¼z metin ve Ã¶zet dosyasÄ± birlikteyken anahtar ile ÅŸifrelenir. Åifreli metin ve ÅŸifreli Ã¶zet dosyasÄ± birlikte gÃ¶nderilir. Bunu kullanan gerÃ§ek dÃ¼nya Ã§Ã¶zÃ¼mlerine bakacak olursak ilk ve en Ã¶nemlisi SSL/TLS uygulamalarÄ±dÄ±r. SSL/TLS uygulamalarÄ±nÄ±n kendi iÃ§lerinde ne kadar gÃ¼venilir ve sÃ¼rdÃ¼rÃ¼lebilir olduklarÄ±nÄ± hepimiz biliyoruz. Bunun Ã¶tesinde de gÃ¼venliÄŸi artÄ±rmak adÄ±na yÄ±llar iÃ§ersinde MAC-then-pad-then-encrypt gibi geliÅŸtirmeler yapÄ±ldÄ±. Bu geliÅŸtirmeye gÃ¶re Ã¶nce dÃ¼z metinin Ã¶zeti alÄ±nÄ±r ardÄ±ndan blok boyutuna kadar doldurulur ve ardÄ±ndan ÅŸifreleme iÅŸlemi yapÄ±lÄ±r. BÃ¶ylece daha da gÃ¼venilir bir ÅŸifreleme sonucu oluÅŸur. Ama doldurma mekanizmasÄ±nÄ±n belirli hatalar yapmasÄ± durumunda Padding Oracle gibi saldÄ±rÄ±lara neden olduÄŸu durumlar mevcuttur.\nhttps://community.openvpn.net/openvpn/wiki/Gigabit_Networks_Linux (EriÅŸim Tarihi: 08.04.2023) KullanÄ±lacak AEAD yaklaÅŸÄ±mÄ± da seÃ§ildikten sonra TAP veya TUN kullanÄ±mÄ±na gÃ¶re yukarÄ±daki grafikte gÃ¶rÃ¼len yol izlenir. Bu yola gÃ¶re kullanÄ±cÄ± alanÄ±nda yapÄ±lan/yapÄ±lmak istenen eylem Ã§ekirdek (kernel) seviyesinde TAP/TUN adaptÃ¶rlerine gider. Bu adaptÃ¶rler Ã§ekirdek seviyesinde bulunmalarÄ± nedeniyle Ã§ok hÄ±zlÄ± bir ÅŸekilde iÅŸlem yaparlar. ArdÄ±ndan sanal adaptÃ¶rler ilgili kÃ¼tÃ¼phane ile gerekli ÅŸifrelemeyi yapar, gerekirse Ã¶zeti ekler ve paket boyutu ayarÄ± yapar. ArdÄ±ndan sunucu Ethernet arayÃ¼zÃ¼ Ã¼zerinden istemcinin Ethernet arayÃ¼zÃ¼ne paketleri sÄ±rayla gÃ¶nderir. Bunu alan istemci ise paketleri yeniden ayarlar, dÃ¼zenler gerekirse birleÅŸtirir ve gerekli kÃ¼tÃ¼phaneler ile ÅŸifresini Ã§Ã¶zer. Åifresini Ã§Ã¶zdÃ¼kten sonra bunu sanal adaptÃ¶r aracÄ±lÄ±ÄŸÄ± ile istemcini son kullanÄ±cÄ±sÄ±na iletir. BÃ¶ylece tÃ¼m bu matematiksel iÅŸlemler, uÄŸraÅŸlar sonucunda birkaÃ§ Ã§evrim neticesinde kullanÄ±cÄ± istediÄŸi iÃ§eriÄŸe ulaÅŸmÄ±ÅŸ oldu. AnlatmasÄ± oldukÃ§a uzun ama kullanmasÄ± Ã§ok kolay sevgili okuyucular. Sadece GitHub sayfama girik ilgili script sayfasÄ±nÄ± ziyaret etmeniz yeterlidir. Ä°lgili script tÃ¼m bu ayarlamalarÄ± interaktif olarak sizin yerinize yapmaktadÄ±r. Size de arkanÄ±za yaslanÄ±p keyfini Ã§Ä±karmak kalÄ±yor.\nSSS ve Son Bana mail yoluyla, Fosstodon Ã¼zerinden veya GitHub Ã¼zerinden gelen sorularÄ± zaman zaman buraya eklemeye Ã§alÄ±ÅŸacaÄŸÄ±m. BÃ¶ylece tarihsel olarak da hangi tarihte ne gibi sorular olmuÅŸ veya Ã§Ã¶zÃ¼mÃ¼ mevcut mu gibi dÃ¼ÅŸÃ¼ncelere kapÄ±lmadan direk sonuca ulaÅŸabileceksiniz. Bunun haricinde de teknik dÃ¶kÃ¼manÄ± deÄŸiÅŸtirmeden ekstra aÃ§Ä±klama gerektiren sorular gelirse onlarÄ± da bu kÄ±sma almayÄ± dÃ¼ÅŸÃ¼nÃ¼yorum.\n","wordCount":"2650","inLanguage":"tr","datePublished":"2022-03-27T00:00:00Z","dateModified":"2023-04-11T02:43:18+02:00","author":{"@type":"Person","name":"Wise"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wiseweb-works.github.io/blog/post/openvpn-full-anlatim/"},"publisher":{"@type":"Organization","name":"Wise","logo":{"@type":"ImageObject","url":"https://wiseweb-works.github.io/blog/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wiseweb-works.github.io/blog/ accesskey=h title="Wise (Alt + H)">Wise</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://wiseweb-works.github.io/blog/en/ title=English aria-label=:gb:>ğŸ‡¬ğŸ‡§</a></li><li><a href=https://wiseweb-works.github.io/blog/de/ title=Deutsch aria-label=:de:>ğŸ‡©ğŸ‡ª</a></li></ul></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>OpenVPN Derinlemesine AnlatÄ±m</h1><div class=post-meta><span title='2022-03-27 00:00:00 +0000 UTC'>27 Mart, 2022</span>&nbsp;Â·&nbsp;<span title='2023-04-11 02:43:18 +0200 +0200'>(Updated 11 Nisan, 2023)</span>&nbsp;Â·&nbsp;13 dk&nbsp;Â·&nbsp;2650 kelime&nbsp;Â·&nbsp;Wise&nbsp;|&nbsp;Ã‡eviriler:<ul class=i18n_list><li><a href=https://wiseweb-works.github.io/blog/en/post/openvpn-full-anlatim/>ğŸ‡¬ğŸ‡§</a></li><li><a href=https://wiseweb-works.github.io/blog/de/post/openvpn-full-anlatim/>ğŸ‡©ğŸ‡ª</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/wiseweb-works/blog/tree/master/content/post/openvpn-full-anlatim.md rel="noopener noreferrer" target=_blank>DÃ¼zenle</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Ä°Ã§indekiler</span></summary><div class=inner><ul><li><a href=#giri%c5%9f-ve-%c3%b6zet aria-label="GiriÅŸ ve Ã–zet">GiriÅŸ ve Ã–zet</a><ul><li><a href=#openvpn-nedir-ve-ne-i%c3%a7in-kullan%c4%b1l%c4%b1yor- aria-label="OpenVPN nedir ve ne iÃ§in kullanÄ±lÄ±yor ?">OpenVPN nedir ve ne iÃ§in kullanÄ±lÄ±yor ?</a></li><li><a href=#openvpn-ba%c4%9flant%c4%b1s%c4%b1-kurmak-i%c3%a7in-nelere-ihtiya%c3%a7-duyar%c4%b1z- aria-label="OpenVPN baÄŸlantÄ±sÄ± kurmak iÃ§in nelere ihtiyaÃ§ duyarÄ±z ?">OpenVPN baÄŸlantÄ±sÄ± kurmak iÃ§in nelere ihtiyaÃ§ duyarÄ±z ?</a><ul><li><a href=#server-taraf%c4%b1nda-tutulan-ayar-dosyas%c4%b1-%c5%9fu-girdileri-i%c3%a7ermektedir aria-label="Server tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir">Server tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir</a></li><li><a href=#istemci-taraf%c4%b1nda-tutulan-ayar-dosyas%c4%b1-%c5%9fu-girdileri-i%c3%a7ermektedir aria-label="Ä°stemci tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir">Ä°stemci tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir</a></li></ul></li><li><a href=#openvpn-ba%c4%9flant%c4%b1s%c4%b1-kurulurken-neler-oluyor- aria-label="OpenVPN baÄŸlantÄ±sÄ± kurulurken neler oluyor ?">OpenVPN baÄŸlantÄ±sÄ± kurulurken neler oluyor ?</a><ul><li><a href=#tcp-ba%c4%9flant%c4%b1s%c4%b1n%c4%b1n-kurulmas%c4%b1-s%c3%bcreci aria-label="TCP baÄŸlantÄ±sÄ±nÄ±n kurulmasÄ± sÃ¼reci">TCP baÄŸlantÄ±sÄ±nÄ±n kurulmasÄ± sÃ¼reci</a></li><li><a href=#tls-katman%c4%b1ndaki-i%c5%9fletilen-s%c3%bcre%c3%a7 aria-label="TLS katmanÄ±ndaki iÅŸletilen sÃ¼reÃ§">TLS katmanÄ±ndaki iÅŸletilen sÃ¼reÃ§</a></li><li><a href=#veri-katman%c4%b1nda-i%c5%9fleyen-s%c3%bcre%c3%a7 aria-label="Veri katmanÄ±nda iÅŸleyen sÃ¼reÃ§">Veri katmanÄ±nda iÅŸleyen sÃ¼reÃ§</a></li></ul></li></ul></li><li><a href=#sss-ve-son aria-label="SSS ve Son">SSS ve Son</a></li></ul></div></details></div><div class=post-content><h1 id=giriÅŸ-ve-Ã¶zet>GiriÅŸ ve Ã–zet<a hidden class=anchor aria-hidden=true href=#giriÅŸ-ve-Ã¶zet>#</a></h1><p>BugÃ¼n sizlerle kendi bence son zamanlarÄ±n en Ã¶nemli yazÄ±lÄ±mlarÄ±ndan olan OpenVPN ile ilgili derinlemesine bir inceleme yapacaÄŸÄ±z. Bu incelememizde Ã¶ncelikle OpenVPN&rsquo;in ne iÃ§in kullanÄ±ldÄ±ÄŸÄ±ndan bahsedeceÄŸiz. ArdÄ±ndan programÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in nelere ihtiyaÃ§ duyduÄŸumuzu ve ilk Ã§alÄ±ÅŸtÄ±rma Ã¶ncesi yapÄ±lmasÄ± gerekenleri inceleyeceÄŸiz. Son olarak da baÄŸlantÄ±nÄ±n baÅŸlatÄ±ldÄ±ÄŸÄ± ilk andan verinin Ã§Ã¶zÃ¼ldÃ¼ÄŸÃ¼ son adÄ±ma kadar nelerin arka planda dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ anlatmaya Ã§alÄ±ÅŸacaÄŸÄ±m. DolayÄ±sÄ±yla yazÄ±mÄ±z tahminimce 3 bÃ¶lÃ¼m ve gerekirse bir de soru-cevap bÃ¶lÃ¼mÃ¼nden oluÅŸacak. Åimdi kemerlerimizi baÄŸlayalÄ±m ve internetin derin ve kasvetli dÃ¼nyasÄ±nda bir geziye Ã§Ä±kalÄ±m.</p><h2 id=openvpn-nedir-ve-ne-iÃ§in-kullanÄ±lÄ±yor->OpenVPN nedir ve ne iÃ§in kullanÄ±lÄ±yor ?<a hidden class=anchor aria-hidden=true href=#openvpn-nedir-ve-ne-iÃ§in-kullanÄ±lÄ±yor->#</a></h2><p>GÃ¼nÃ¼mÃ¼zde artÄ±k internet Ã¼zerinden yapÄ±lmayan bir iÅŸ neredeyse kalmadÄ±. Hatta normalde internet Ã¼zerinden olmayan Ã§alÄ±ÅŸma eylemimiz bile pandemi ve yeni normal nedeniyle evden Ã§alÄ±ÅŸmaya doÄŸru evrildi. Fakat hem alÄ±ÅŸÄ±k olmadÄ±ÄŸÄ±mÄ±z bir Ã§alÄ±ÅŸma yÃ¶ntemi olmasÄ± nedeniyle hem de insanlarÄ±mÄ±zÄ±n teknoloji ile arasÄ±nÄ±n pek iyi olmamasÄ± nedeniyle bÃ¼yÃ¼k sorunlar yaÅŸandÄ±. Ä°nsanlarÄ±n evlerindeki bilgisayarlardan ofisteki bilgisayarlarÄ±na baÄŸlanmasÄ± gerektiÄŸi anlaÅŸÄ±lmadan Ã¶nce bazÄ± firmalar Ã§alÄ±ÅŸanlarÄ±n evlerine ofis bilgisayarlarÄ±nÄ± gÃ¶nderme gibi uÃ§uk fikirler buldu. Bunun ne kadar hatalÄ± bir gidiÅŸ yolu olduÄŸunu kÄ±sa sÃ¼re iÃ§inde aldÄ±klarÄ± geri dÃ¶nÃ¼ÅŸlerden Ã§ok iyi anladÄ±lar. KÄ±saca elektronik cihazlarÄ±n ofiste kalmasÄ± ve bir ÅŸekilde uzaktan gÃ¼venli ve sÃ¼rdÃ¼rÃ¼lebilir bir baÄŸlantÄ± yapÄ±lmasÄ± gerektiÄŸi sonunda kabullenildi. Kurumlar daha Ã¶nceleri de kendilerini bÃ¶yle ihtiyaÃ§lar iÃ§inde buluyordu elbette ama bu derece bÃ¼yÃ¼k Ã¶lÃ§ekli bir durum sÃ¶z konusu deÄŸildi o zamanlar. Pandemi Ã¶ncesinde PPTP, L2TP, IPSec, IKev2, SSTP ve nihayet OpenVPN gibi Ã§eÅŸitli protokoller kullanÄ±yordu. Bunlar genelde belirli uzun ve havalÄ± kelimelerin kÄ±saltmasÄ± olup temel mantÄ±klarÄ± iki veya daha fazla cihazÄ± birbirine baÄŸlamak ve aynÄ± aÄŸdaymÄ±ÅŸ gibi hareket etmelerini saÄŸlamak Ã¼zerinedir. OpenVPN&rsquo;den Ã¶nceki protokoller belirli zayÄ±flÄ±klarÄ±, yavaÅŸlÄ±klarÄ± ve uygulanmasÄ±yla ilgili teknik zorluklarÄ± da beraberlerinde getirdikleri iÃ§in Ã§ok bahsetmeyeceÄŸim. OpenVPN sunucu ve istemci rolÃ¼ndeki en az 2 cihazÄ±n birbirlerine baÄŸlanmasÄ± ve bunu endÃ¼stiri standartlarÄ±nÄ± karÅŸÄ±layacak ÅŸekilde yapmasÄ±na yarayan protokol ve programÄ±n adÄ±dÄ±r. Ben uzak masaÃ¼stÃ¼ programÄ± kullanÄ±yorum buna ne gerek var dediÄŸinizi duyar gibiyim. Maalesef o ve onun gibi diÄŸer tÃ¼m programlar temelde bu protokolÃ¼ kullanmak durumunda kalÄ±yorlar. En meÅŸhurlarÄ±ndan olan TeamViewer programÄ±nda kalkan simgesine veya baÄŸlantÄ± ayrÄ±ntÄ±larÄ±na bastÄ±ÄŸÄ±nÄ±z takdirde OpenVPN protokolÃ¼nÃ¼ gÃ¶rebilirsiniz.</p><h2 id=openvpn-baÄŸlantÄ±sÄ±-kurmak-iÃ§in-nelere-ihtiyaÃ§-duyarÄ±z->OpenVPN baÄŸlantÄ±sÄ± kurmak iÃ§in nelere ihtiyaÃ§ duyarÄ±z ?<a hidden class=anchor aria-hidden=true href=#openvpn-baÄŸlantÄ±sÄ±-kurmak-iÃ§in-nelere-ihtiyaÃ§-duyarÄ±z->#</a></h2><p>Ã–ncelikle hem sunucu hem de istemci (baÄŸlanacak cihaz) tarafÄ±nda OpenVPN&rsquo;in kurulu olmasÄ± gerekiyor. ArdÄ±ndan cihazlarÄ±n hangi ÅŸartlar altÄ±nda iletiÅŸim kuracaklarÄ±nÄ± gÃ¶sterir bir ayar (config) dosyasÄ±nÄ±n dÃ¼zenlenmesi gerekmektedir. AsÄ±l olay zaten bu config dosyasÄ±nÄ±n Ã¼retilmesi ve istemci tarafÄ±ndan kullanÄ±lmasÄ±dÄ±r. Bu config dosyasÄ± sunucu tarafÄ±ndan kullanÄ±lan server_config ve istemci tarafÄ±ndan kullanÄ±lan client_config olarak ikiye ayrÄ±lÄ±r.</p><h3 id=server-tarafÄ±nda-tutulan-ayar-dosyasÄ±-ÅŸu-girdileri-iÃ§ermektedir>Server tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir<a hidden class=anchor aria-hidden=true href=#server-tarafÄ±nda-tutulan-ayar-dosyasÄ±-ÅŸu-girdileri-iÃ§ermektedir>#</a></h3><ul><li><code>port 1194</code> OpenVPN baÄŸlantÄ±sÄ±nÄ± yapmak iÃ§in kendisine hangi port Ã¼zerinden baÄŸlantÄ± talebi geleceÄŸini belirtir.</li><li><code>proto tcp</code> BaÄŸlantÄ±nÄ±n TCP veya UDP Ã¼zerinden yapÄ±lmasÄ± mÃ¼mkÃ¼n. SeÃ§im iÃ§in girilen ayar girdisi.</li><li><code>dev tun</code> TAP veya TUN arabirimi kullanÄ±labilir. Bunlar sanal arabirimlerdir. TAP layer 2 bir baÄŸlantÄ± kurarken TUN layer 3 bir baÄŸlantÄ± kurar.</li><li><code>user nobody</code> BaÄŸlanan kullanÄ±cÄ±larÄ±n sunucu Ã¼zerinde yetkisiz bir kullanÄ±cÄ±ya linklenmesini saÄŸlÄ±yor.</li><li><code>group $NOGROUP</code> BaÄŸlanan kullanÄ±cÄ±larÄ±n sunucu Ã¼zerinde grup olarak da yetkisiz bir gruba linklenmesini saÄŸlÄ±yor.</li><li><code>persist-key</code> Sanal arabirimin oluÅŸturulmasÄ± ve yeniden baÅŸlatÄ±lmasÄ± ile ilgili bir yetkilendirme ayarÄ±</li><li><code>persist-tun</code> Yine aynÄ± ÅŸekilde sanal arabirimin oluÅŸturulmasÄ± ve yeniden baÅŸlatÄ±lmasÄ± ile ilgili bir yetkilendirme ayarÄ±</li><li><code>keepalive 10 120</code> KaÃ§ adet baÄŸlantÄ±nÄ±n aktif tutulacaÄŸÄ±nÄ± ve ne kadar sÃ¼re iletiÅŸim kurulmaz ise aktif baÄŸlantÄ±nÄ±n sonlandÄ±rÄ±lacaÄŸÄ± ile ilgili bir ayar</li><li><code>ifconfig-pool-persist ipp.txt</code> OpenVPN tarafÄ±ndan istemcilere sanal aÄŸda verilen IP adreslerinin tutulmasÄ± ve tekrar baÄŸlandÄ±klarÄ± takdirde aynÄ± adreslerin verilmesi iÃ§in bir ayar</li><li><code>push "dhcp-option DNS 1.1.1.1"</code> Sunucunun aÄŸa Ã§Ä±karken kullanmasÄ± iÃ§in bir DNS ayarÄ±</li><li><code>compress</code> SÄ±kÄ±ÅŸtÄ±rma seÃ§eneklerinin ayarlandÄ±ÄŸÄ± kÄ±sÄ±m</li><li><code>dh none</code> Diffie-Hellman&rsquo;Ä±n aÃ§Ä±lÄ±p kapatÄ±lmasÄ± ile ilgili bir ayar</li><li><code>ecdh-curve</code> EÄŸer Elliptik EÄŸri Diffie-Hellman kullanÄ±yor iseniz yanÄ±nda seÃ§meniz gereken eÄŸrinin ayarlandÄ±ÄŸÄ± ayar</li><li><code>dh dh.pem</code> Diffie-Hellman kullanÄ±yor iseniz Ã¶nceden oluÅŸturmanÄ±z gereken PEM dosyasÄ±nÄ±n konumunu belirten ayar</li><li><code>tls-crypt tls-crypt.key</code> TLS katmanÄ±nÄ±n pre-shared master Ã¶ncesinde dahi ÅŸifrelenmesi iÃ§in gerekli ayar</li><li><code>tls-auth tls-auth.key 0</code> TLS katmanÄ±nÄ±n pre-handshake aÅŸamasÄ±nda ÅŸifrelenmesinin de Ã¶tesinde taraflarÄ±n da doÄŸrulanmasÄ±nÄ± saÄŸlayan ayar</li><li><code>crl-verify crl.pem</code> Ãœretilen sertifikalarÄ±n revoke edilip edilmediÄŸinin CRL listesi Ã¼zerinden kontrol edilmesine yarayan ayar</li><li><code>ca ca.crt</code> Ãœretilen sertifikaya ait sertifika otoritesinin sertifikasÄ±nÄ±n konumunu bildiren bir ayar</li><li><code>cert $SERVER_NAME.crt</code> Sunucunun sertifikasÄ±nÄ±n konumunu bildiren bir ayar</li><li><code>key $SERVER_NAME.key</code> Sunucunun sertifikasÄ±nÄ±n yanÄ±nda yine gerekli olan asimetrik secret keyinin konumunu bildiren bir ayar</li><li><code>auth $HMAC_ALG</code> Veri kanalÄ± ve gerekirse <code>tls-auth</code> iÃ§in hangi Ã¶zet algoritmasÄ±nÄ±n kullanÄ±lacaÄŸÄ±nÄ± bildiren bir ayar</li><li><code>cipher $CIPHER</code> Veri kanalÄ± iÃ§in hangi ÅŸifreleme algoritmasÄ±nÄ±n kullanÄ±lacaÄŸÄ±nÄ± bildiren bir ayar</li><li><code>ncp-ciphers $CIPHER</code> Sunucunun kullanabileceÄŸi ÅŸifreleme algoritmalarÄ±nÄ± bildiren bir ayar</li><li><code>tls-server</code> Sunucunun TLS kanalÄ±nÄ± kullanmasÄ±nÄ± sÃ¶yleyen bir ayar</li><li><code>tls-version-min 1.2</code> TLS kanalÄ±nda kullanÄ±lmasÄ± iÃ§in en dÃ¼ÅŸÃ¼k versiyonu bildiren bir ayar</li><li><code>tls-cipher $CC_CIPHER</code> Veri kanalÄ±ndan hariÃ§ TLS katmanÄ±nda da ÅŸifreleme kullanÄ±lÄ±yor bu da kontrol kanalÄ± ÅŸifrelemesini bildiren ayar</li><li><code>client-config-dir /etc/openvpn/ccd</code> Ä°stemci ayar dosyalarÄ±nÄ±n tutulduÄŸu konumu bildiren ayar</li><li><code>status /var/log/openvpn/status.log</code> Durum raporlarÄ±nÄ±n yazÄ±lacaÄŸÄ± konumu ve log dosyalarÄ±nÄ±n tutulduÄŸu konumu bildiren ayar</li><li><code>verb 3</code> Verbose kelimesinin kÄ±saltÄ±lmÄ±ÅŸÄ± olan bu ayar ne kadar detaylÄ± durum raporu verileceÄŸinin ayarÄ±dÄ±r.</li></ul><h3 id=istemci-tarafÄ±nda-tutulan-ayar-dosyasÄ±-ÅŸu-girdileri-iÃ§ermektedir>Ä°stemci tarafÄ±nda tutulan ayar dosyasÄ± ÅŸu girdileri iÃ§ermektedir<a hidden class=anchor aria-hidden=true href=#istemci-tarafÄ±nda-tutulan-ayar-dosyasÄ±-ÅŸu-girdileri-iÃ§ermektedir>#</a></h3><ul><li><code>client</code> Ä°lgili cihazÄ±n istemci rolÃ¼nde olduÄŸunu belirtiyor</li><li><code>proto tcp-client</code> Protokol olarak TCP&rsquo;nin kullanÄ±lacaÄŸÄ±nÄ± bildiriyor</li><li><code>remote $IP $PORT</code> BaÄŸlanÄ±lacak sunucu(larÄ±n) IP adresinin ve Port numarasÄ±nÄ±n ayarladÄ±ÄŸÄ± kÄ±sÄ±m</li><li><code>dev tun</code> TUN/TAP arabirimlerinden hangisinin kullanÄ±lacaÄŸÄ±nÄ± ayarlÄ±yor</li><li><code>resolv-retry infinite</code> EÄŸer IP veya DNS nedeniyle adres Ã§Ã¶zÃ¼mlemesi gecikir ise ne kadar sÃ¼re ile bekleyeceÄŸini sÃ¶ylÃ¼yoruz</li><li><code>nobind</code> Lokaldeki herhangi bir adrese baÄŸlanÄ±lmamasÄ±nÄ± bildiren ayar</li><li><code>persist-key</code> Yeniden baÅŸlatma durumunda anahtar dosyalarÄ±nÄ±n ek bir yetkiye gerek kalmadan okunabilmesini yarar</li><li><code>persist-tun</code> AynÄ± ÅŸekilde yeniden baÅŸlatma durumunda TUN/TAP arabiriminin yetkiye gerek kalmadan uyandÄ±rÄ±labilmesine yarar</li><li><code>remote-cert-tls server</code> BaÄŸlanÄ±lan sunucunun sertifikasÄ±nÄ± TLS katmanÄ±nda doÄŸrulanmasÄ±nÄ± saÄŸlar</li><li><code>verify-x509-name $SERVER_NAME name</code> Sunucunun geri dÃ¶neceÄŸi sertifikasÄ±ndaki ismi ve sunucunun isminin ne olmasÄ± gerektiÄŸini bildiren komut</li><li><code>auth $HMAC_ALG</code> DoÄŸrulama iÃ§in hangi algoritmanÄ±n kullanÄ±lacaÄŸÄ±nÄ± bildiren komut</li><li><code>auth-nocache</code> Oturum aÃ§mak iÃ§in gerekli parolayÄ± Ã¶nbelleÄŸe almaz</li><li><code>cipher $CIPHER</code> Åifreleme iÃ§in kullanÄ±lacak algoritmayÄ± seÃ§meye yarayan komut</li><li><code>tls-client</code> TLS iletiÅŸimi sÄ±rasÄ±nda TLS&rsquo;yi etkinleÅŸtirir ve istemci rolÃ¼nÃ¼ Ã¼stlenir</li><li><code>tls-version-min 1.2</code> En dÃ¼ÅŸÃ¼k TLS versiyonunu ayarlar</li><li><code>tls-cipher $CC_CIPHER</code> TLS kontrol kanalÄ±nda kullanÄ±lacak ÅŸifreleme algoritmasÄ±nÄ± seÃ§er</li><li><code>ignore-unknown-option block-outside-dns</code> Bilinmeyen DNS adreslerinin kullanÄ±lmasÄ±nÄ± engeller</li><li><code>setenv opt block-outside-dns</code> Windows 10 iÃ§in DNS sÄ±zÄ±ntÄ±larÄ±nÄ± engeller</li><li><code>verb 3</code> Rapor verme derecesini belirler</li><li><code>compress</code> SÄ±kÄ±ÅŸtÄ±rma algoritmasÄ± ayarlarÄ± burada bildirilir</li><li><code>"&lt;ca>/etc/openvpn/easy-rsa/pki/ca.crt&lt;/ca>"</code> Beklenilen sunucu sertifika otoritesi dosyasÄ±nÄ±n Hard-Coded gÃ¶mÃ¼lmesi</li><li><code>"&lt;cert>/etc/openvpn/easy-rsa/pki/issued/$CLIENT.crt&lt;/cert>"</code> Ä°stemci sertifika dosyasÄ±nÄ±n Hard-Coded gÃ¶mÃ¼lmesi</li><li><code>"&lt;key>/etc/openvpn/easy-rsa/pki/private/$CLIENT.key&lt;/key>"</code> Ä°stemci asimetrik secret keyinin Hard-Coded gÃ¶mÃ¼lmesi</li><li><code>"&lt;tls-crypt>/etc/openvpn/tls-crypt.key&lt;/tls-crypt>"</code> TLS crypt iÃ§in key dosyasÄ±nÄ±n belirtilmesi</li><li><code>"&lt;tls-auth>/etc/openvpn/tls-auth.key&lt;/tls-auth>"</code> TLS auth iÃ§in key dosyasÄ±nÄ±n belirtilmesi</li><li><code>key-direction 1</code> TLS katmanÄ± ÅŸifrelenmesi iÃ§in istemci ve sunucuya rol atÄ±yor (0 ve 1 ÅŸeklinde)</li></ul><p>Bu ayarlarÄ± ve daha bir Ã§oÄŸunun ayrÄ±ntÄ±lÄ± dÃ¶kÃ¼mantasyonunu <a href=https://openvpn.net/community-resources/reference-manual-for-openvpn-2-4/>OpenVPN</a> web sayfasÄ±nda bulabilirsiniz.</p><h2 id=openvpn-baÄŸlantÄ±sÄ±-kurulurken-neler-oluyor->OpenVPN baÄŸlantÄ±sÄ± kurulurken neler oluyor ?<a hidden class=anchor aria-hidden=true href=#openvpn-baÄŸlantÄ±sÄ±-kurulurken-neler-oluyor->#</a></h2><p>OpenVPN ile baÄŸlantÄ± kurduÄŸum her zaman kendimi YÄ±ldÄ±z Filosu planlarÄ±nÄ± kaÃ§Ä±ran R2-D2 gibi hissediyorum. Ä°nsanlar kendilerini her zaman iÃ§in derinlemesine bir inceleme iÃ§erisinde bulmak istemiyorlar ve birilerinin onlara neyin nasÄ±l dÃ¶ndÃ¼ÄŸÃ¼nÃ¼ aÃ§Ä±klamalarÄ±nÄ± isteyebiliyorlar. Benim bu yazÄ±yÄ± kaleme alma amacÄ±mda aslÄ±nda bu soruyu kendime sormuÅŸ olmam ve cevabÄ±nÄ± almak iÃ§in Ã§ok Ã§aba sarfetmiÅŸ olmam. Sizin de bu kadar uÄŸraÅŸmanÄ±zÄ± istemem fakat size hemencecik bunu yÃ¼kle gerisini dÃ¼ÅŸÃ¼nme o iÅŸ bende de diyemem. BaÅŸta sÃ¶z verdiÄŸim gibi derinlemesine bir ÅŸekilde bu sÃ¼reci sizlere anlatacaÄŸÄ±m ve kararÄ± size bÄ±rakacaÄŸÄ±m. Bir OpenVPN baÄŸlantÄ±sÄ±nda artÄ±sÄ±yla eksisiyle (benim ÅŸu ana kadar Ã§Ã¶zebildiÄŸim ÅŸekliyle) sÃ¼reÃ§ ÅŸÃ¶yle iÅŸliyor. Ã–nce bir TCP/UDP baÄŸlantÄ±sÄ± kuruyorsunuz. TCP kullanan her uygulama gibi bir sÃ¼reÃ§ yÃ¼rÃ¼tÃ¼yorsunuz ve ardÄ±ndan TLS katmanÄ±na geÃ§iyorsunuz. TLS katmanÄ±nda el sÄ±kÄ±ÅŸma (handshake) ve bazÄ± kimlik doÄŸrulama iÅŸlemleri yapÄ±yorsunuz. Bu katmana aynÄ± zamanda kontrol kanalÄ± da deniliyor. ArdÄ±ndan belirli bir iletiÅŸim tutturulmuÅŸ oluyor ve veri kanalÄ±na geÃ§iliyor. Veri veya data kanalÄ±nda bu sefer gÃ¶nderilecek veri paketlerinin ÅŸifrelenmesi ve Ã§Ã¶zÃ¼lmesi sÃ¼reci baÅŸlÄ±yor. Bunun iÃ§in yine cihazlar birbirleri ile konuÅŸuyor ve belirli ortak ÅŸartlar altÄ±nda veriler gÃ¶nderilmeye baÅŸlanÄ±yor. KÄ±saca bu ÅŸekilde anlattÄ±ÄŸÄ±m sÃ¼recin sonunda 0&rsquo;dan baÅŸlattÄ±ÄŸÄ±mÄ±z iletiÅŸim bize gÃ¼venli ve istediÄŸimiz ÅŸekilde verilerin ulaÅŸmasÄ± ile son buluyor veya aÃ§Ä±k tutulan baÄŸlantÄ± Ã¼zerinden bu sefer tersine bir yolla yeniden istekler iletiliyor. BÃ¶ylece iÃ§ iÃ§e borular gibi bir sistem ortaya Ã§Ä±kÄ±yor. YazÄ± iÃ§in gerekli olan tek Ã¶nemli ÅŸeyi buraya yazmak gerekirse eÄŸer:</p><ul><li><code>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384_P512</code> ÅŸeklinde olacaktÄ±r.<ul><li>Burada <code>TLS</code> girdisi kontrol kanalÄ±nÄ±n TLS katmanÄ± Ã¼zerinden yÃ¼rÃ¼tÃ¼leceÄŸini belirtir. DiÄŸer alternatifler <code>SSL</code> veya <code>NULL</code>&lsquo;dur.</li><li><code>ECDHE</code> girdisi Elliptik Diffie-Hellman algoritmasÄ± kullanÄ±larak ilk Ã¶n-anahtarÄ±n Ã¼retileceÄŸini belirtir. DiÄŸer alternatifler <code>DHE</code>, <code>DH</code> veya kullanmamaktÄ±r.</li><li><code>ECDSA</code> verisi karÅŸÄ±lÄ±klÄ± kimlik doÄŸrulama ve asimetrik anahtar iÃ§in Elliptik Dijital Ä°mza SertifikasÄ± AlgoritmasÄ±nÄ±n kullanÄ±lacaÄŸÄ±nÄ± belirtir. DiÄŸer kullanÄ±labilir alternatif <code>RSA</code>&lsquo;dÄ±r. DiÄŸerlerini saymaya gerek bile yok.</li><li><code>AES_256_GCM</code> veri kanalÄ±nda kullanÄ±lacak ÅŸifreleme algoritmasÄ±nÄ±n belirtir. DiÄŸer alternatifler <code>AES-128-CBC</code>, <code>AES-128-GCM</code> ve <code>AES-256-CBC</code>&lsquo;dir</li><li><code>SHA384</code> kullanÄ±lacak Ã¶zet algoritmasÄ±nÄ± belirtir. DiÄŸer alternatif <code>SHA256</code>&lsquo;dÄ±r.</li><li><code>P512</code> ise kullanÄ±lacak elliptik eÄŸrinin Prime-512 adlÄ± eÄŸri olarak seÃ§ilmesini saÄŸlar. DiÄŸer alternatifler <code>P-256</code> ve <code>P-384</code>&lsquo;dÃ¼r.</li></ul></li></ul><h3 id=tcp-baÄŸlantÄ±sÄ±nÄ±n-kurulmasÄ±-sÃ¼reci>TCP baÄŸlantÄ±sÄ±nÄ±n kurulmasÄ± sÃ¼reci<a hidden class=anchor aria-hidden=true href=#tcp-baÄŸlantÄ±sÄ±nÄ±n-kurulmasÄ±-sÃ¼reci>#</a></h3><p>Åimdi kafanÄ±zda sÃ¼recin yaklaÅŸÄ±k bir resmi oluÅŸtu ise baÅŸlangÄ±cÄ± TCP sÃ¼recinin anlatÄ±mÄ±yla yapÄ±yorum. OlayÄ±mÄ±zda bir istemci ve bir sunucunun olduÄŸunu ve baÄŸlantÄ±nÄ±n sadece bu ikisinden ibaret olduÄŸunu dÃ¼ÅŸÃ¼nelim. Ä°stemci baÄŸlanmak istediÄŸi sunucuya bir SYN (m) paketi gÃ¶nderir. Sunucu ise buna cevap olarak aynÄ± port Ã¼zerinden bir SYN (n) paketi ve ACK (m+1) paket gÃ¶nderir. Bunu alan istemci de cevap olarak ACK (n+1) ÅŸeklinde dÃ¶nÃ¼ÅŸ yapar ve 3&rsquo;lÃ¼ TCP el sÄ±kÄ±ÅŸmasÄ± veya 3 Way TCP handshake gerÃ§ekleÅŸmiÅŸ olur. BÃ¶ylece belirtilen port Ã¼zerinden istemci ve sunucu arasÄ±nda aÃ§Ä±k bir kanalÄ±mÄ±z oluÅŸtu.</p><p><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TCP-Handshake.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TCP-Handshake.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/TCP-Handshake.jpg loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b>https://blog.shiftasia.com/what-happen-when-access-website (EriÅŸim Tarihi: 08.04.2023)</b></small></center></picture></p><hr><p><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TCP-Handshake-2.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TCP-Handshake-2.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/TCP-Handshake-2.png loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b>https://www.netscout.com/blog/asert/ddos-attacks-ssl-something-old-something-new (EriÅŸim Tarihi: 08.04.2023)</b></small></center></picture></p><p>FotoÄŸraflarda da gÃ¶rÃ¼leceÄŸi Ã¼zere eÄŸer sÃ¼reÃ§ sorunsuz iÅŸler ise 3 adÄ±mda iletiÅŸim kurulabiliyor. Fakat neden 3 adÄ±mda bu iÅŸi yapÄ±yoruz daha kÄ±sa ÅŸekilde olmaz mÄ± derseniz size (ÅŸimdilik) hayÄ±r olmaz full-duplex bir iletiÅŸim iÃ§in her iki tarafÄ±n da SYN ve ACK paketlerini gÃ¶ndermesi gerekiyor derim. Ä°leride belki farklÄ± yollarÄ±nÄ± da anlatÄ±rÄ±m ama ÅŸimdilik bÃ¶yle. Zaten iÅŸin TCP/UDP kÄ±smÄ± her zaman iÃ§in kÄ±sa ve basittir.</p><h3 id=tls-katmanÄ±ndaki-iÅŸletilen-sÃ¼reÃ§>TLS katmanÄ±ndaki iÅŸletilen sÃ¼reÃ§<a hidden class=anchor aria-hidden=true href=#tls-katmanÄ±ndaki-iÅŸletilen-sÃ¼reÃ§>#</a></h3><p>TCP Ã¼zerinden bir iletiÅŸim kurulmasÄ±nÄ±n ardÄ±ndan yine muhabbeti baÅŸka bir aÅŸamaya taÅŸÄ±yan kiÅŸi istemci oluyor. Her zaman iÃ§in istemciler sunucudan bir ÅŸeyler talep eder veya bir cevap ister. Sunucular genel olarak kendilerine gelmeyen bir isteÄŸi cevapladÄ±ÄŸÄ± Ã§ok gÃ¶rÃ¼lmemiÅŸtir. Ã–nce talep sonra arz ilkesine gÃ¶re sÃ¼reÃ§ ilerler. Evet, taraflar TLS katmanÄ±ndalar ÅŸimdi. Ä°stemci sunucuya Ã¶nce bir merhaba diyor. Åaka deÄŸil gerÃ§ek. Ä°stemci tarafÄ±ndan gÃ¶nderilen ilk pakete <code>Client-Hello</code> paketi denir. Bu paketin yanÄ±nda (sÃ¼reci hÄ±zlandÄ±rmak adÄ±na) desteklediÄŸi ÅŸifreleme algoritmalarÄ±nÄ± belirten <code>Supported-Chipers</code> paketi, istemci tarafÄ±ndan rastgele Ã¼retilmiÅŸ bir sayÄ±, aynÄ± IP adresinde birden fazla hizmet Ã§alÄ±ÅŸtÄ±rÄ±lÄ±yor ise bir <code>SNI</code> sunucu adÄ± indikatÃ¶rÃ¼ ve yine gerekiyor ise oturum ID&rsquo;si gÃ¶nderilir. Sunucunun buna cevabÄ± ise Ã¶ncelikle kibar bir merhaba demek oluyor. Ã‡Ã¼nkÃ¼ sunucunun cevaben gÃ¶nderdiÄŸi ilk pakete de <code>Server-Hello</code> paketi denir. Bu paketin yanÄ±nda sunucu sertifikasÄ±nÄ±, kendi desteklediÄŸi ÅŸifreleme algoritmalarÄ±nÄ± ve seÃ§tiÄŸi algoritmayÄ± belirten <code>Selected-Chiper</code> paketi, kendisinin Ã¼rettiÄŸi rastgele bir sayÄ±yÄ±, gerekirse Oturum ID&rsquo;sini ve aynÄ± IP Ã¼zerinden birden fazla istemci baÄŸlanÄ±yor ise buna iliÅŸkin SNI benzeri bir ID&rsquo;yi gÃ¶nderir. Ä°stemci Ã¶ncelikle iletiÅŸime baÅŸladÄ±ÄŸÄ± tarafÄ±ndan gerÃ§ekten beklediÄŸi kiÅŸi olup olmadÄ±ÄŸÄ±nÄ± sunucu sertifikasÄ± ile doÄŸrular. AyrÄ±ca bazÄ± durumlarda da sunucu istemcinin beklediÄŸi istemcilerden biri olup olmadÄ±ÄŸÄ±nÄ± yine sertifika ile doÄŸrular. EÄŸer bu karÅŸÄ±lÄ±klÄ± doÄŸrulama (mutual-authentication) sÃ¼reci olumlu sonuÃ§lanÄ±r ise bir sonraki aÅŸamaya geÃ§ilir. Anahtar Ã¼retim ve deÄŸiÅŸim sÃ¼reci tetiklenmiÅŸ olur. Bu aÅŸamda yine istemci devreye girer ve gÃ¼vensiz Ã¶nkabul edilen bu iletiÅŸim sÄ±rasÄ±nda belirledikleri algoritma ile anahtar deÄŸiÅŸtirmek istediÄŸini sÃ¶yler. Taraflar Diffie-Hellman veya ECDHE ile bir Ã¶nanahtar oluÅŸturmaya baÅŸlarlar. Bunun iÃ§in istemci ve sunucu tarafÄ±ndan Ã¶n-sÄ±rlar paylaÅŸÄ±lÄ±r. Bir takÄ±m matematiksel iÅŸlemler yapÄ±larak bulunan cevaplar karÅŸÄ±ya gÃ¶nderilir ve tekrar matematiksel iÅŸlemler yapÄ±larak aynÄ± sonuca ulaÅŸÄ±lÄ±r. Ä°ÅŸte ulaÅŸÄ±lan sonuÃ§ aralarÄ±nda gÃ¼venli bir ÅŸekilde oluÅŸturduklarÄ± ilk Ã¶n-anahtar oluyor. Bundan sonra belirledikleri ÅŸifreleme algoritmasÄ± ile
iletiÅŸime geÃ§mek iÃ§in kontrol kanalÄ±ndan hariÃ§ bir veri kanalÄ± oluÅŸturulur ve sÃ¼reÃ§ oradan devam eder.</p><p><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TLS-Handshake.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TLS-Handshake.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/TLS-Handshake.png loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b>https://www.researchgate.net/publication/298065605_A_multi-level_framework_to_identify_HTTPS_services (EriÅŸim Tarihi: 08.04.2023)</b></small></center></picture></p><hr><p><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TLS-Handshake-2.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TLS-Handshake-2.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/TLS-Handshake-2.png loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b></b></small></center></picture></p><p>FotoÄŸraflarda da gÃ¶rÃ¼lebileceÄŸi Ã¼zere sÃ¼reÃ§ bir web sayfasÄ±na baÄŸlanÄ±lÄ±rken yaÅŸanan sÃ¼reÃ§le neredeyse aynÄ±. Sadece ihtiyaÃ§lara gÃ¶re belirli aÅŸamalar ekleniyor, Ã§Ä±karÄ±lÄ±yor veya deÄŸiÅŸtiriliyor. Ã–rneÄŸin Ä°leri Seviye Gizlilik anlamÄ±na gelen PFS gereÄŸince taraflar Ã¶n-anahtarÄ± sunucunun asimetrik anahtarÄ± ile iletmiyor. Ã‡Ã¼nkÃ¼ bu durumda her oturum iÃ§in aynÄ± anahtar kullanÄ±lacaÄŸÄ± iÃ§in verilerin depolanÄ±p daha sonra anahtar aÃ§Ä±ÄŸa Ã§Ä±ktÄ±ÄŸÄ± bir gÃ¼n beklenerek veriler geÃ§miÅŸe dÃ¶nÃ¼k okunabilir bir hale gelecektir. Bu yÃ¼zden bu deÄŸiÅŸiklik yapÄ±ldÄ±. Yine sÄ±fÄ±r gÃ¼ven tehdit modeli gereÄŸince her bir katmanÄ±n ve sÃ¼recin bir diÄŸerinin iÅŸini doÄŸru yapacaÄŸÄ±na gÃ¼venmeden sÃ¼reci ilerletmesini istiyorum. Bu yÃ¼zden TLS katmanÄ±ndaki o ilk iletiÅŸim anÄ±nda dahi paketlerin <code>tls-auth</code> Ã¶zelliÄŸi gereÄŸince ÅŸifrelenmesini ve gelen-giden verilerin bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼n doÄŸrulanmasÄ±nÄ± istiyoruz. Daha ilk merhaba dediÄŸiniz andan itibaren Ã¼Ã§Ã¼ncÃ¼ kiÅŸiler sizin ne konuÅŸtuÄŸunuzu hangi aÅŸamada olduÄŸunuzu anlayamayacaklardÄ±r. Bunun iÃ§in Ã¶nceden belirlenmiÅŸ bir anahtar/anahtarlar ile ilk iletiÅŸim baÅŸlatÄ±lÄ±r ve gerekirse belirli aralÄ±klarla bu anahtarlar yenilenir. BÃ¶ylece TLS katmanÄ±nda ilk Ã¶n-anahtar oluÅŸturulana kadar dahi gizlilikten Ã¶dÃ¼n verilmemiÅŸ ve yetkisiz kiÅŸilerce boÅŸuna tarafik yaratÄ±lmamÄ±ÅŸ olur.</p><h3 id=veri-katmanÄ±nda-iÅŸleyen-sÃ¼reÃ§>Veri katmanÄ±nda iÅŸleyen sÃ¼reÃ§<a hidden class=anchor aria-hidden=true href=#veri-katmanÄ±nda-iÅŸleyen-sÃ¼reÃ§>#</a></h3><p>EÄŸer tÃ¼m bu sÃ¼reÃ§ baÅŸarÄ±lÄ± bir ÅŸekilde tamamlanmÄ±ÅŸ ve veri kanalÄ±na geÃ§ilebildiyse eÄŸer artÄ±k iÅŸin en gÃ¼zel kÄ±smÄ±na gelmiÅŸ bulunuyorsunuz. Veriler AES ÅŸifreleme methodu ile ÅŸifrelenecek. Åifreleme sÄ±rasÄ±nda seÃ§iminize gÃ¶re CBC-GCM counter moduna gÃ¶re tablolar karÄ±ÅŸtÄ±rÄ±lacak ve bu sÃ¼reÃ§te seÃ§iminize gÃ¶re 128 veya 256 bit uzunluÄŸunda ÅŸifreleme anahtarÄ± kullanÄ±lacak. Tabi ne hangisini seÃ§erseniz seÃ§in ÅŸifreleme blok uzunluÄŸu 128 bit olucak. DeÄŸiÅŸen sadece ÅŸifreleme anahtarÄ± uzunluÄŸu. Benim bu anlatÄ±mÄ±m iÃ§in seÃ§miÅŸ olduÄŸum AES-256-GCM bir AEAD ÅŸifreleme tÃ¼rÃ¼dÃ¼r. DiÄŸer kanallardan ve sÃ¼reÃ§lerden baÄŸÄ±msÄ±z olarak gÃ¶nderdiÄŸi verileri belirli bir aÅŸamada Ã¶zetini Ã§Ä±kartÄ±r ve Ã¶zeti ile birlikte gÃ¶nderir. BÃ¶ylece &lsquo;Authentication Encryption with associated data&rsquo; anlamÄ±na gelen AEAD&rsquo;de doÄŸrulama ve ÅŸifreleme iÅŸlevleri yerine getirilmiÅŸ oluyor. Burada bir ayrÄ±ma gidilmesini gerektirecek ÅŸÃ¶yle bir sorun mevcuttur. Åifreleme ve Ã–zet alma algoritmalarÄ±nÄ± hangi aÅŸamada ve sÄ±rayla kullanacaÄŸÄ±z.</p><table><thead><tr><th style=text-align:center></th><th style=text-align:center></th><th></th></tr></thead><tbody><tr><td style=text-align:center><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/EtM.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/EtM.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/EtM.png loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b>Encrypt-then-MAC (EtM)</b></small></center></picture></td><td style=text-align:center><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/EaM.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/EaM.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/EaM.png loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b>Encrypt-and-MAC (E-and-M)</b></small></center></picture></td><td style=text-align:center><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/MtE.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/MtE.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/MtE.png loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b>MAC-then-Encrypt (MtE)</b></small></center></picture></td></tr></tbody></table><blockquote><p><a href=https://en.wikipedia.org/wiki/Authenticated_encryption>https://en.wikipedia.org/wiki/Authenticated_encryption</a> (EriÅŸim Tarihi: 08.04.2023)</p></blockquote><ul><li><p>Birinci yaklaÅŸÄ±m olan EtM&rsquo;ye gÃ¶re veri Ã¶nce ÅŸifrelenir ardÄ±ndan baÅŸka bir anahtar ile Ã¶zeti sonucu ÅŸifrelenir ve ortaya Ã§Ä±kan sonuÃ§ bloklar halinde birlikte gÃ¶nderilir. Bunu kullanan gerÃ§ek dÃ¼nya Ã§Ã¶zÃ¼mlerine bakacak olursak IPSec protokolÃ¼ ilk akla gelen olacaktÄ±r. Bu, AE&rsquo;de en yÃ¼ksek gÃ¼venlik tanÄ±mÄ±na ulaÅŸabilen tek yÃ¶ntemdir, ancak bu ancak kullanÄ±lan MAC algoritmasÄ±nÄ±n bozulma iÃ§ermediÄŸi veya henÃ¼z kÄ±rÄ±lmadÄ±ÄŸÄ± takdirde elde edilebilir. SSHv2 iÃ§in de Ã§eÅŸitli EtM ÅŸifre takÄ±mlarÄ± mevcuttur. Ancak veri ve Ã¶zet iÃ§in anahtar ayrÄ±mÄ±nÄ±n zorunlu olduÄŸunu unutmayÄ±n (ÅŸifreleme ve anahtarlÄ± karma iÃ§in farklÄ± anahtarlar kullanÄ±lmalÄ±dÄ±r), aksi takdirde kullanÄ±lan belirli ÅŸifreleme yÃ¶ntemine ve karma iÅŸlevine baÄŸlÄ± olarak potansiyel olarak gÃ¼vensiz bir sonuÃ§ elde edebilirsiniz.</p></li><li><p>Ä°kinci yaklaÅŸÄ±m olan E&amp;M&rsquo;ye gÃ¶re dÃ¼z metin olan veri ÅŸifrelenir ve yanÄ±na dÃ¼z metin verinin ÅŸifrelenmemiz halinin Ã¶zeti eklenir. Burada sadece bir anahtar kullanÄ±lmÄ±ÅŸ olmasÄ±na raÄŸmen aynÄ± veriye ait iki farklÄ± sonucun (ÅŸifreleme sonucu ve Ã¶zet sonucu) olmasÄ± gÃ¼venliÄŸin yeterince iyi olmadÄ±ÄŸÄ±nÄ± aÃ§Ä±kca gÃ¶zler Ã¶nÃ¼ne sermektedir. Bu sistemi kullanan gerÃ§ek dÃ¼nya Ã§Ã¶zÃ¼mÃ¼ olarak SSH&rsquo;Ä±n ilk versiyonlarÄ±nÄ± Ã¶rnek gÃ¶sterebiliriz. Bunu geliÅŸtirmek iÃ§in ayrÄ±ca gÃ¶nderilen Ã¶zet dosyasÄ±nÄ± da aynÄ± anahtar ile ÅŸifreleme gibi yÃ¶ntemler denenmiÅŸtir.</p></li><li><p>ÃœÃ§Ã¼ncÃ¼ ve bildiÄŸim son yaklaÅŸÄ±m olan MtE&rsquo;ye gÃ¶re dÃ¼z metine dayalÄ± olarak bir Ã¶zet dosyasÄ± Ã¼retilir. ArdÄ±ndan dÃ¼z metin ve Ã¶zet dosyasÄ± birlikteyken anahtar ile ÅŸifrelenir. Åifreli metin ve ÅŸifreli Ã¶zet dosyasÄ± birlikte gÃ¶nderilir. Bunu kullanan gerÃ§ek dÃ¼nya Ã§Ã¶zÃ¼mlerine bakacak olursak ilk ve en Ã¶nemlisi SSL/TLS uygulamalarÄ±dÄ±r. SSL/TLS uygulamalarÄ±nÄ±n kendi iÃ§lerinde ne kadar gÃ¼venilir ve sÃ¼rdÃ¼rÃ¼lebilir olduklarÄ±nÄ± hepimiz biliyoruz. Bunun Ã¶tesinde de gÃ¼venliÄŸi artÄ±rmak adÄ±na yÄ±llar iÃ§ersinde <code>MAC-then-pad-then-encrypt</code> gibi geliÅŸtirmeler yapÄ±ldÄ±. Bu geliÅŸtirmeye gÃ¶re Ã¶nce dÃ¼z metinin Ã¶zeti alÄ±nÄ±r ardÄ±ndan blok boyutuna kadar doldurulur ve ardÄ±ndan ÅŸifreleme iÅŸlemi yapÄ±lÄ±r. BÃ¶ylece daha da gÃ¼venilir bir ÅŸifreleme sonucu oluÅŸur. Ama doldurma mekanizmasÄ±nÄ±n belirli hatalar yapmasÄ± durumunda Padding Oracle gibi saldÄ±rÄ±lara neden olduÄŸu durumlar mevcuttur.</p></li></ul><p><picture><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TAP-TUN.avif type=image/avif><source srcset=https://wiseweb-works.github.io/blog/images/openvpn-full/TAP-TUN.webp type=image/webp><img src=https://wiseweb-works.github.io/blog/images/openvpn-full/TAP-TUN.png loading=lazy decoding=async width=min(100%, 720px) height=auto><center><small><b>https://community.openvpn.net/openvpn/wiki/Gigabit_Networks_Linux (EriÅŸim Tarihi: 08.04.2023)</b></small></center></picture></p><p>KullanÄ±lacak AEAD yaklaÅŸÄ±mÄ± da seÃ§ildikten sonra TAP veya TUN kullanÄ±mÄ±na gÃ¶re yukarÄ±daki grafikte gÃ¶rÃ¼len yol izlenir. Bu yola gÃ¶re kullanÄ±cÄ± alanÄ±nda yapÄ±lan/yapÄ±lmak istenen eylem Ã§ekirdek (kernel) seviyesinde TAP/TUN adaptÃ¶rlerine gider. Bu adaptÃ¶rler Ã§ekirdek seviyesinde bulunmalarÄ± nedeniyle Ã§ok hÄ±zlÄ± bir ÅŸekilde iÅŸlem yaparlar. ArdÄ±ndan sanal adaptÃ¶rler ilgili kÃ¼tÃ¼phane ile gerekli ÅŸifrelemeyi yapar, gerekirse Ã¶zeti ekler ve paket boyutu ayarÄ± yapar. ArdÄ±ndan sunucu Ethernet arayÃ¼zÃ¼ Ã¼zerinden istemcinin Ethernet arayÃ¼zÃ¼ne paketleri sÄ±rayla gÃ¶nderir. Bunu alan istemci ise paketleri yeniden ayarlar, dÃ¼zenler gerekirse birleÅŸtirir ve gerekli kÃ¼tÃ¼phaneler ile ÅŸifresini Ã§Ã¶zer. Åifresini Ã§Ã¶zdÃ¼kten sonra bunu sanal adaptÃ¶r aracÄ±lÄ±ÄŸÄ± ile istemcini son kullanÄ±cÄ±sÄ±na iletir. BÃ¶ylece tÃ¼m bu matematiksel iÅŸlemler, uÄŸraÅŸlar sonucunda birkaÃ§ Ã§evrim neticesinde kullanÄ±cÄ± istediÄŸi iÃ§eriÄŸe ulaÅŸmÄ±ÅŸ oldu. AnlatmasÄ± oldukÃ§a uzun ama kullanmasÄ± Ã§ok kolay sevgili okuyucular. Sadece GitHub sayfama girik ilgili <a href=https://github.com/wiseweb-works/openvpn-most-secure-install/>script sayfasÄ±nÄ±</a> ziyaret etmeniz yeterlidir. Ä°lgili script tÃ¼m bu ayarlamalarÄ± interaktif olarak sizin yerinize yapmaktadÄ±r. Size de arkanÄ±za yaslanÄ±p keyfini Ã§Ä±karmak kalÄ±yor.</p><h1 id=sss-ve-son>SSS ve Son<a hidden class=anchor aria-hidden=true href=#sss-ve-son>#</a></h1><p>Bana <a href=mailto:wisewebworks@outlook.com>mail</a> yoluyla, <a href=https://fosstodon.org/@wise>Fosstodon</a> Ã¼zerinden veya <a href=https://github.com/wiseweb-works>GitHub</a> Ã¼zerinden gelen sorularÄ± zaman zaman buraya eklemeye Ã§alÄ±ÅŸacaÄŸÄ±m. BÃ¶ylece tarihsel olarak da hangi tarihte ne gibi sorular olmuÅŸ veya Ã§Ã¶zÃ¼mÃ¼ mevcut mu gibi dÃ¼ÅŸÃ¼ncelere kapÄ±lmadan direk sonuca ulaÅŸabileceksiniz. Bunun haricinde de teknik dÃ¶kÃ¼manÄ± deÄŸiÅŸtirmeden ekstra aÃ§Ä±klama gerektiren sorular gelirse onlarÄ± da bu kÄ±sma almayÄ± dÃ¼ÅŸÃ¼nÃ¼yorum.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wiseweb-works.github.io/blog/tags/linux/>linux</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/ssl/>ssl</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/security/>security</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/ecc/>ecc</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/elliptic-curve/>elliptic curve</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/openvpn/>openvpn</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/tls/>tls</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/aes/>aes</a></li></ul><nav class=paginav><a class=prev href=https://wiseweb-works.github.io/blog/post/adguard-reklam-engelleme/><span class=title>Â« Ã–nceki</span><br><span>AdGuard ile Reklam Engelleme</span>
</a><a class=next href=https://wiseweb-works.github.io/blog/post/ecc-ssl-sertifikasi/><span class=title>Sonraki Â»</span><br><span>Linux Sunucuda ECC SSL SertifikasÄ± Ãœretme</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://wiseweb-works.github.io/blog/>Wise</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Kopyala";function s(){t.innerHTML="KopyalandÄ±!",setTimeout(()=>{t.innerHTML="Kopyala"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
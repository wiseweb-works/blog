<!doctype html><html lang=tr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux Sunucularda SSH GÃ¼venliÄŸi ArtÄ±rma | Wise</title><meta name=keywords content="linux,ssh,security,audit"><meta name=description content="Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma BugÃ¼n sizlerle bir sunucu kiraladÄ±ÄŸÄ±nÄ±z zaman gÃ¼venli bir ÅŸekilde baÄŸlanmamÄ±zÄ± saÄŸlayan SSH hizmetini nasÄ±l daha gÃ¼venli ve dÄ±ÅŸarÄ±dan gelecek kÃ¶tÃ¼ niyetli isteklerden uzak tutabiliriz bundan bahsedeceÄŸim. Ã–ncelikle sÃ¼reci basit, Ã¶nerilen ve ileri-seviye olarak Ã¼Ã§ farklÄ± baÅŸlÄ±k altÄ±nda anlatacaÄŸÄ±m. BaÅŸlÄ±k iÃ§erikleri kiÅŸisel gerekliliklere gÃ¶re aÅŸamalÄ± dÃ¼ÅŸÃ¼nÃ¼lmÃ¼ÅŸtÃ¼r. BaÅŸlÄ±klar bir biri ile baÄŸlantÄ±lÄ± olmasÄ±na raÄŸmen istenilen bir aÅŸamada bÄ±rakÄ±lmasÄ± sorun oluÅŸturmayacaktÄ±r.
Basit GÃ¼venlik Ã–nlemleri Ã–ncelikle iÃ§inde bulunduÄŸumuz Linux sÃ¼rÃ¼mÃ¼nÃ¼n paket yÃ¶neticisi ile gÃ¼ncellemeleri konsol Ã¼zerinden yÃ¼klememiz gerekmektedir."><meta name=author content="Wise"><link rel=canonical href=https://wiseweb-works.github.io/blog/post/ssh-guvenligi/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.5765740aa12888733e1d823f519b426ef349d2fc7b6ba7a6a06d3e4021b2b0d9.css integrity="sha256-V2V0CqEoiHM+HYI/UZtCbvNJ0vx7a6emoG0+QCGysNk=" rel="preload stylesheet" as=style><link rel=icon href=https://wiseweb-works.github.io/blog/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wiseweb-works.github.io/blog/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wiseweb-works.github.io/blog/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://wiseweb-works.github.io/blog/favicons/apple-touch-icon.png><link rel=mask-icon href=https://wiseweb-works.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=tr href=https://wiseweb-works.github.io/blog/post/ssh-guvenligi/><link rel=alternate hreflang=en href=https://wiseweb-works.github.io/blog/en/post/ssh-guvenligi/><link rel=alternate hreflang=de href=https://wiseweb-works.github.io/blog/de/post/ssh-guvenligi/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Linux Sunucularda SSH GÃ¼venliÄŸi ArtÄ±rma"><meta property="og:description" content="Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma BugÃ¼n sizlerle bir sunucu kiraladÄ±ÄŸÄ±nÄ±z zaman gÃ¼venli bir ÅŸekilde baÄŸlanmamÄ±zÄ± saÄŸlayan SSH hizmetini nasÄ±l daha gÃ¼venli ve dÄ±ÅŸarÄ±dan gelecek kÃ¶tÃ¼ niyetli isteklerden uzak tutabiliriz bundan bahsedeceÄŸim. Ã–ncelikle sÃ¼reci basit, Ã¶nerilen ve ileri-seviye olarak Ã¼Ã§ farklÄ± baÅŸlÄ±k altÄ±nda anlatacaÄŸÄ±m. BaÅŸlÄ±k iÃ§erikleri kiÅŸisel gerekliliklere gÃ¶re aÅŸamalÄ± dÃ¼ÅŸÃ¼nÃ¼lmÃ¼ÅŸtÃ¼r. BaÅŸlÄ±klar bir biri ile baÄŸlantÄ±lÄ± olmasÄ±na raÄŸmen istenilen bir aÅŸamada bÄ±rakÄ±lmasÄ± sorun oluÅŸturmayacaktÄ±r.
Basit GÃ¼venlik Ã–nlemleri Ã–ncelikle iÃ§inde bulunduÄŸumuz Linux sÃ¼rÃ¼mÃ¼nÃ¼n paket yÃ¶neticisi ile gÃ¼ncellemeleri konsol Ã¼zerinden yÃ¼klememiz gerekmektedir."><meta property="og:type" content="article"><meta property="og:url" content="https://wiseweb-works.github.io/blog/post/ssh-guvenligi/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-10-05T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-07T05:02:05+02:00"><meta property="og:site_name" content="Wise Web Works"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux Sunucularda SSH GÃ¼venliÄŸi ArtÄ±rma"><meta name=twitter:description content="Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma BugÃ¼n sizlerle bir sunucu kiraladÄ±ÄŸÄ±nÄ±z zaman gÃ¼venli bir ÅŸekilde baÄŸlanmamÄ±zÄ± saÄŸlayan SSH hizmetini nasÄ±l daha gÃ¼venli ve dÄ±ÅŸarÄ±dan gelecek kÃ¶tÃ¼ niyetli isteklerden uzak tutabiliriz bundan bahsedeceÄŸim. Ã–ncelikle sÃ¼reci basit, Ã¶nerilen ve ileri-seviye olarak Ã¼Ã§ farklÄ± baÅŸlÄ±k altÄ±nda anlatacaÄŸÄ±m. BaÅŸlÄ±k iÃ§erikleri kiÅŸisel gerekliliklere gÃ¶re aÅŸamalÄ± dÃ¼ÅŸÃ¼nÃ¼lmÃ¼ÅŸtÃ¼r. BaÅŸlÄ±klar bir biri ile baÄŸlantÄ±lÄ± olmasÄ±na raÄŸmen istenilen bir aÅŸamada bÄ±rakÄ±lmasÄ± sorun oluÅŸturmayacaktÄ±r.
Basit GÃ¼venlik Ã–nlemleri Ã–ncelikle iÃ§inde bulunduÄŸumuz Linux sÃ¼rÃ¼mÃ¼nÃ¼n paket yÃ¶neticisi ile gÃ¼ncellemeleri konsol Ã¼zerinden yÃ¼klememiz gerekmektedir."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wiseweb-works.github.io/blog/post/"},{"@type":"ListItem","position":2,"name":"Linux Sunucularda SSH GÃ¼venliÄŸi ArtÄ±rma","item":"https://wiseweb-works.github.io/blog/post/ssh-guvenligi/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux Sunucularda SSH GÃ¼venliÄŸi ArtÄ±rma","name":"Linux Sunucularda SSH GÃ¼venliÄŸi ArtÄ±rma","description":"Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma BugÃ¼n sizlerle bir sunucu kiraladÄ±ÄŸÄ±nÄ±z zaman gÃ¼venli bir ÅŸekilde baÄŸlanmamÄ±zÄ± saÄŸlayan SSH hizmetini nasÄ±l daha gÃ¼venli ve dÄ±ÅŸarÄ±dan gelecek kÃ¶tÃ¼ niyetli isteklerden uzak tutabiliriz bundan bahsedeceÄŸim. Ã–ncelikle sÃ¼reci basit, Ã¶nerilen ve ileri-seviye olarak Ã¼Ã§ farklÄ± baÅŸlÄ±k altÄ±nda anlatacaÄŸÄ±m. BaÅŸlÄ±k iÃ§erikleri kiÅŸisel gerekliliklere gÃ¶re aÅŸamalÄ± dÃ¼ÅŸÃ¼nÃ¼lmÃ¼ÅŸtÃ¼r. BaÅŸlÄ±klar bir biri ile baÄŸlantÄ±lÄ± olmasÄ±na raÄŸmen istenilen bir aÅŸamada bÄ±rakÄ±lmasÄ± sorun oluÅŸturmayacaktÄ±r.\nBasit GÃ¼venlik Ã–nlemleri Ã–ncelikle iÃ§inde bulunduÄŸumuz Linux sÃ¼rÃ¼mÃ¼nÃ¼n paket yÃ¶neticisi ile gÃ¼ncellemeleri konsol Ã¼zerinden yÃ¼klememiz gerekmektedir.","keywords":["linux","ssh","security","audit"],"articleBody":"Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma BugÃ¼n sizlerle bir sunucu kiraladÄ±ÄŸÄ±nÄ±z zaman gÃ¼venli bir ÅŸekilde baÄŸlanmamÄ±zÄ± saÄŸlayan SSH hizmetini nasÄ±l daha gÃ¼venli ve dÄ±ÅŸarÄ±dan gelecek kÃ¶tÃ¼ niyetli isteklerden uzak tutabiliriz bundan bahsedeceÄŸim. Ã–ncelikle sÃ¼reci basit, Ã¶nerilen ve ileri-seviye olarak Ã¼Ã§ farklÄ± baÅŸlÄ±k altÄ±nda anlatacaÄŸÄ±m. BaÅŸlÄ±k iÃ§erikleri kiÅŸisel gerekliliklere gÃ¶re aÅŸamalÄ± dÃ¼ÅŸÃ¼nÃ¼lmÃ¼ÅŸtÃ¼r. BaÅŸlÄ±klar bir biri ile baÄŸlantÄ±lÄ± olmasÄ±na raÄŸmen istenilen bir aÅŸamada bÄ±rakÄ±lmasÄ± sorun oluÅŸturmayacaktÄ±r.\nBasit GÃ¼venlik Ã–nlemleri Ã–ncelikle iÃ§inde bulunduÄŸumuz Linux sÃ¼rÃ¼mÃ¼nÃ¼n paket yÃ¶neticisi ile gÃ¼ncellemeleri konsol Ã¼zerinden yÃ¼klememiz gerekmektedir.\nUbuntu iÃ§in: sudo apt update \u0026\u0026 sudo apt upgrade -y Fedora iÃ§in: sudo yum update -y Arch Linux iÃ§in: sudo pacman -Syyu GÃ¼ncellemeler yÃ¼klendikten sonra ise sunucunuzdaki (Benim olayÄ±mda Ubuntu) sshd servisini (ki bu servis dÄ±ÅŸarÄ±dan ssh baÄŸlantÄ±larÄ± almanÄ±za yarayan servistir) yapÄ±landÄ±rmaya baÅŸlÄ±yoruz. Ã–ncelikle Ã§ok karÄ±ÅŸtÄ±rÄ±lmasÄ± nedeniyle belirtmek gerekir ki ssh servisi ile sshd servisi farklÄ± servislerdir. SSH servisi sunucunun baÅŸkaca bilgisayar veya sunuculara baÄŸlanmasÄ±nÄ± yarayan servisken SSHD servisi baÅŸka bilgisayarlarÄ±n sizin sunucunuza baÄŸlanmasÄ±nÄ± yani gelen baÄŸlantÄ±larÄ± karÅŸÄ±layan servistir.\nSSHD servisinin ayarlarÄ±nÄ±n tutulduÄŸu dosya genel itibariyle â€œ/etc/ssh/sshd_configâ€ konumunda bulunur. Bunu kendi kullandÄ±ÄŸÄ±mÄ±z metin editÃ¶rlerinden istediÄŸimiz biriyle ama sudo (yani yÃ¶netici) yetkilerine sahip bir kullanÄ±cÄ± ile aÃ§mamÄ±z gerekmektedir.\nUbuntu Ã¼zerinden devam edecek olursak\nsudo nano /etc/ssh/sshd_config # Ayar dosyasÄ±nÄ± aÃ§maya yarayan komut Bulup deÄŸiÅŸtireceÄŸimiz baÅŸlÄ±klar\n#ClientAliveInterval 0 \u003e\u003e BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve \"0\" olan deÄŸeri 300 yapÄ±yoruz. Bu komut baÄŸlantÄ± kullanÄ±lmadÄ±ÄŸÄ± (idle konumunda kaldÄ±ÄŸÄ±) zaman kaÃ§ sn sonra baÄŸlantÄ±nÄ±n otomatik kapatÄ±lacaÄŸÄ±nÄ± dÃ¼zenler #PermitEmptyPasswords no \u003e\u003eÂ BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve \"no\" olan deÄŸeri deÄŸiÅŸtirmiyoruz. Bu komut boÅŸ veya ÅŸifresiz kullanÄ±cÄ±larÄ±n baÄŸlanmasÄ±nÄ± engeller. Yani boÅŸ ÅŸifrelere izin vermez. X11Forwarding yes \u003e\u003e EÄŸer baÅŸÄ±nda hastag var ise kaldÄ±rÄ±yoruz yok ise \"yes\" olan deÄŸeri no olarak deÄŸiÅŸtiriyoruz. Bu komut sunucu Ã¼zerinde GUI arayÃ¼zÃ¼ne sahip uygulamalarÄ± Ã§alÄ±ÅŸtÄ±rma kolaylÄ±ÄŸÄ± saÄŸlamasÄ±na raÄŸmen suistimal edilmesi mÃ¼mkÃ¼n bir durum olduÄŸundan kapatÄ±yoruz. #MaxAuthTries 6 \u003e\u003e BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve \"6\" olan deÄŸeri 3 yapÄ±yoruz. Bu komut ÅŸifrenizi kaÃ§ kez deneyebileceklerini dÃ¼zenler. 6 sayÄ±sÄ± gereksiz derece yÃ¼ksek bir deÄŸer olup genel kabul 3 ve veya 4 olmasÄ± yÃ¶nÃ¼ndedir. #Protocol 2 \u003e\u003e EÄŸer baÅŸÄ±nda hastag var ise kaldÄ±rÄ±yoruz, bÃ¶yle bir kayÄ±t hiÃ§ yok ise \"Protocol 2\" ÅŸeklindeki deÄŸeri ilk bulduÄŸumuz boÅŸluÄŸa ekliyoruz. Bu komut SSH'Ä±n sadece en yeni protokolÃ¼ ile baÄŸlantÄ±larÄ±n yapÄ±lmasÄ±nÄ± saÄŸlayarak eski protokolÃ¼n aÃ§Ä±klÄ±klarÄ±ndan sizi korur. AyarlarÄ± yaptÄ±ktan sonra kontrol etmek isterseniz: â€œsudo sshd -tâ€ komutunu kullanabilirsiniz. EÄŸer bir hata mesajÄ± gÃ¶rmez iseniz â€œsudo systemctl restart sshdâ€ veya â€œsudo service sshd restartâ€ komutu ile ayarlarÄ± uygulayÄ±p servisi baÅŸtan baÅŸlatabilirsiniz\nÃ–nerilen ayarlar Bir Ã¶nceki ayarlara ek olarak kullanÄ±cÄ± bazlÄ± oturum aÃ§ma, sadece gÃ¼venli anahtar kullanarak oturum aÃ§ma ve Root kullanÄ±cÄ±sÄ± ile oturum aÃ§mayÄ± kÄ±sÄ±tlama gibi ek ayarlamalar yapacaÄŸÄ±z. Ã–ncelikle yerel bilgisayarÄ±nÄ±zdaki kullanÄ±cÄ±nÄ±z iÃ§in bir gizli anahtar Ã¼retmeniz gerekiyor. Bunun iÃ§in eÄŸer linux tabanlÄ± bir iÅŸletim sistemi kullanÄ±yor iseniz\nssh-keygen -t rsa -b 4096 # yazdÄ±ktan sonra aÅŸaÄŸÄ±daki sorulara cevap olarak istediÄŸiniz ÅŸifreyi giriniz \u003e\u003e\u003e\u003e Enter passphrase (empty for no passphrase): [Press enter key] \u003e\u003e\u003e\u003e Enter same passphrase again: [Press enter key] veya ssh-keygen -t ecdsa -b 521 # Daha gÃ¼venli ve daha hÄ±zlÄ± olan ekliptik anahtar Ã¼retir. AÅŸaÄŸÄ±daki sorulara cevap olarak istediÄŸiniz ÅŸifreyi giriniz \u003e\u003e\u003e\u003e Enter passphrase (empty for no passphrase): [Press enter key] \u003e\u003e\u003e\u003e Enter same passphrase again: [Press enter key] DiÄŸer sorulara Enterâ€™a basarak cevap vermiÅŸ ve anahtar iÃ§in belirli bir konum yazmamÄ±ÅŸ iseniz anahtar Ã§iftiniz (.pub= halka aÃ§Ä±k anahtar) / uzantÄ±sÄ±z olan gizli anahtar) /home/KULLANICI_ADINIZ/.ssh klasÃ¶rÃ¼ne kaydedilmiÅŸtir. ÃœrettiÄŸiniz anahtarÄ± sunucunuza tanÄ±tmak iÃ§in aÅŸaÄŸÄ±daki kodu kullanabilirsiniz.\nssh-copy-id -i ~/.ssh/ANAHTAR_ISMINIZ.pub SUNUCUDAKI_KULLANICI_ADINIZ@SUNUCU_IP_ADRESI # yazdÄ±ktan sonra kullanÄ±cÄ±nÄ±zÄ±n ÅŸifresini sorucak ve doÄŸru girdiÄŸiniz takdirde onay mesajÄ± ile karÅŸÄ±laÅŸacaksÄ±nÄ±z. Kendi anahtarÄ±nÄ±zÄ± Ã¼rettikten sonra sunucuya sadece anahtar ile eriÅŸmek iÃ§in; Bulup deÄŸiÅŸtireceÄŸimiz baÅŸlÄ±klar\n#PasswordAuthentication no \u003e\u003e BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve \"no\" olan deÄŸeri no olarak bÄ±rakÄ±yoruz. Bu komut sunucuya ÅŸifre ile baÄŸlanmayÄ± engeller. KullanÄ±cÄ±lar sadece ssh_keyleri ile baÄŸlanabilirler. PubkeyAuthentication yes \u003e\u003eÂ EÄŸer var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri yes olarak belirliyoruz. Bu komut az Ã¶nce oluÅŸturduÄŸunuz gizli key ile oturum aÃ§manÄ±za izin veren komuttur. #PermitRootLogin no \u003e\u003e BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve \"no\" olan deÄŸeri no olarak bÄ±rakÄ±yoruz. Bu komut ROOT kullanÄ±cÄ±sÄ±nÄ±n ki en yetkili kullanÄ±cÄ±dÄ±r sunucuya eriÅŸmesini engelliyor. Ancak baÅŸka bir kullanÄ±cÄ± ile eriÅŸip sonra ROOT kullancÄ±sÄ±na geÃ§iÅŸ yapabilirsiniz. AllowUsers KULLANICI_ADINIZ \u003e\u003eÂ EÄŸer yok ise bÃ¶yle bir kayÄ±t ekliyoruz. BaÅŸka kullanÄ±cÄ±larÄ±n sunucuya baÄŸlanmasÄ±nÄ± ve/veya kullanÄ±cÄ± adÄ± denemesi yapmasÄ±nÄ± engelliyor. LoginGraceTime 20 \u003e\u003e EÄŸer yok ise bÃ¶yle bir kayÄ±t ekliyoruz ve deÄŸeri 20 olarak ayarlÄ±yoruz. Oturum aÃ§mak iÃ§in gereken sÃ¼reyi saniye cinsinden belirliyor. Uzun sÃ¼re oturum aÃ§ma isteÄŸi ile sunucuyu meÅŸgul etmelerini engelliyoruz. ChallengeResponseAuthentication no \u003e\u003eÂ Var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri no olarak belirliyoruz. Bu komut diÄŸer oturum aÃ§ma yÃ¶ntemlerini devre dÄ±ÅŸÄ± bÄ±rakÄ±yor. KerberosAuthentication no \u003e\u003eÂ Var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri no olarak belirliyoruz. Bu komut diÄŸer oturum aÃ§ma yÃ¶ntemlerini devre dÄ±ÅŸÄ± bÄ±rakÄ±yor. GSSAPIAuthentication no \u003e\u003eÂ Var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri no olarak belirliyoruz. Bu komut diÄŸer oturum aÃ§ma yÃ¶ntemlerini devre dÄ±ÅŸÄ± bÄ±rakÄ±yor. AyarlarÄ± yaptÄ±ktan sonra kontrol etmek isterseniz: â€œsudo sshd -tâ€ komutunu kullanabilirsiniz. EÄŸer bir hata mesajÄ± gÃ¶rmez iseniz â€œsudo systemctl restart sshdâ€ veya â€œsudo service sshd restartâ€ komutu ile ayarlarÄ± uygulayÄ±p servisi baÅŸtan baÅŸlatabilirsiniz\nÄ°leri Seviye Ayarlar Ã–ncelikle standart SSH baÄŸlantÄ± portu olan 22 yi deÄŸiÅŸtirip ardÄ±ndan SSH baÄŸlantÄ±sÄ± sÄ±rasÄ±nda kullanÄ±lan ÅŸifreleme araÃ§larÄ±nÄ± daha da gÃ¼Ã§lÃ¼ hale getireceÄŸiz. ArdÄ±ndan sunucunu SSH hizmetinin loglarÄ±nÄ±n (kayÄ±t defteri kayÄ±tlarÄ±nÄ±n) nasÄ±l tutulacaÄŸÄ±nÄ± belirleyeceÄŸiz.\nBulup deÄŸiÅŸtireceÄŸimiz baÅŸlÄ±klar\n#Port 22 \u003e\u003e Bunu bulup baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve oraya baÅŸka hizmet tarafÄ±ndan kullanÄ±lmayan ve aÃ§Ä±k olan bir port numarasÄ±nÄ± yazÄ±yoruz. Ã–rneÄŸin 2992 olabilir. LogLevel INFO \u003e\u003eÂ Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. KayÄ±t seviyesini belirlememize yarÄ±yor. AllowAgentForwarding no \u003e\u003eÂ Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. Alternatif yÃ¶nlendirme yÃ¶ntemlerini devredÄ±ÅŸÄ± bÄ±rakÄ±yor. AllowTcpForwarding no \u003e\u003eÂ Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. Alternatif yÃ¶nlendirme yÃ¶ntemlerini devredÄ±ÅŸÄ± bÄ±rakÄ±yor. PrintMotd no \u003e\u003eÂ Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. BaÄŸlantÄ± kurulmadan Ã¶nce sunucu ile ilgili bilgi sahibi olmalarÄ±nÄ± engellemek iÃ§in. PermitUserEnvironment no \u003e\u003eÂ Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. PermitTunnel no \u003e\u003eÂ Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. Daha da ileri giderek SSH baÄŸlantÄ±sÄ± sÄ±rasÄ±nda kullanÄ±lan ÅŸifreleme algoritmalarÄ±nÄ±, doÄŸrulama algoritmalarÄ±nÄ±, anahtar deÄŸiÅŸim algoritmalarÄ±nÄ± ve diÄŸer algoritmalarÄ±n hangilerinin Ã¶ntanÄ±mlÄ± olacaÄŸÄ±nÄ± belirliyoruz.\nRoot kullanÄ±cÄ±sÄ± veya sudo yetkisine sahip bir kullanÄ±cÄ± ile aÅŸaÄŸÄ±daki komutlarÄ± sÄ±rasÄ±yla Ã§alÄ±ÅŸtÄ±rÄ±yoruz.\n1] rm /etc/ssh/ssh_host_* 2] ssh-keygen -t rsa -b 4096 -f /etc/ssh/ssh_host_rsa_key -N \"\" 3] ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key -N \"\" 4] awk '$5 \u003e= 3072' /etc/ssh/moduli \u003e /etc/ssh/moduli.tmp 5] mv /etc/ssh/moduli.tmp /etc/ssh/moduli 6] sed -i 's/^\\#HostKey \\/etc\\/ssh\\/ssh_host_\\(rsa\\|ed25519\\)_key$/HostKey \\/etc\\/ssh\\/ssh_host_\\1_key/g' /etc/ssh/sshd_config 7] echo -e \"KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256\\nCiphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr\\nMACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,umac-128-etm@openssh.com\\nHostKeyAlgorithms ssh-ed25519,ssh-ed25519-cert-v01@openssh.com,sk-ssh-ed25519@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,rsa-sha2-256,rsa-sha2-512,rsa-sha2-256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com\" \u003e /etc/ssh/sshd_config.d/ssh-hardening.conf AyarlarÄ± yaptÄ±ktan sonra â€œsudo sshd -tâ€ ve ardÄ±ndan eÄŸer bir hata mesajÄ± gÃ¶rmez iseniz â€œsudo service sshd restartâ€ komutu ile ayarlarÄ± uygulayÄ±p servisi baÅŸtan baÅŸlatÄ±n. ArtÄ±k yeni belirlediÄŸiniz port Ã¼zerinden ve sadece sizin gizli anahtarÄ±nÄ±z ile sunucuya baÄŸlanabileceksiniz. BaÄŸlanmak iÃ§in ise;\nssh -i ~/.ssh/ANAHTAR_ISMINIZ SUNUCUDAKI_KULLANICI_ADINIZ@SUNUCU_IP_ADRESI -p PORT_NUMARASI # komutunu kullanabilirsiniz. Gelen bildirimlere Enter deyip devam edebilirsiniz. Son Bu yazÄ± daha Ã¶nce https://teknolojirehberleri.xyz adresinde yayÄ±mlanmÄ±ÅŸtÄ±r. KiÅŸisel portfolyo oluÅŸturmak adÄ±na ÅŸahsi sitemde yeniden yayÄ±mlama ihtiyacÄ± hissettim.\n","wordCount":"1141","inLanguage":"tr","datePublished":"2021-10-05T00:00:00Z","dateModified":"2023-04-07T05:02:05+02:00","author":{"@type":"Person","name":"Wise"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wiseweb-works.github.io/blog/post/ssh-guvenligi/"},"publisher":{"@type":"Organization","name":"Wise","logo":{"@type":"ImageObject","url":"https://wiseweb-works.github.io/blog/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wiseweb-works.github.io/blog/ accesskey=h title="Wise (Alt + H)">Wise</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://wiseweb-works.github.io/blog/en/ title=English aria-label=:gb:>ğŸ‡¬ğŸ‡§</a></li><li><a href=https://wiseweb-works.github.io/blog/de/ title=Deutsch aria-label=:de:>ğŸ‡©ğŸ‡ª</a></li></ul></div></div><ul id=menu><li><a href=https://wiseweb-works.github.io/blog/ title=Anasayfa><span>Anasayfa</span></a></li><li><a href=https://wiseweb-works.github.io/blog/post/ title=Blog><span>Blog</span></a></li><li><a href=https://wiseweb-works.github.io/blog/page/iletisim/ title=Ä°letiÅŸim><span>Ä°letiÅŸim</span></a></li><li><a href=https://wiseweb-works.github.io/blog/tags/ title=Etiketler><span>Etiketler</span></a></li><li><a href=https://wiseweb-works.github.io/blog/archives/ title=ArÅŸiv><span>ArÅŸiv</span></a></li><li><a href=https://wiseweb-works.github.io/blog/search/ title="Ara ğŸ”"><span>Ara ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Linux Sunucularda SSH GÃ¼venliÄŸi ArtÄ±rma</h1><div class=post-meta><span title='2021-10-05 00:00:00 +0000 UTC'>5 Ekim, 2021</span>&nbsp;Â·&nbsp;<span title='2023-04-07 05:02:05 +0200 +0200'>(Updated 7 Nisan, 2023)</span>&nbsp;Â·&nbsp;6 dk&nbsp;Â·&nbsp;1141 kelime&nbsp;Â·&nbsp;Wise&nbsp;|&nbsp;Ã‡eviriler:<ul class=i18n_list><li><a href=https://wiseweb-works.github.io/blog/en/post/ssh-guvenligi/>ğŸ‡¬ğŸ‡§</a></li><li><a href=https://wiseweb-works.github.io/blog/de/post/ssh-guvenligi/>ğŸ‡©ğŸ‡ª</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/wiseweb-works/blog/tree/master/content/post/ssh-guvenligi.md rel="noopener noreferrer" target=_blank>DÃ¼zenle</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Ä°Ã§indekiler</span></summary><div class=inner><ul><li><a href=#linux-sunucularda-ssh-g%c3%bcvenli%c4%9fini-art%c4%b1rma aria-label="Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma">Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma</a><ul><li><a href=#basit-g%c3%bcvenlik-%c3%b6nlemleri aria-label="Basit GÃ¼venlik Ã–nlemleri">Basit GÃ¼venlik Ã–nlemleri</a></li><li><a href=#%c3%b6nerilen-ayarlar aria-label="Ã–nerilen ayarlar">Ã–nerilen ayarlar</a></li><li><a href=#ileri-seviye-ayarlar aria-label="Ä°leri Seviye Ayarlar">Ä°leri Seviye Ayarlar</a></li></ul></li><li><a href=#son aria-label=Son>Son</a></li></ul></div></details></div><div class=post-content><h1 id=linux-sunucularda-ssh-gÃ¼venliÄŸini-artÄ±rma>Linux Sunucularda SSH gÃ¼venliÄŸini artÄ±rma<a hidden class=anchor aria-hidden=true href=#linux-sunucularda-ssh-gÃ¼venliÄŸini-artÄ±rma>#</a></h1><p>BugÃ¼n sizlerle bir sunucu kiraladÄ±ÄŸÄ±nÄ±z zaman gÃ¼venli bir ÅŸekilde baÄŸlanmamÄ±zÄ± saÄŸlayan SSH hizmetini nasÄ±l daha gÃ¼venli ve dÄ±ÅŸarÄ±dan gelecek kÃ¶tÃ¼ niyetli isteklerden uzak tutabiliriz bundan bahsedeceÄŸim. Ã–ncelikle sÃ¼reci basit, Ã¶nerilen ve ileri-seviye olarak Ã¼Ã§ farklÄ± baÅŸlÄ±k altÄ±nda anlatacaÄŸÄ±m. BaÅŸlÄ±k iÃ§erikleri kiÅŸisel gerekliliklere gÃ¶re aÅŸamalÄ± dÃ¼ÅŸÃ¼nÃ¼lmÃ¼ÅŸtÃ¼r. BaÅŸlÄ±klar bir biri ile baÄŸlantÄ±lÄ± olmasÄ±na raÄŸmen istenilen bir aÅŸamada bÄ±rakÄ±lmasÄ± sorun oluÅŸturmayacaktÄ±r.</p><h2 id=basit-gÃ¼venlik-Ã¶nlemleri>Basit GÃ¼venlik Ã–nlemleri<a hidden class=anchor aria-hidden=true href=#basit-gÃ¼venlik-Ã¶nlemleri>#</a></h2><p>Ã–ncelikle iÃ§inde bulunduÄŸumuz Linux sÃ¼rÃ¼mÃ¼nÃ¼n paket yÃ¶neticisi ile gÃ¼ncellemeleri konsol Ã¼zerinden yÃ¼klememiz gerekmektedir.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Ubuntu iÃ§in: sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt upgrade -y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Fedora iÃ§in: sudo yum update -y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Arch Linux iÃ§in: sudo pacman -Syyu
</span></span></code></pre></div><p>GÃ¼ncellemeler yÃ¼klendikten sonra ise sunucunuzdaki (Benim olayÄ±mda Ubuntu) sshd servisini (ki bu servis dÄ±ÅŸarÄ±dan ssh baÄŸlantÄ±larÄ± almanÄ±za yarayan servistir) yapÄ±landÄ±rmaya baÅŸlÄ±yoruz. Ã–ncelikle Ã§ok karÄ±ÅŸtÄ±rÄ±lmasÄ± nedeniyle belirtmek gerekir ki ssh servisi ile sshd servisi farklÄ± servislerdir. SSH servisi sunucunun baÅŸkaca bilgisayar veya sunuculara baÄŸlanmasÄ±nÄ± yarayan servisken SSHD servisi baÅŸka bilgisayarlarÄ±n sizin sunucunuza baÄŸlanmasÄ±nÄ± yani gelen baÄŸlantÄ±larÄ± karÅŸÄ±layan servistir.</p><p>SSHD servisinin ayarlarÄ±nÄ±n tutulduÄŸu dosya genel itibariyle &ldquo;/etc/ssh/sshd_config&rdquo; konumunda bulunur. Bunu kendi kullandÄ±ÄŸÄ±mÄ±z metin editÃ¶rlerinden istediÄŸimiz biriyle ama sudo (yani yÃ¶netici) yetkilerine sahip bir kullanÄ±cÄ± ile aÃ§mamÄ±z gerekmektedir.</p><p>Ubuntu Ã¼zerinden devam edecek olursak</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/ssh/sshd_config <span style=color:#75715e># Ayar dosyasÄ±nÄ± aÃ§maya yarayan komut</span>
</span></span></code></pre></div><p>Bulup deÄŸiÅŸtireceÄŸimiz baÅŸlÄ±klar</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>#ClientAliveInterval 0  &gt;&gt; BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve &#34;0&#34; olan deÄŸeri 300 yapÄ±yoruz. Bu komut baÄŸlantÄ± kullanÄ±lmadÄ±ÄŸÄ± (idle konumunda kaldÄ±ÄŸÄ±) zaman kaÃ§ sn sonra baÄŸlantÄ±nÄ±n otomatik kapatÄ±lacaÄŸÄ±nÄ± dÃ¼zenler
</span></span><span style=display:flex><span>#PermitEmptyPasswords no &gt;&gt;Â BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve &#34;no&#34; olan deÄŸeri deÄŸiÅŸtirmiyoruz. Bu komut boÅŸ veya ÅŸifresiz kullanÄ±cÄ±larÄ±n baÄŸlanmasÄ±nÄ± engeller. Yani boÅŸ ÅŸifrelere izin vermez.
</span></span><span style=display:flex><span>X11Forwarding yes &gt;&gt; EÄŸer baÅŸÄ±nda hastag var ise kaldÄ±rÄ±yoruz yok ise &#34;yes&#34; olan deÄŸeri no olarak deÄŸiÅŸtiriyoruz. Bu komut sunucu Ã¼zerinde GUI arayÃ¼zÃ¼ne sahip uygulamalarÄ± Ã§alÄ±ÅŸtÄ±rma kolaylÄ±ÄŸÄ± saÄŸlamasÄ±na raÄŸmen suistimal edilmesi mÃ¼mkÃ¼n bir durum olduÄŸundan kapatÄ±yoruz.
</span></span><span style=display:flex><span>#MaxAuthTries 6 &gt;&gt; BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve &#34;6&#34; olan deÄŸeri 3 yapÄ±yoruz. Bu komut ÅŸifrenizi kaÃ§ kez deneyebileceklerini dÃ¼zenler. 6 sayÄ±sÄ± gereksiz derece yÃ¼ksek bir deÄŸer olup genel kabul 3 ve veya 4 olmasÄ± yÃ¶nÃ¼ndedir.
</span></span><span style=display:flex><span>#Protocol 2 &gt;&gt; EÄŸer baÅŸÄ±nda hastag var ise kaldÄ±rÄ±yoruz, bÃ¶yle bir kayÄ±t hiÃ§ yok ise &#34;Protocol 2&#34; ÅŸeklindeki deÄŸeri ilk bulduÄŸumuz boÅŸluÄŸa ekliyoruz. Bu komut SSH&#39;Ä±n sadece en yeni protokolÃ¼ ile baÄŸlantÄ±larÄ±n yapÄ±lmasÄ±nÄ± saÄŸlayarak eski protokolÃ¼n aÃ§Ä±klÄ±klarÄ±ndan sizi korur.
</span></span></code></pre></div><p>AyarlarÄ± yaptÄ±ktan sonra kontrol etmek isterseniz: &ldquo;sudo sshd -t&rdquo; komutunu kullanabilirsiniz. EÄŸer bir hata mesajÄ± gÃ¶rmez iseniz &ldquo;sudo systemctl restart sshd&rdquo; veya &ldquo;sudo service sshd restart&rdquo; komutu ile ayarlarÄ± uygulayÄ±p servisi baÅŸtan baÅŸlatabilirsiniz</p><h2 id=Ã¶nerilen-ayarlar>Ã–nerilen ayarlar<a hidden class=anchor aria-hidden=true href=#Ã¶nerilen-ayarlar>#</a></h2><p>Bir Ã¶nceki ayarlara ek olarak kullanÄ±cÄ± bazlÄ± oturum aÃ§ma, sadece gÃ¼venli anahtar kullanarak oturum aÃ§ma ve Root kullanÄ±cÄ±sÄ± ile oturum aÃ§mayÄ± kÄ±sÄ±tlama gibi ek ayarlamalar yapacaÄŸÄ±z. Ã–ncelikle yerel bilgisayarÄ±nÄ±zdaki kullanÄ±cÄ±nÄ±z iÃ§in bir gizli anahtar Ã¼retmeniz gerekiyor. Bunun iÃ§in eÄŸer linux tabanlÄ± bir iÅŸletim sistemi kullanÄ±yor iseniz</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ssh-keygen -t rsa -b 4096 # yazdÄ±ktan sonra aÅŸaÄŸÄ±daki sorulara cevap olarak istediÄŸiniz ÅŸifreyi giriniz
</span></span><span style=display:flex><span>&gt;&gt;&gt;&gt; Enter passphrase (empty for no passphrase): [Press enter key]
</span></span><span style=display:flex><span>&gt;&gt;&gt;&gt; Enter same passphrase again: [Press enter key]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>veya
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ssh-keygen -t ecdsa -b 521 # Daha gÃ¼venli ve daha hÄ±zlÄ± olan ekliptik anahtar Ã¼retir. AÅŸaÄŸÄ±daki sorulara cevap olarak istediÄŸiniz ÅŸifreyi giriniz
</span></span><span style=display:flex><span>&gt;&gt;&gt;&gt; Enter passphrase (empty for no passphrase): [Press enter key]
</span></span><span style=display:flex><span>&gt;&gt;&gt;&gt; Enter same passphrase again: [Press enter key]
</span></span></code></pre></div><p>DiÄŸer sorulara Enter&rsquo;a basarak cevap vermiÅŸ ve anahtar iÃ§in belirli bir konum yazmamÄ±ÅŸ iseniz anahtar Ã§iftiniz (.pub= halka aÃ§Ä±k anahtar) / uzantÄ±sÄ±z olan gizli anahtar) /home/KULLANICI_ADINIZ/.ssh klasÃ¶rÃ¼ne kaydedilmiÅŸtir. ÃœrettiÄŸiniz anahtarÄ± sunucunuza tanÄ±tmak iÃ§in aÅŸaÄŸÄ±daki kodu kullanabilirsiniz.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ssh-copy-id -i ~/.ssh/ANAHTAR_ISMINIZ.pub SUNUCUDAKI_KULLANICI_ADINIZ@SUNUCU_IP_ADRESI # yazdÄ±ktan sonra kullanÄ±cÄ±nÄ±zÄ±n ÅŸifresini sorucak ve doÄŸru girdiÄŸiniz takdirde onay mesajÄ± ile karÅŸÄ±laÅŸacaksÄ±nÄ±z.
</span></span></code></pre></div><p>Kendi anahtarÄ±nÄ±zÄ± Ã¼rettikten sonra sunucuya sadece anahtar ile eriÅŸmek iÃ§in;
Bulup deÄŸiÅŸtireceÄŸimiz baÅŸlÄ±klar</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>#PasswordAuthentication no &gt;&gt; BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve &#34;no&#34; olan deÄŸeri no olarak bÄ±rakÄ±yoruz. Bu komut sunucuya ÅŸifre ile baÄŸlanmayÄ± engeller. KullanÄ±cÄ±lar sadece ssh_keyleri ile baÄŸlanabilirler.
</span></span><span style=display:flex><span>PubkeyAuthentication yes &gt;&gt;Â EÄŸer var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri yes olarak belirliyoruz. Bu komut az Ã¶nce oluÅŸturduÄŸunuz gizli key ile oturum aÃ§manÄ±za izin veren komuttur.
</span></span><span style=display:flex><span>#PermitRootLogin no &gt;&gt; BaÅŸÄ±ndaki hashtag iÅŸaretini kaldÄ±rÄ±yoruz ve &#34;no&#34; olan deÄŸeri no olarak bÄ±rakÄ±yoruz. Bu komut ROOT kullanÄ±cÄ±sÄ±nÄ±n ki en yetkili kullanÄ±cÄ±dÄ±r sunucuya eriÅŸmesini engelliyor. Ancak baÅŸka bir kullanÄ±cÄ± ile eriÅŸip sonra ROOT kullancÄ±sÄ±na geÃ§iÅŸ yapabilirsiniz.
</span></span><span style=display:flex><span>AllowUsers KULLANICI_ADINIZ &gt;&gt;Â EÄŸer yok ise bÃ¶yle bir kayÄ±t ekliyoruz. BaÅŸka kullanÄ±cÄ±larÄ±n sunucuya baÄŸlanmasÄ±nÄ± ve/veya kullanÄ±cÄ± adÄ± denemesi yapmasÄ±nÄ± engelliyor.
</span></span><span style=display:flex><span>LoginGraceTime 20 &gt;&gt; EÄŸer yok ise bÃ¶yle bir kayÄ±t ekliyoruz ve deÄŸeri 20 olarak ayarlÄ±yoruz. Oturum aÃ§mak iÃ§in gereken sÃ¼reyi saniye cinsinden belirliyor. Uzun sÃ¼re oturum aÃ§ma isteÄŸi ile sunucuyu meÅŸgul etmelerini engelliyoruz.
</span></span><span style=display:flex><span>ChallengeResponseAuthentication no &gt;&gt;Â Var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri no olarak belirliyoruz. Bu komut diÄŸer oturum aÃ§ma yÃ¶ntemlerini devre dÄ±ÅŸÄ± bÄ±rakÄ±yor.
</span></span><span style=display:flex><span>KerberosAuthentication no &gt;&gt;Â Var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri no olarak belirliyoruz. Bu komut diÄŸer oturum aÃ§ma yÃ¶ntemlerini devre dÄ±ÅŸÄ± bÄ±rakÄ±yor.
</span></span><span style=display:flex><span>GSSAPIAuthentication no &gt;&gt;Â Var ise baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve deÄŸeri no olarak belirliyoruz. Bu komut diÄŸer oturum aÃ§ma yÃ¶ntemlerini devre dÄ±ÅŸÄ± bÄ±rakÄ±yor.
</span></span></code></pre></div><p>AyarlarÄ± yaptÄ±ktan sonra kontrol etmek isterseniz: &ldquo;sudo sshd -t&rdquo; komutunu kullanabilirsiniz. EÄŸer bir hata mesajÄ± gÃ¶rmez iseniz &ldquo;sudo systemctl restart sshd&rdquo; veya &ldquo;sudo service sshd restart&rdquo; komutu ile ayarlarÄ± uygulayÄ±p servisi baÅŸtan baÅŸlatabilirsiniz</p><h2 id=ileri-seviye-ayarlar>Ä°leri Seviye Ayarlar<a hidden class=anchor aria-hidden=true href=#ileri-seviye-ayarlar>#</a></h2><p>Ã–ncelikle standart SSH baÄŸlantÄ± portu olan 22 yi deÄŸiÅŸtirip ardÄ±ndan SSH baÄŸlantÄ±sÄ± sÄ±rasÄ±nda kullanÄ±lan ÅŸifreleme araÃ§larÄ±nÄ± daha da gÃ¼Ã§lÃ¼ hale getireceÄŸiz. ArdÄ±ndan sunucunu SSH hizmetinin loglarÄ±nÄ±n (kayÄ±t defteri kayÄ±tlarÄ±nÄ±n) nasÄ±l tutulacaÄŸÄ±nÄ± belirleyeceÄŸiz.</p><p>Bulup deÄŸiÅŸtireceÄŸimiz baÅŸlÄ±klar</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>#Port 22 &gt;&gt; Bunu bulup baÅŸÄ±ndaki hastag iÅŸaretini kaldÄ±rÄ±yoruz ve oraya baÅŸka hizmet tarafÄ±ndan kullanÄ±lmayan ve aÃ§Ä±k olan bir port numarasÄ±nÄ± yazÄ±yoruz. Ã–rneÄŸin 2992 olabilir.
</span></span><span style=display:flex><span>LogLevel INFO &gt;&gt;Â Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. KayÄ±t seviyesini belirlememize yarÄ±yor.
</span></span><span style=display:flex><span>AllowAgentForwarding no &gt;&gt;Â Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. Alternatif yÃ¶nlendirme yÃ¶ntemlerini devredÄ±ÅŸÄ± bÄ±rakÄ±yor.
</span></span><span style=display:flex><span>AllowTcpForwarding no &gt;&gt;Â Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. Alternatif yÃ¶nlendirme yÃ¶ntemlerini devredÄ±ÅŸÄ± bÄ±rakÄ±yor.
</span></span><span style=display:flex><span>PrintMotd no &gt;&gt;Â Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz. BaÄŸlantÄ± kurulmadan Ã¶nce sunucu ile ilgili bilgi sahibi olmalarÄ±nÄ± engellemek iÃ§in.
</span></span><span style=display:flex><span>PermitUserEnvironment no &gt;&gt;Â Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz.
</span></span><span style=display:flex><span>PermitTunnel no &gt;&gt;Â Bu ayarÄ± bulup deÄŸiÅŸtiriyoruz yok ise ekliyoruz.
</span></span></code></pre></div><p>Daha da ileri giderek SSH baÄŸlantÄ±sÄ± sÄ±rasÄ±nda kullanÄ±lan ÅŸifreleme algoritmalarÄ±nÄ±, doÄŸrulama algoritmalarÄ±nÄ±, anahtar deÄŸiÅŸim algoritmalarÄ±nÄ± ve diÄŸer algoritmalarÄ±n hangilerinin Ã¶ntanÄ±mlÄ± olacaÄŸÄ±nÄ± belirliyoruz.</p><p>Root kullanÄ±cÄ±sÄ± veya sudo yetkisine sahip bir kullanÄ±cÄ± ile aÅŸaÄŸÄ±daki komutlarÄ± sÄ±rasÄ±yla Ã§alÄ±ÅŸtÄ±rÄ±yoruz.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>1<span style=color:#f92672>]</span> rm /etc/ssh/ssh_host_*
</span></span><span style=display:flex><span>2<span style=color:#f92672>]</span> ssh-keygen -t rsa -b <span style=color:#ae81ff>4096</span> -f /etc/ssh/ssh_host_rsa_key -N <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>3<span style=color:#f92672>]</span> ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key -N <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>4<span style=color:#f92672>]</span> awk <span style=color:#e6db74>&#39;$5 &gt;= 3072&#39;</span> /etc/ssh/moduli &gt; /etc/ssh/moduli.tmp
</span></span><span style=display:flex><span>5<span style=color:#f92672>]</span> mv /etc/ssh/moduli.tmp /etc/ssh/moduli
</span></span><span style=display:flex><span>6<span style=color:#f92672>]</span> sed -i <span style=color:#e6db74>&#39;s/^\#HostKey \/etc\/ssh\/ssh_host_\(rsa\|ed25519\)_key$/HostKey \/etc\/ssh\/ssh_host_\1_key/g&#39;</span> /etc/ssh/sshd_config
</span></span><span style=display:flex><span>7<span style=color:#f92672>]</span> echo -e <span style=color:#e6db74>&#34;KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256\nCiphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr\nMACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,umac-128-etm@openssh.com\nHostKeyAlgorithms ssh-ed25519,ssh-ed25519-cert-v01@openssh.com,sk-ssh-ed25519@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,rsa-sha2-256,rsa-sha2-512,rsa-sha2-256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com&#34;</span> &gt; /etc/ssh/sshd_config.d/ssh-hardening.conf
</span></span></code></pre></div><p>AyarlarÄ± yaptÄ±ktan sonra &ldquo;sudo sshd -t&rdquo; ve ardÄ±ndan eÄŸer bir hata mesajÄ± gÃ¶rmez iseniz &ldquo;sudo service sshd restart&rdquo; komutu ile ayarlarÄ± uygulayÄ±p servisi baÅŸtan baÅŸlatÄ±n. ArtÄ±k yeni belirlediÄŸiniz port Ã¼zerinden ve sadece sizin gizli anahtarÄ±nÄ±z ile sunucuya baÄŸlanabileceksiniz. BaÄŸlanmak iÃ§in ise;</p><pre tabindex=0><code class=language-texte data-lang=texte>ssh -i ~/.ssh/ANAHTAR_ISMINIZ SUNUCUDAKI_KULLANICI_ADINIZ@SUNUCU_IP_ADRESI -p PORT_NUMARASI # komutunu kullanabilirsiniz. Gelen bildirimlere Enter deyip devam edebilirsiniz.
</code></pre><h1 id=son>Son<a hidden class=anchor aria-hidden=true href=#son>#</a></h1><p>Bu yazÄ± daha Ã¶nce <a href=https://teknolojirehberleri.xyz>https://teknolojirehberleri.xyz</a> adresinde yayÄ±mlanmÄ±ÅŸtÄ±r. KiÅŸisel portfolyo oluÅŸturmak adÄ±na ÅŸahsi sitemde yeniden yayÄ±mlama ihtiyacÄ± hissettim.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wiseweb-works.github.io/blog/tags/linux/>linux</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/ssh/>ssh</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/security/>security</a></li><li><a href=https://wiseweb-works.github.io/blog/tags/audit/>audit</a></li></ul><nav class=paginav><a class=prev href=https://wiseweb-works.github.io/blog/post/ssl-konfigurasyonu/><span class=title>Â« Ã–nceki</span><br><span>Linux Sunucularda SSL gÃ¼venliÄŸini arttÄ±rma</span></a>
<a class=next href=https://wiseweb-works.github.io/blog/post/maximum-kart-reklami/><span class=title>Sonraki Â»</span><br><span>Maximum Kart reklamÄ± Rubicon nehrini geÃ§ti mi?</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://wiseweb-works.github.io/blog/>Wise</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Kopyala";function s(){t.innerHTML="KopyalandÄ±!",setTimeout(()=>{t.innerHTML="Kopyala"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>